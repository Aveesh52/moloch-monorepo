(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,a){e.exports=a.p+"static/media/bull.204229a6.png"},349:function(e,t,a){e.exports=a(641)},362:function(e,t){},364:function(e,t){},389:function(e,t){},393:function(e,t){},467:function(e){e.exports=[{constant:!0,inputs:[],name:"processingReward",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x03e32fa1"},{constant:!0,inputs:[{name:"",type:"address"}],name:"members",outputs:[{name:"delegateKey",type:"address"},{name:"shares",type:"uint256"},{name:"isActive",type:"bool"},{name:"highestIndexYesVote",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x08ae4b0c"},{constant:!0,inputs:[],name:"totalSharesRequested",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x1a396a4a"},{constant:!0,inputs:[],name:"totalShares",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x3a98ef39"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"proposalQueue",outputs:[{name:"proposer",type:"address"},{name:"applicant",type:"address"},{name:"sharesRequested",type:"uint256"},{name:"startingPeriod",type:"uint256"},{name:"yesVotes",type:"uint256"},{name:"noVotes",type:"uint256"},{name:"processed",type:"bool"},{name:"didPass",type:"bool"},{name:"aborted",type:"bool"},{name:"tokenTribute",type:"uint256"},{name:"details",type:"string"},{name:"maxTotalSharesAtYesVote",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x3b214a74"},{constant:!0,inputs:[{name:"",type:"address"}],name:"memberAddressByDelegateKey",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x402c1794"},{constant:!0,inputs:[],name:"gracePeriodLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x63858f2d"},{constant:!0,inputs:[],name:"abortWindow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x7896ddaf"},{constant:!0,inputs:[],name:"summoningTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x7d5b6c72"},{constant:!0,inputs:[],name:"votingPeriodLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8340bbce"},{constant:!0,inputs:[],name:"proposalDeposit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8b15a605"},{constant:!0,inputs:[],name:"guildBank",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0xa42afd29"},{constant:!0,inputs:[],name:"dilutionBound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xafe5475f"},{constant:!0,inputs:[],name:"periodDuration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xb470aade"},{constant:!0,inputs:[],name:"approvedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0xbab46259"},{inputs:[{name:"summoner",type:"address"},{name:"_approvedToken",type:"address"},{name:"_periodDuration",type:"uint256"},{name:"_votingPeriodLength",type:"uint256"},{name:"_gracePeriodLength",type:"uint256"},{name:"_abortWindow",type:"uint256"},{name:"_proposalDeposit",type:"uint256"},{name:"_dilutionBound",type:"uint256"},{name:"_processingReward",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor",signature:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"delegateKey",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!0,name:"applicant",type:"address"},{indexed:!1,name:"tokenTribute",type:"uint256"},{indexed:!1,name:"sharesRequested",type:"uint256"}],name:"SubmitProposal",type:"event",signature:"0x2d105ebbc222c190059b3979356e13469f6a29a350add74ac3bf4f22f16301d6"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"delegateKey",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"uintVote",type:"uint8"}],name:"SubmitVote",type:"event",signature:"0x29bf0061f2faa9daa482f061b116195432d435536d8af4ae6b3c5dd78223679b"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"applicant",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"tokenTribute",type:"uint256"},{indexed:!1,name:"sharesRequested",type:"uint256"},{indexed:!1,name:"didPass",type:"bool"}],name:"ProcessProposal",type:"event",signature:"0x3f6fc303a82367bb4947244ba21c569a5ed2e870610f1a693366142309d7cbea"},{anonymous:!1,inputs:[{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"sharesToBurn",type:"uint256"}],name:"Ragequit",type:"event",signature:"0x667cb7a1818eacd2e3a421e734429ba9c4c7dec85e578e098b6d72cd2bfbf2f6"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!1,name:"applicantAddress",type:"address"}],name:"Abort",type:"event",signature:"0xa749dd3df92cae4d106b3eadf60c0dffd3698de09c67ce58ce6f5d02eb821313"},{anonymous:!1,inputs:[{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"newDelegateKey",type:"address"}],name:"UpdateDelegateKey",type:"event",signature:"0xde7b64a369e10562cc2e71f0f1f944eaf144b75fead6ecb51fac9c4dd6934885"},{anonymous:!1,inputs:[{indexed:!0,name:"summoner",type:"address"},{indexed:!1,name:"shares",type:"uint256"}],name:"SummonComplete",type:"event",signature:"0x03995a801b13c36325306deef859ef977ce61c6e15a794281bf969d204825227"},{constant:!1,inputs:[{name:"applicant",type:"address"},{name:"tokenTribute",type:"uint256"},{name:"sharesRequested",type:"uint256"},{name:"details",type:"string"}],name:"submitProposal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x962006c3"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"},{name:"uintVote",type:"uint8"}],name:"submitVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x99653fbe"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"}],name:"processProposal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xe63bc62d"},{constant:!1,inputs:[{name:"sharesToBurn",type:"uint256"}],name:"ragequit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x8436593f"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"}],name:"abort",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xe50701f4"},{constant:!1,inputs:[{name:"newDelegateKey",type:"address"}],name:"updateDelegateKey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x2582bf2a"},{constant:!0,inputs:[],name:"getCurrentPeriod",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x086146d2"},{constant:!0,inputs:[{name:"highestIndexYesVote",type:"uint256"}],name:"canRagequit",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function",signature:"0xa3dc3800"},{constant:!0,inputs:[{name:"startingPeriod",type:"uint256"}],name:"hasVotingPeriodExpired",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function",signature:"0x9425a476"},{constant:!0,inputs:[{name:"memberAddress",type:"address"},{name:"proposalIndex",type:"uint256"}],name:"getMemberProposalVote",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function",signature:"0x044a0ca8"}]},468:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},469:function(e){e.exports=[{constant:!1,inputs:[{name:"owner_",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"",type:"bytes32"}],name:"poke",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[],name:"poke",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"compute",outputs:[{name:"",type:"bytes32"},{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"wat",type:"address"}],name:"set",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"wat",type:"address"}],name:"unset",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"indexes",outputs:[{name:"",type:"bytes12"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"next",outputs:[{name:"",type:"bytes12"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"read",outputs:[{name:"",type:"bytes32"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"peek",outputs:[{name:"",type:"bytes32"},{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes12"}],name:"values",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"min_",type:"uint96"}],name:"setMin",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"authority_",type:"address"}],name:"setAuthority",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"void",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"pos",type:"bytes12"},{name:"wat",type:"address"}],name:"set",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"authority",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"pos",type:"bytes12"}],name:"unset",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"next_",type:"bytes12"}],name:"setNext",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"min",outputs:[{name:"",type:"uint96"}],payable:!1,type:"function"},{anonymous:!0,inputs:[{indexed:!0,name:"sig",type:"bytes4"},{indexed:!0,name:"guy",type:"address"},{indexed:!0,name:"foo",type:"bytes32"},{indexed:!0,name:"bar",type:"bytes32"},{indexed:!1,name:"wad",type:"uint256"},{indexed:!1,name:"fax",type:"bytes"}],name:"LogNote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"authority",type:"address"}],name:"LogSetAuthority",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"}],name:"LogSetOwner",type:"event"}]},640:function(e,t,a){},641:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(88),o=a.n(s),l=a(10),i=a.n(l),c=a(21),u=a(35),m=a(36),d=a(45),p=a(44),b=a(46),g=a(23),f=a(153),y=a(30),h=a(90),E=function(){return r.a.createElement("div",{id:"background"},r.a.createElement("div",{className:"blurred_image"}),r.a.createElement("div",{className:"dark_overlay"}))},v=a(655),x=a(66),w=a(653),k=a(643),N=a(338),A=a(22),C=a(24),P=a.n(C);function S(){var e=Object(g.a)(["\n  mutation SetAttributes(\n    $status: String!, \n    $title: String!, \n    $description: String!, \n    $gracePeriod: Number!, \n    $votingEnds: Number!, \n    $votingStarts: Number!, \n    $readyForProcessing: Bool!\n  ) {\n    setAttributes(\n      status: $status, \n      title: $title, \n      description: $description, \n      gracePeriod: $gracePeriod, \n      votingEnds: $votingEnds, \n      votingStarts: $votingStarts, \n      readyForProcessing: $readyForProcessing\n    ) @client {\n      status\n      title\n      description\n      gracePeriod\n      votingEnds\n      votingStarts\n      readyForProcessing\n    }\n  }\n"]);return S=function(){return e},e}function I(){var e=Object(g.a)(["\n  query Proposal($id: String!) {\n    proposal(id: $id) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes(first: 100) {\n        member {\n          id\n          shares\n        }\n        uintVote\n      }\n      details\n      startingPeriod\n      processed\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n"]);return I=function(){return e},e}function O(){var e=Object(g.a)(["\n  query Proposals($id: String!) {\n    votes(first: 100, where: { memberAddress: $id }) {\n      uintVote\n      proposal {\n        id\n        timestamp\n        tokenTribute\n        sharesRequested\n        processed\n        didPass\n        aborted\n        yesVotes\n        noVotes\n        proposalIndex\n        details\n        startingPeriod\n        processed\n        status @client\n        title @client\n        description @client\n        gracePeriod @client\n        votingEnds @client\n        votingStarts @client\n        readyForProcessing @client\n      }\n    }\n  }\n"]);return O=function(){return e},e}function V(){var e=Object(g.a)(["\n  {\n    proposals(first: 100, orderBy: proposalIndex, orderDirection: desc, where: { processed: true } ) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes(first: 100) {\n        member {\n          shares\n        }\n        uintVote\n      }\n      details\n      startingPeriod\n      processed\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n"]);return V=function(){return e},e}function D(){var e=Object(g.a)(["\n  {\n    proposals(first: 100, orderBy: proposalIndex, orderDirection: desc, where: { processed: false }) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes(first: 100) {\n        member {\n          shares\n        }\n        uintVote\n      }\n      details\n      startingPeriod\n      processed\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n"]);return D=function(){return e},e}function j(){var e=Object(g.a)(["\n  {\n    proposals(first: 100) {\n      id\n    }\n  }\n"]);return j=function(){return e},e}function R(){var e=Object(g.a)(["\n  {\n    members(first: 100, where: { shares_gt: 0, isActive: true }) {\n      id\n      shares\n      isActive\n      tokenTribute\n      delegateKey\n    }\n  }\n"]);return R=function(){return e},e}function _(){var e=Object(g.a)(["\n  query Member($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n      tokenTribute\n      delegateKey\n      votes {\n        uintVote\n          proposal {\n          id\n          timestamp\n          tokenTribute\n          sharesRequested\n          processed\n          didPass\n          aborted\n          yesVotes\n          noVotes\n          proposalIndex\n          details\n          status @client\n          title @client\n          description @client\n          gracePeriod @client\n          votingEnds @client\n          votingStarts @client\n          readyForProcessing @client\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}function q(){var e=Object(g.a)(["\n  query Member($delegateKey: String!) {\n    members(where: { delegateKey: $delegateKey }) {\n      id\n      shares\n      isActive\n      tokenTribute\n      delegateKey\n    }\n  }\n"]);return q=function(){return e},e}function M(){var e=Object(g.a)(["\n  query Member($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n      tokenTribute\n      delegateKey\n    }\n  }\n"]);return M=function(){return e},e}function T(){var e=Object(g.a)(["\n  query Metadata {\n    exchangeRate @client\n    totalShares @client\n    guildBankValue @client\n    shareValue @client\n    currentPeriod @client\n  }\n"]);return T=function(){return e},e}function F(){var e=Object(g.a)(["\n  query CurrentPeriod {\n    currentPeriod @client\n  }\n"]);return F=function(){return e},e}function U(){var e=Object(g.a)(["\n  query ShareValue {\n    shareValue @client\n  }\n"]);return U=function(){return e},e}function L(){var e=Object(g.a)(["\n  query GuildBankValue {\n    guildBankValue @client\n  }\n"]);return L=function(){return e},e}function B(){var e=Object(g.a)(["\n  query TotalShares {\n    totalShares @client\n  }\n"]);return B=function(){return e},e}function K(){var e=Object(g.a)(["\n  query ExchangeRate {\n    exchangeRate @client\n  }\n"]);return K=function(){return e},e}P()(K()),P()(B()),P()(L()),P()(U()),P()(F());var $,H,z,Y,Q=P()(T()),W=P()(M()),G=P()(q()),J=P()(_()),Z=P()(R()),X=P()(j()),ee=P()(D()),te=P()(V()),ae=(P()(O()),P()(I())),ne=(P()(S()),a(337)),re=a(20),se=a(467),oe=a(468),le=a(469);function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("gnosis"!==localStorage.getItem("loginType")){e.next=6;break}return e.next=4,be(t);case 4:e.next=8;break;case 6:return e.next=8,de(t);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){return me.apply(this,arguments)}function me(){return(me=Object(c.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNetwork();case 2:if(a=e.sent,console.log("network: ",a),1===a.chainId){e.next=7;break}return alert("Please set Web3 provider to Mainnet and try again."),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(c.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum||window.web3||alert("Web3 not detected."),a="",!window.ethereum){e.next=14;break}return e.next=5,window.ethereum.enable();case 5:return n=window.ethereum||window.web3.currentProvider,Y=new re.ethers.providers.Web3Provider(n),e.next=9,ue(Y);case 9:if(!e.sent){e.next=14;break}return localStorage.setItem("loginType","metamask"),e.next=13,Y.listAccounts();case 13:a=e.sent[0].toLowerCase();case 14:return t.writeData({data:{loggedInUser:a}}),window.localStorage.setItem("loggedInUser",a),e.abrupt("return",Y);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(c.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new ne.a({rpcUrl:"https://mainnet.infura.io/M2xeaVefzxkLhvrTLq43"}),n="",Y=new re.ethers.providers.Web3Provider(a),e.next=5,ue(Y);case 5:if(!e.sent){e.next=10;break}return localStorage.setItem("loginType","gnosis"),e.next=9,Y.listAccounts();case 9:n=e.sent[0].toLowerCase();case 10:t.writeData({data:{loggedInUser:n}}),window.localStorage.setItem("loggedInUser",n);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return ye.apply(this,arguments)}function ye(){return(ye=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=14;break}if("metamask"!==localStorage.getItem("loginType")){e.next=7;break}return e.next=4,de();case 4:Y=e.sent,e.next=14;break;case 7:if("gnosis"!==localStorage.getItem("loginType")){e.next=13;break}return e.next=10,be();case 10:Y=e.sent,e.next=14;break;case 13:throw new Error("Not logged in with web3.");case 14:return e.abrupt("return",Y);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function he(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,fe();case 3:Y=e.sent,$=new re.ethers.Contract("0x1fd169A4f5c59ACf79d0Fd5d91D1201EF1Bce9f1",se,Y.getSigner()),e.next=9;break;case 7:a=re.ethers.getDefaultProvider(),$=new re.ethers.Contract("0x1fd169A4f5c59ACf79d0Fd5d91D1201EF1Bce9f1",se,a);case 9:return e.abrupt("return",$);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(c.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,fe();case 3:Y=e.sent,H=new re.ethers.Contract("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",oe,Y.getSigner()),e.next=9;break;case 7:a=re.ethers.getDefaultProvider(),H=new re.ethers.Contract("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",oe,a);case 9:return e.abrupt("return",H);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(){return ke.apply(this,arguments)}function ke(){return(ke=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=re.ethers.getDefaultProvider(),z=new re.ethers.Contract("0x729D19f657BD0614b4985Cf1D82531c67569197B",le,t),e.abrupt("return",z);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ne(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(c.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t);case 2:return e.abrupt("return",$);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(c.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:return e.abrupt("return",H);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Se(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=3;break}return e.next=3,we();case 3:return e.abrupt("return",z);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Oe=Object(A.c)(function(e){return r.a.createElement("div",{className:"dropdownItems"},e.member&&e.member.isActive?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Item,{className:"item",onClick:function(){return e._handleCloseDropdown()}},r.a.createElement(y.b,{to:"/members/".concat(e.member.id),className:"link"},r.a.createElement("p",null,r.a.createElement(x.a,{name:"user"}),"View Profile"))),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{icon:"key",className:"item",content:"Change Delegate Key",onClick:function(){e._handleOpenDropdown(),e.onLoadChangeDelegateKey()}}),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{icon:"dollar",className:"item",content:"Ragequit",onClick:function(){e._handleOpenDropdown(),e.onLoadWithdrawLootToken()}}),r.a.createElement(v.a.Divider,null)):null,r.a.createElement(v.a.Item,{className:"item"},r.a.createElement(y.b,{to:"/login",className:"link",onClick:Object(c.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._handleCloseDropdown(),window.localStorage.setItem("loggedInUser",""),t.next=4,e.client.resetStore();case 4:return t.next=6,e.populateData(!0);case 6:window.location.reload();case 7:case"end":return t.stop()}},t)}))},r.a.createElement("p",null,r.a.createElement(x.a,{name:"power off"}),"Sign Out"))))}),Ve=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={newDelegateKey:""},a.submitChangeDelegateKey=Object(c.a)(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.newDelegateKey,n=a.props.moloch,console.log("Sending moloch.updateDelegateKey(".concat(t,")")),e.next=5,n.updateDelegateKey(t);case 5:r=e.sent,console.log("tx: ",r);case 7:case"end":return e.stop()}},e)})),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.newDelegateKey,a=this.props.onLoadMain;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{icon:"arrow left",className:"item",content:"Back to Menu",onClick:function(){return a()}}),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{className:"item submenu"},r.a.createElement("p",null,r.a.createElement(x.a,{name:"key"}),"Change Delegate Key"),r.a.createElement(w.a.Input,{placeholder:"Enter new key address",onChange:function(t){return e.setState({newDelegateKey:t.target.value})},value:t}),r.a.createElement(k.a,{onClick:this.submitChangeDelegateKey},"Save")))}}]),t}(r.a.Component),De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={ragequitAmount:""},a.submitRagequit=Object(c.a)(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.ragequitAmount,n=a.props.moloch,console.log("Sending moloch.ragequit(".concat(t,")")),e.next=5,n.ragequit(t);case 5:r=e.sent,console.log("tx: ",r);case 7:case"end":return e.stop()}},e)})),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.ragequitAmount,a=this.props.onLoadMain;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{icon:"arrow left",className:"item",content:"Back to Menu",onClick:function(){return a()}}),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{className:"item submenu"},r.a.createElement("p",null,r.a.createElement(x.a,{name:"dollar"}),"Ragequit"),r.a.createElement(w.a.Input,{placeholder:"Number of shares",onChange:function(t){return e.setState({ragequitAmount:t.target.value})},value:t}),r.a.createElement(k.a,{onClick:this.submitRagequit},"Withdraw")))}}]),t}(r.a.Component),je=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visibleMenu:"main",visibleRightMenu:!1,moloch:{}},a.logIn=function(){var e=Object(c.a)(i.a.mark(function e(t){var n,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.loggedInUser,r=a.props.client,"metamask"!==t){e.next=8;break}return e.next=5,de(r);case 5:s=e.sent,e.next=15;break;case 8:if("gnosis"!==t){e.next=14;break}return e.next=11,be(r);case 11:s=e.sent,e.next=15;break;case 14:throw new Error("Unsupported Web3 login method");case 15:if(s){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,Ne(n);case 19:o=e.sent,a.setState({moloch:o});case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.loggedInUser,e.next=3,Ne(t);case 3:a=e.sent,this.setState({moloch:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_handleOpenDropdown",value:function(){this.setState({visibleRightMenu:!0})}},{key:"_handleCloseDropdown",value:function(){this.setState({visibleRightMenu:!1})}},{key:"getTopRightMenuContent",value:function(e){var t,a=this,n=this.props.loggedInUser,s=this.state.moloch;if(n)switch(this.state.visibleMenu){case"main":t=r.a.createElement(Oe,{member:e,_handleOpenDropdown:function(){return a._handleOpenDropdown()},_handleCloseDropdown:function(){return a._handleCloseDropdown()},onLoadChangeDelegateKey:function(){return a.setState({visibleMenu:"changeDelegateKey"})},onLoadWithdrawLootToken:function(){return a.setState({visibleMenu:"withdrawLootToken"})}});break;case"changeDelegateKey":t=r.a.createElement(Ve,{onLoadMain:function(){a._handleOpenDropdown(),a.setState({visibleMenu:"main"})},moloch:s});break;case"withdrawLootToken":t=r.a.createElement(De,{onLoadMain:function(){a._handleOpenDropdown(),a.setState({visibleMenu:"main"})},moloch:s})}else t=r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Item,{icon:"user",className:"item",content:"Log In With Metamask",onClick:function(){return a.logIn("metamask")}}),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{icon:"user",className:"item",content:"Log In With Gnosis Safe",onClick:function(){return a.logIn("gnosis")}}));return t}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser;return r.a.createElement(A.b,{query:W,variables:{address:t}},function(a){var n=a.loading,s=a.error,o=a.data;if(n)return"Loading...";if(s)throw new Error("Error!: ".concat(s));return r.a.createElement("div",{id:"header"},r.a.createElement(N.a,{columns:"equal",verticalAlign:"middle"},t?r.a.createElement(N.a.Column,{textAlign:"left",className:"menu"}):null,r.a.createElement(N.a.Column,{textAlign:"center",className:"logo"},r.a.createElement(y.b,{to:"/"},"MOLOCH")),r.a.createElement(N.a.Column,{textAlign:"right",className:"dropdown"},r.a.createElement(v.a,{className:"right_dropdown",open:e.state.visibleRightMenu,onBlur:function(){return e._handleCloseDropdown()},onFocus:function(){return e._handleOpenDropdown()},text:t?"".concat(t.substring(0,6),"..."):"Web3 Login"},r.a.createElement(v.a.Menu,{className:"menu blurred",direction:"left"},e.getTopRightMenuContent(o.member))))))})}}]),t}(n.Component),Re=function(e){var t=e.children;return r.a.createElement("div",{id:"wrapper"},t)},_e=a(206),qe=a(658),Me=a(654),Te=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2});function Fe(e,t){var a=re.utils.formatEther(e),n=re.utils.formatEther(t);return Te.format(parseFloat(a*n))}var Ue=a(60),Le=Object(Ue.a)({members:function(e){var t=e.render;return r.a.createElement(A.b,{query:Z},t)},proposals:function(e){var t=e.render;return r.a.createElement(A.b,{query:X},t)},metadata:function(e){var t=e.render;return r.a.createElement(A.b,{query:Q},t)}}),Be=function(e){var t=e.members,a=e.loading;return r.a.createElement(y.b,{to:"/members",className:"link"},r.a.createElement(k.a,{size:"large",color:"grey",className:"btn_link"},a?"...":t.length," Members"))},Ke=function(e){var t=e.proposals,a=e.loading;return r.a.createElement(y.b,{to:"/proposals",className:"link"},r.a.createElement(k.a,{size:"large",color:"grey",className:"btn_link"},a?"...":t.length," Proposals"))},$e=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={approval:"",token:null,userAddress:null},a.handleChange=function(e){return a.setState({approval:e.target.value})},a.handleSubmit=Object(c.a)(i.a.mark(function e(){var t,n,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.approval,r=t.token,console.log("Approving wETH: ","0x1fd169A4f5c59ACf79d0Fd5d91D1201EF1Bce9f1",re.utils.parseEther(n).toString()),e.next=4,r.approve("0x1fd169A4f5c59ACf79d0Fd5d91D1201EF1Bce9f1",re.utils.parseEther(n));case 4:s=e.sent,console.log("tx: ",s);case 6:case"end":return e.stop()}},e)})),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.loggedInUser,e.next=3,Ce(t);case 3:a=e.sent,this.setState({token:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.approval;return r.a.createElement(Le,null,function(a){var n=a.members,s=a.proposals,o=a.metadata;if(o.loading)return r.a.createElement(_e.a,{className:"blurred box"},"Loading...");var l=!1;n.loading&&(l=!0);var i=!1;if(s.loading&&(i=!0),n.error)throw new Error("Error!: ".concat(n.error));if(s.error)throw new Error("Error!: ".concat(s.error));if(o.error)throw new Error("Error!: ".concat(o.error));var c=o.data,u=c.guildBankValue,m=c.exchangeRate,d=c.totalShares,p=c.shareValue;return r.a.createElement("div",{id:"homepage"},r.a.createElement(N.a,{columns:16,verticalAlign:"middle"},r.a.createElement(N.a.Column,{mobile:16,tablet:6,computer:4,className:"guild_value"},r.a.createElement(qe.a,{inverted:!0,label:"Guild Bank Value",value:Fe(u,m)})),r.a.createElement(N.a.Column,{mobile:16,tablet:10,computer:8,textAlign:"center",className:"browse_buttons"},r.a.createElement(Be,{members:n.data.members,loading:l}),r.a.createElement(Ke,{proposals:s.data.proposals,loading:i})),r.a.createElement(N.a.Column,{mobile:16,tablet:6,computer:4,className:"guild_value"},r.a.createElement(Me.a,{basic:!0,size:"small",trigger:r.a.createElement(k.a,{size:"large",color:"grey",className:"browse_buttons"},"Approve wETH")},r.a.createElement(Me.a.Header,null,"Approve wETH"),r.a.createElement(Me.a.Content,null,r.a.createElement(w.a,{onSubmit:e.handleSubmit},r.a.createElement(w.a.Field,null,r.a.createElement("label",null,"Amount to Approve"),r.a.createElement("input",{placeholder:"Amount in ETH",name:"amount",value:t,onChange:e.handleChange,className:"asset_amount"})),r.a.createElement(k.a,{type:"submit",color:"grey",className:"btn_link"},"Submit"))))),r.a.createElement(N.a.Column,{width:16},r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement(N.a,{columns:"3",className:"graph_values"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{textAlign:"center",floated:"left",mobile:16,tablet:4,computer:4},r.a.createElement(qe.a,{inverted:!0,label:"Total Shares",value:d})),r.a.createElement(N.a.Column,{textAlign:"center",mobile:16,tablet:4,computer:4},r.a.createElement(qe.a,{inverted:!0,label:"Total ETH",value:re.utils.formatEther(u)})),r.a.createElement(N.a.Column,{textAlign:"center",floated:"right",mobile:16,tablet:4,computer:4},r.a.createElement(qe.a,{inverted:!0,label:"Share Value",value:Fe(p,m)}))))))))})}}]),t}(r.a.Component),He=a(657),ze=a(334),Ye=a(652),Qe=a(99),We=a.n(Qe),Ge=a(651),Je=function(e){var t=e.yes,a=e.no,n=t+a,s=0===t?0:Math.round(t/n*100),o=0===a?0:Math.round(a/n*100);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Ge.a,{percent:s+o,color:"red",size:"small",style:{position:"absolute",top:"0",width:"100%"},className:0===a?"hide-bar":""}),r.a.createElement(Ge.a,{percent:s,color:"green",size:"small",className:0===t?"hide-bar":""})),r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Column,{floated:"left"},t," Yes Votes"),r.a.createElement(N.a.Column,{floated:"right",textAlign:"right"},a," No Votes")))},Ze=17280,Xe={Unknown:"Unknown",InQueue:"InQueue",VotingPeriod:"VotingPeriod",GracePeriod:"GracePeriod",Aborted:"Aborted",Passed:"Passed",Failed:"Failed",ReadyForProcessing:"ReadyForProcessing"};function et(e){var t=Ze*e,a=Math.floor(t%31536e3/86400),n=Math.floor(t%31536e3%86400/3600),r=Math.floor(t%31536e3%86400%3600/60),s="";return s=a?"".concat(a," days"):s,s=n?"".concat(s," ").concat(n," hours"):s,s=r?"".concat(s," ").concat(r," minutes"):s}function tt(e){switch(e.status){case Xe.InQueue:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Begins: "),r.a.createElement("span",null,e.votingStarts?et(e.votingStarts):"-"));case Xe.VotingPeriod:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Ends: "),r.a.createElement("span",null,e.votingEnds?et(e.votingEnds):"-"));case Xe.GracePeriod:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Grace Period Ends: "),r.a.createElement("span",null,e.gracePeriod?et(e.gracePeriod):"-"));case Xe.Passed:return r.a.createElement("span",{className:"subtext"},"Passed");case Xe.Failed:return r.a.createElement("span",{className:"subtext"},"Failed");case Xe.Aborted:return r.a.createElement("span",{className:"subtext"},"Aborted");case Xe.ReadyForProcessing:return r.a.createElement("span",{className:"subtext"},"Ready For Processing");default:return r.a.createElement(r.a.Fragment,null)}}var at=function(e,t){return t<e.startingPeriod},nt=function(e,t){return t>e.startingPeriod+35&&t<e.startingPeriod+35+35},rt=function(e,t){return t>=e.startingPeriod&&t<=e.startingPeriod+35},st=function(e,t){return t>e.startingPeriod+35+35};var ot=a(331),lt=a.n(ot),it={Null:0,Yes:1,No:2},ct=function(e){var t=e.member;return r.a.createElement(N.a.Column,{mobile:4,tablet:3,computer:3,textAlign:"center",className:"member_avatar",title:t},r.a.createElement(y.b,{to:"/members/".concat(t),className:"uncolored"},r.a.createElement(ze.a,{src:We.a,centered:!0}),r.a.createElement("p",{className:"name"},t?t.length>10?t.substring(0,10)+"...":t:"")))},ut=Object(Ue.a)({proposalDetail:function(e){var t=e.render,a=e.id;return r.a.createElement(A.b,{query:ae,variables:{id:a}},t)},metadata:function(e){var t=e.render;return r.a.createElement(A.b,{query:Q},t)},member:function(e){var t=e.render,a=e.delegateKey;return r.a.createElement(A.b,{query:G,variables:{delegateKey:a}},t)}}),mt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={proposal:{tokenTribute:0,sharesRequested:0,votingEnded:!0,graceEnded:!0,yesVotes:0,noVotes:0,status:Xe.InQueue,votes:[]},user:{id:0,shares:0,isActive:!1},moloch:null,shareValue:"0",exchangeRate:"0"},a.handleNo=function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.moloch,e.next=3,n.submitVote(t.proposalIndex,it.No);case 3:a.setState({userHasVoted:!0});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleYes=function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.moloch,e.next=3,n.submitVote(t.proposalIndex,it.Yes);case 3:a.setState({userHasVoted:!0});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleProcess=function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.moloch,e.next=3,n.processProposal(t.proposalIndex);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.loggedInUser,e.next=3,Ne(t);case 3:a=e.sent,this.setState({moloch:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.loggedInUser;return r.a.createElement(ut,{id:this.props.match.params.id,delegateKey:t},function(a){var n=a.proposalDetail,s=a.metadata,o=a.member;if(n.loading||s.loading||o.loading)return r.a.createElement(_e.a,{className:"blurred box"},"Loading...");if(n.error)throw new Error("Error!: ".concat(n.error));if(s.error)throw new Error("Error!: ".concat(s.error));if(o.error)throw new Error("Error!: ".concat(o.error));var l=n.data.proposal,i=s.data,c=i.shareValue,u=i.exchangeRate,m=l.votes.reduce(function(e,t){return t.uintVote===it.Yes?e+parseInt(t.member.shares):e},0),d=l.votes.reduce(function(e,t){return t.uintVote===it.No?e+parseInt(t.member.shares):e},0),p=o.data.members.length>0?o.data.members[0]:null,b=!!l.votes.find(function(e){return e.member.id===t}),g=l.aborted||b||l.status!==Xe.VotingPeriod||!(p&&p.shares)||!(p&&p.isActive);return r.a.createElement("div",{id:"proposal_detail"},r.a.createElement(N.a,{centered:!0,columns:16},r.a.createElement(_e.a,{className:"transparent box segment",textAlign:"center"},r.a.createElement(N.a,{centered:!0,columns:14},r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement("span",{className:"title"},l.title?l.title:"N/A"))),r.a.createElement(N.a,{centered:!0,columns:14},r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:4},r.a.createElement(lt.a,{properties:{target:"_blank"}},r.a.createElement("div",{className:"subtext description wordwrap"},l.description?l.description:"N/A")),r.a.createElement(N.a,{columns:"equal",className:"tokens"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{className:"tributes"},r.a.createElement(_e.a,{className:"pill",textAlign:"center"},r.a.createElement(x.a,{name:"ethereum"}),re.utils.formatEther(l.tokenTribute)," ETH")))),r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Column,null,r.a.createElement("p",{className:"subtext voting"},"Shares"),r.a.createElement("p",{className:"amount"},l.sharesRequested)),r.a.createElement(N.a.Column,{textAlign:"right"},r.a.createElement("p",{className:"subtext"},"Total USD Value"),r.a.createElement("p",{className:"amount"},Fe(re.utils.bigNumberify(l.sharesRequested).mul(c).toString(),u))))),r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:2},r.a.createElement(Ye.a,{vertical:!0})),r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:6},r.a.createElement(N.a,{columns:16},r.a.createElement(N.a.Column,{textAlign:"center",mobile:16,tablet:16,computer:16,className:"pill_column"},r.a.createElement("span",{className:"pill"},tt(l)))),r.a.createElement(N.a,{columns:16,className:"member_list"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:16,className:"pill_column"},l.votes.length>0?r.a.createElement(N.a,null,r.a.createElement(N.a.Row,{className:"members_row"},l.votes.map(function(e,t){return r.a.createElement(ct,{member:e.member.id,shares:e.member.shares,key:t})}))):null))),r.a.createElement(N.a,null,r.a.createElement(N.a.Column,{textAlign:l.aborted?"center":""},l.aborted?r.a.createElement("p",{className:"amount"},"Aborted"):r.a.createElement(Je,{yes:m,no:d}))),r.a.createElement(N.a,{columns:"equal",centered:!0},r.a.createElement(N.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(k.a,{className:"btn",color:"grey",disabled:g,onClick:function(){return e.handleNo(l)}},"Vote No")),r.a.createElement(N.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(k.a,{className:"btn",color:"grey",disabled:g,onClick:function(){return e.handleYes(l)}},"Vote Yes")),r.a.createElement(N.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(k.a,{className:"btn",color:"grey",onClick:function(){return e.handleProcess(l)},disabled:l.status!==Xe.ReadyForProcessing},"Process Proposal"))))))))})}}]),t}(n.Component),dt=function(e){var t=e.proposal,a=t.id,n=t.votes.reduce(function(e,t){return t.uintVote===it.Yes?e+parseInt(t.member.shares):e},0),s=t.votes.reduce(function(e,t){return t.uintVote===it.No?e+parseInt(t.member.shares):e},0);return r.a.createElement(N.a.Column,{mobile:16,tablet:8,computer:5},r.a.createElement(y.b,{to:{pathname:"/proposals/".concat(a)},className:"uncolored"},r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement("p",{className:"name"},t.title?t.title:"N/A"),r.a.createElement("p",{className:"subtext description"},t.description?t.description:"N/A"),r.a.createElement(N.a,{columns:"equal",className:"value_shares"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Shares Requested"),r.a.createElement("p",{className:"amount"},t.sharesRequested)),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Tribute ",r.a.createElement(x.a,{name:"ethereum"})),r.a.createElement("p",{className:"amount"},parseFloat(re.utils.formatEther(t.tokenTribute)).toFixed(2))))),r.a.createElement(N.a,{columns:"equal",className:"deadlines"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement(_e.a,{className:"voting pill",textAlign:"center"},tt(t))))),t.aborted?r.a.createElement(N.a,{columns:"equal",className:"deadlines"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"amount"},"Aborted")))):r.a.createElement(Je,{yes:n,no:s}))))},pt=Object(Ue.a)({activeProposalsResult:function(e){var t=e.render;return r.a.createElement(A.b,{query:ee},t)},completedProposalsResult:function(e){var t=e.render;return r.a.createElement(A.b,{query:te},t)},metadata:function(e){var t=e.render;return r.a.createElement(A.b,{query:Q},t)}}),bt=function(e){var t=e.isActive;return r.a.createElement(pt,null,function(e){var a=e.activeProposalsResult,n=e.completedProposalsResult,s=e.metadata;if(s.loading)return r.a.createElement(_e.a,{className:"blurred box"},"Loading...");if(a.loading&&(a.data={proposals:[]}),n.loading&&(n.data={proposals:[]}),a.error)throw new Error("Error!: ".concat(a.error));if(n.error)throw new Error("Error!: ".concat(n.error));if(s.error)throw new Error("Error!: ".concat(s.error));var o=a.data.proposals,l=n.data.proposals,i=s.data,c=i.shareValue,u=i.exchangeRate,m=i.totalShares,d=function(e,t){return t.proposalIndex-e.proposalIndex},p=o.filter(function(e){return e.status===Xe.GracePeriod}).sort(d),b=o.filter(function(e){return e.status===Xe.VotingPeriod}).sort(d),g=o.filter(function(e){return e.status===Xe.InQueue}).sort(d),f=o.filter(function(e){return e.status===Xe.ReadyForProcessing}).sort(d),h=[{menuItem:"Voting Period (".concat(a.loading?"...":b.length,")"),render:function(){return r.a.createElement(He.a.Pane,{attached:!1},r.a.createElement(N.a,{columns:3},b.map(function(e,t){return r.a.createElement(dt,{exchangeRate:u,shareValue:c,totalShares:+m,proposal:e,key:t})})))}},{menuItem:"Grace Period (".concat(a.loading?"...":p.length,")"),render:function(){return r.a.createElement(He.a.Pane,{attached:!1},r.a.createElement(N.a,{columns:3},p.map(function(e,t){return r.a.createElement(dt,{exchangeRate:u,shareValue:c,totalShares:+m,proposal:e,key:t})})))}},{menuItem:"Ready For Processing (".concat(a.loading?"...":f.length,")"),render:function(){return r.a.createElement(He.a.Pane,{attached:!1},r.a.createElement(N.a,{columns:3},f.map(function(e,t){return r.a.createElement(dt,{exchangeRate:u,shareValue:c,totalShares:+m,proposal:e,key:t})})))}},{menuItem:"Completed (".concat(n.loading?"...":l.length,")"),render:function(){return r.a.createElement(He.a.Pane,{attached:!1},r.a.createElement(N.a,{columns:3},l.map(function(e,t){return r.a.createElement(dt,{exchangeRate:u,shareValue:c,totalShares:+m,proposal:e,key:t})})))}},{menuItem:"In Queue (".concat(a.loading?"...":g.length,")"),render:function(){return r.a.createElement(He.a.Pane,{attached:!1},r.a.createElement(N.a,{columns:3},g.map(function(e,t){return r.a.createElement(dt,{exchangeRate:u,shareValue:c,totalShares:+m,proposal:e,key:t})})))}}];return r.a.createElement("div",{id:"proposal_list"},r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{columns:16,verticalAlign:"middle"},r.a.createElement(N.a.Column,{mobile:16,tablet:8,computer:4,textAlign:"right",floated:"right",className:"submit_button"},r.a.createElement(y.b,{to:t?"/proposalsubmission":"/proposals",className:"link"},r.a.createElement(k.a,{size:"large",color:"red",disabled:!t},"New Proposal")))),r.a.createElement(He.a,{menu:{secondary:!0,pointing:!0},panes:h})))})},gt=function(e){var t=e.loggedInUser;return r.a.createElement(A.b,{query:G,variables:{delegateKey:t}},function(e){var a=e.loading,n=e.error,s=e.data;if(a)return"Loading...";if(n)throw new Error("Error!: ".concat(n));var o=s.members.length>0?s.members[0]:null;return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/proposals",render:function(e){return r.a.createElement(bt,Object.assign({},e,{isActive:!!o&&o.isActive}))}}),r.a.createElement(h.b,{path:"/proposals/:id",render:function(e){return r.a.createElement(mt,Object.assign({},e,{loggedInUser:t}))}}))})},ft=a(119),yt=a(660),ht=a(161),Et=a.n(ht),vt=Object(Ue.a)({memberDetail:function(e){var t=e.render,a=e.name;return r.a.createElement(A.b,{query:J,variables:{address:a}},t)},metadata:function(e){var t=e.render;return r.a.createElement(A.b,{query:Q},t)}}),xt=function(e){var t=e.loggedInUser,a=e.member,n=e.shareValue,s=e.exchangeRate;return r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Column,null,r.a.createElement("p",{className:"subtext"},"Shares"),r.a.createElement("p",{className:"amount"},a.shares)),r.a.createElement(N.a.Column,{textAlign:"right"},r.a.createElement("p",{className:"subtext"},"Total Value"),r.a.createElement("p",{className:"amount"},Fe(re.utils.bigNumberify(a.shares).mul(n).toString(),s)))),r.a.createElement(N.a,null,r.a.createElement(N.a.Column,{textAlign:"center",className:"avatar"},r.a.createElement(ze.a,{centered:!0,src:t===a.id||t===a.delegateKey?Et.a:We.a,size:"tiny"}))),r.a.createElement("p",{className:"subtext"},"Tribute"),r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,null,r.a.createElement(_e.a,{className:"pill",textAlign:"center"},r.a.createElement(x.a,{name:"ethereum"}),re.utils.formatEther(a.tokenTribute)," ETH"))),r.a.createElement("p",{className:"subtext"},"Delegate Key"),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,null,r.a.createElement("p",{className:"subtext"},a.delegateKey)))))},wt=function(e){var t=e.proposals;return r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement(N.a,{columns:"equal",textAlign:"center"},r.a.createElement(N.a.Row,{className:"subtext",style:{fontSize:20}},"History")),r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Row,{className:"header"},r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Proposal Title")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Date")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Shares Requested")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Tribute Offered")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Vote")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Status"))),t&&t.length>0?t.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(N.a.Row,{verticalAlign:"middle"},r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement(y.b,{to:{pathname:"/proposals/".concat(e.proposal.id)},className:"uncolored"},e.uintVote===it.Yes&&r.a.createElement(ft.a,{className:"dot",circular:!0,color:"green",empty:!0}),(e.uintVote===it.No||e.uintVote===it.Null)&&r.a.createElement(ft.a,{className:"dot",circular:!0,color:"red",empty:!0}),e.proposal.title)),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},new Date(1e3*e.proposal.timestamp).toISOString().slice(0,10))),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},e.proposal.sharesRequested)),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},re.utils.formatEther(e.proposal.tokenTribute))),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement(yt.a,{as:"p",color:e.uintVote===it.Yes?"green":e.uintVote===it.No?"red":null},e.uintVote===it.Yes?"Y":e.uintVote===it.No?"N":"")),r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},tt(e.proposal)))),r.a.createElement(Ye.a,null))}):r.a.createElement(N.a.Row,{verticalAlign:"middle"},r.a.createElement(N.a.Column,{textAlign:"center"},"This member hasn't voted on any proposals yet."))))},kt=function(e){return r.a.createElement(vt,{name:e.match.params.name},function(t){var a=t.memberDetail,n=t.metadata;if(a.loading||n.loading)return r.a.createElement(_e.a,{className:"blurred box"},"Loading...");if(a.error)throw new Error("Error!: ".concat(a.error));if(n.error)throw new Error("Error!: ".concat(n.error));return r.a.createElement("div",{id:"member_detail"},r.a.createElement("p",{className:"title"}," ",e.match.params.name," "),r.a.createElement(Ye.a,null),r.a.createElement(N.a,{columns:16},r.a.createElement(N.a.Row,{className:"details"},r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:6,className:"user"},r.a.createElement(xt,{loggedInUser:e.loggedInUser,member:a.data.member,shareValue:n.data.shareValue,exchangeRate:n.data.exchangeRate})),r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:10,className:"proposals"},r.a.createElement(wt,{proposals:a.data.member.votes})))))})};function Nt(){var e=Object(g.a)(["\n  {\n    members(first: 100, where: { shares_gt: 0, shares_lt: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n"]);return Nt=function(){return e},e}function At(){var e=Object(g.a)(["\n  {\n    members(first: 100, where: { shares_gte: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n"]);return At=function(){return e},e}var Ct=function(e){var t=e.address,a=e.shares;return r.a.createElement(N.a.Column,{mobile:5,tablet:3,computer:3,textAlign:"center",className:"member_avatar",title:t},r.a.createElement(y.b,{to:"/members/".concat(t),className:"uncolored"},r.a.createElement(ze.a,{src:We.a,centered:!0,size:"tiny"}),r.a.createElement("p",{className:"name"},t?t.length>10?t.substring(0,10)+"...":t:""),r.a.createElement("p",{className:"subtext"},a," shares")))},Pt=function(e){return r.a.createElement(A.b,{query:W,variables:{address:e.loggedInUser}},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.member&&n.member.isActive?r.a.createElement(y.b,{to:"/members/".concat(n.member.id),className:"uncolored"},r.a.createElement(ze.a,{centered:!0,src:Et.a,size:"tiny"}),r.a.createElement("p",{className:"name"},n.member.id?n.member.id.length>10?n.member.id.substring(0,10)+"...":n.member.id:""),r.a.createElement("p",{className:"subtext"},n.member.shares?n.member.shares:0," shares")):r.a.createElement("div",null)})},St=P()(At()),It=function(){return r.a.createElement(A.b,{query:St},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.members.length>0?n.members.map(function(e,t){return r.a.createElement(Ct,{address:e.id,shares:e.shares,key:t})}):r.a.createElement(r.a.Fragment,null,"No elders to show.")})},Ot=P()(Nt()),Vt=function(){return r.a.createElement(A.b,{query:Ot},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.members.length>0?n.members.map(function(e,t){return r.a.createElement(Ct,{address:e.id,shares:e.shares,key:t})}):r.a.createElement(r.a.Fragment,null,"No contributors to show.")})},Dt=function(e){return r.a.createElement(A.b,{query:Z},function(t){var a,n=t.loading,s=t.error,o=t.data;return s?(a="NA",console.error("Could not load members: ".concat(s))):a=n?"-":o.members.length,r.a.createElement("div",{id:"member_list"},r.a.createElement(N.a,{columns:16,verticalAlign:"middle"},r.a.createElement(N.a.Column,{mobile:16,tablet:6,computer:6,textAlign:"left",className:"member_list_header"},r.a.createElement("p",{className:"subtext"},a," Members"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Column,{textAlign:"center"},r.a.createElement(Pt,e))),r.a.createElement(N.a,{className:"member_item"},r.a.createElement(N.a.Row,null,r.a.createElement("p",{style:{paddingLeft:"1rem"}},"Elders (100+ shares)")),r.a.createElement(Ye.a,null),r.a.createElement(N.a.Row,{className:"members_row",centered:!0},r.a.createElement(It,null))),r.a.createElement(N.a,{className:"member_item"},r.a.createElement(N.a.Row,null,r.a.createElement("p",{style:{paddingLeft:"1rem"}},"Contributors")),r.a.createElement(Ye.a,null),r.a.createElement(N.a.Row,{className:"members_row",centered:!0},r.a.createElement(Vt,null))))})},jt=function(e){return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/members",render:function(t){return r.a.createElement(Dt,Object.assign({},t,{loggedInUser:e.loggedInUser}))}}),r.a.createElement(h.b,{path:"/members/:name",render:function(t){return r.a.createElement(kt,Object.assign({},t,{loggedInUser:e.loggedInUser}))}}))},Rt=a(154),_t=a(656),qt=a(650),Mt="10",Tt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,beneficiaryApproved:!1,depositApproved:!1,open:!1},a.handleOpen=Object(c.a)(i.a.mark(function e(){var t,n,r,s,o,l,c,u,m,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.token,r=t.address,s=t.tribute,o=t.moloch,l=t.loggedInUser,t.valid||alert("Please fill any missing fields."),a.setState({open:!0}),e.next=5,n.allowance(r,o.address);case 5:return c=e.sent,u=!1,c.gte(re.utils.parseEther(s))&&(u=!0),e.next=10,n.allowance(l,o.address);case 10:m=e.sent,d=!1,m.gte(re.utils.parseEther(Mt))&&(d=!0),a.setState({beneficiaryApproved:u,depositApproved:d,loading:!1});case 14:case"end":return e.stop()}},e)})),a.handleClose=function(){a.setState({open:!1})},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.beneficiaryApproved,n=e.depositApproved,s=e.open,o=this.props,l=o.handleSubmit,i=o.submittedTx;return console.log("open: ",s),r.a.createElement(Me.a,{trigger:r.a.createElement(k.a,{size:"large",color:"red",onClick:this.handleOpen},"Submit Proposal"),basic:!0,size:"small",open:s},r.a.createElement(yt.a,{icon:"archive",content:"Submit Proposal"}),r.a.createElement(Me.a.Content,null,r.a.createElement(_t.a,null,r.a.createElement(_t.a.Item,null,t?r.a.createElement(_t.a.Icon,{name:"time"}):n?r.a.createElement(_t.a.Icon,{name:"check circle"}):r.a.createElement(_t.a.Icon,{name:"x"}),r.a.createElement(_t.a.Content,null,"10 wETH Deposit Approved")),r.a.createElement(_t.a.Item,null,t?r.a.createElement(_t.a.Icon,{name:"time"}):a?r.a.createElement(_t.a.Icon,{name:"check circle"}):r.a.createElement(_t.a.Icon,{name:"x"}),r.a.createElement(_t.a.Content,null,"Tribute Approved")),r.a.createElement(_t.a.Item,null,i?r.a.createElement(_t.a.Icon,{name:"code"}):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a.Content,null,i?r.a.createElement("a",{href:"https://etherscan.io/tx/".concat(i.hash)},"View Transaction on Etherscan"):r.a.createElement(r.a.Fragment,null))))),r.a.createElement(Me.a.Actions,null,r.a.createElement(k.a,{basic:!0,color:"green",inverted:!0,onSubmit:l,disabled:i||!n||!a},r.a.createElement(x.a,{name:"remove"})," Submit"),r.a.createElement(k.a,{basic:!0,color:"red",inverted:!0,onClick:this.handleClose},r.a.createElement(x.a,{name:"remove"})," Close")))}}]),t}(n.Component),Ft=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={address:"",title:"",description:"",shares:"",tribute:"",fieldValidationErrors:{title:"",description:"",assets:"",shares:""},titleValid:!1,descriptionValid:!1,tributeValid:!1,sharesValid:!1,addressValid:!1,formValid:!1},a.validateField=function(e,t){var n=a.state,r=n.fieldValidationErrors,s=n.titleValid,o=n.descriptionValid,l=n.tributeValid,i=n.sharesValid,c=n.addressValid;switch(e){case"title":s=""!==t,r.title=s?"":"Title is invalid";break;case"address":c=re.utils.isHexString(t),console.log("utils.isHexString(value): ",re.utils.isHexString(t)),console.log("value: ",t),r.address=c?"":"Address is invalid";break;case"description":o=""!==t,r.description=o?"":"Description is invalid";break;case"shares":i=t>0,r.shares=i?"":"Shares is invalid";break;case"tribute":l=t>=0,r.tribute=l?"":"Tribute is invalid"}a.setState({fieldValidationErrors:r,titleValid:s,descriptionValid:o,tributeValid:l,sharesValid:i,addressValid:c},a.validateForm)},a.validateForm=function(){var e=a.state,t=e.titleValid,n=e.descriptionValid,r=e.sharesValid,s=e.tributeValid,o=e.addressValid;a.setState({formValid:t&&n&&r&&s&&o})},a.handleInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(Rt.a)({},e.target.name,e.target.value),function(){a.validateField(t,n)})},a.handleSubmit=Object(c.a)(i.a.mark(function e(){var t,n,r,s,o,l,c,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.moloch,r=t.address,s=t.title,o=t.description,l=t.shares,c=t.tribute,e.prev=1,console.log("Submitting proposal: ",r,re.utils.parseEther(c).toString(),l,JSON.stringify({title:s,description:o})),e.next=5,n.submitProposal(r,re.utils.parseEther(c),l,JSON.stringify({title:s,description:o}));case 5:u=e.sent,console.log("submittedTx: ",u),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert("Error processing proposal");case 13:a.setState({submittedTx:u});case 14:case"end":return e.stop()}},e,null,[[1,9]])})),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.loggedInUser,e.next=3,Ne(t);case 3:return a=e.sent,e.next=6,Ce(t);case 6:n=e.sent,this.setState({moloch:a,token:n});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.shares,a=e.tribute,n=e.title,s=e.description,o=e.address,l=e.token,i=e.formValid,c=e.moloch,u=e.titleValid,m=e.descriptionValid,d=e.sharesValid,p=e.tributeValid,b=e.addressValid,g=e.submittedTx,f=this.props.loggedInUser;return r.a.createElement("div",{id:"proposal_submission"},r.a.createElement(w.a,null,r.a.createElement(N.a,{centered:!0,columns:16},r.a.createElement(N.a.Row,{stretched:!0},r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(qt.a,{name:"title",transparent:!0,size:"big",inverted:!0,placeholder:"Proposal Title",onChange:this.handleInput,value:n,error:!u}),r.a.createElement(Ye.a,null))),r.a.createElement(N.a.Row,{stretched:!0},r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement(w.a.Input,{name:"address",label:"Beneficiary or Applicant",placeholder:"Address",fluid:!0,onChange:this.handleInput,value:o,error:!b}),r.a.createElement(w.a.Input,{name:"shares",label:"Shares Requested",placeholder:"Shares",fluid:!0,type:"number",onChange:this.handleInput,value:t,error:!d}),r.a.createElement(w.a.Input,{name:"tribute",label:"Tribute Offered (in ETH)",placeholder:"ETH",fluid:!0,type:"number",onChange:this.handleInput,value:a,error:!p})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(N.a,{columns:"equal"},r.a.createElement(N.a.Column,null,r.a.createElement(_e.a,{className:"blurred box"},r.a.createElement(w.a.TextArea,{name:"description",label:"Description",placeholder:"Type here",rows:15,onChange:this.handleInput,value:s,error:!m})))))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Column,{mobile:16,tablet:8,computer:8,className:"submit_button"},r.a.createElement(Tt,{valid:i,tribute:a,address:o,token:l,moloch:c,loggedInUser:f,handleSubmit:this.handleSubmit,submittedTx:g}))))))}}]),t}(n.Component);function Ut(){var e=Object(g.a)(["\n        fragment getMeta on Proposal {\n          status\n          title\n          description\n          gracePeriod\n          votingEnds\n          votingStarts\n          readyForProcessing\n        }\n      "]);return Ut=function(){return e},e}var Lt={Proposal:{status:function(e,t,a){return function(e,t){return e.startingPeriod=+e.startingPeriod,e.processed&&e.aborted?Xe.Aborted:e.processed&&e.didPass?Xe.Passed:e.processed&&!e.didPass?Xe.Failed:nt(e,t)?Xe.GracePeriod:rt(e,t)?Xe.VotingPeriod:at(e,t)?Xe.InQueue:st(e,t)?Xe.ReadyForProcessing:Xe.Unknown}(e,+a.cache.readQuery({query:Q}).currentPeriod)},title:function(e){try{return JSON.parse(e.details).title||e.details||""}catch(t){return console.log("Could not parse title from proposal.proposalIndex: ".concat(e.proposalIndex," proposal.details: ").concat(e.details)),e.details||""}},description:function(e){try{return JSON.parse(e.details).description||""}catch(t){return console.log("Could not parse description from proposal.proposalIndex: ".concat(e.proposalIndex," proposal.details: ").concat(e.details)),""}},gracePeriod:function(e,t,a){var n=a.cache.readQuery({query:Q}).currentPeriod;return nt(e,n)?+e.startingPeriod+35+35-n:0},votingEnds:function(e,t,a){var n=a.cache.readQuery({query:Q}).currentPeriod;return rt(e,n)?e.startingPeriod+35-n:0},votingStarts:function(e,t,a){var n=a.cache.readQuery({query:Q}).currentPeriod;return at(e,n)?e.startingPeriod-n:0},readyForProcessing:function(e,t,a){var n=a.cache.readQuery({query:Q}).currentPeriod;return!(!st(e,n)||e.processed)}},Mutation:{setAttributes:function(e,t,a){var n=a.cache,r="Proposal:".concat(t.id),s=P()(Ut()),o=n.readFragment({fragment:s,id:r}),l=Object(f.a)({},o,{status:t.status,title:t.title,description:t.description,gracePeriod:t.gracePeriod,votingEnds:t.votingEnds,votingStarts:t.votingStarts,readyForProcessing:t.readyForProcessing});return n.writeData({id:r,data:l}),l}}};function Bt(){var e=Object(g.a)(["\n  extend type Proposal {\n    status: String\n    title: String\n    description: String\n    gracePeriod: Number\n    votingEnds: Number\n    votingStarts: Number\n    readyForProcessing: Bool\n  }\n\n  extend type Query {\n    proposalsWithStatus: [Proposal]\n  }\n"]);return Bt=function(){return e},e}var Kt=P()(Bt()),$t=a(105),Ht=a(336),zt=a(335);function Yt(){var e=Object(g.a)(["\n  query IsUserLoggedIn {\n    loggedInUser @client\n  }\n"]);return Yt=function(){return e},e}console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MOLOCH_ADDRESS:"0x1fd169A4f5c59ACf79d0Fd5d91D1201EF1Bce9f1",REACT_APP_MEDIANIZER_ADDRESS:"0x729D19f657BD0614b4985Cf1D82531c67569197B",REACT_APP_TOKEN_ADDRESS:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",REACT_APP_GRAPH_NODE_URI:"https://api.thegraph.com/subgraphs/name/molochventures/moloch",REACT_APP_ETH_URL:"https://mainnet.infura.io/M2xeaVefzxkLhvrTLq43",REACT_APP_GUILD_BANK_ADDRESS:"0x211a94468Ba1e379236B45cA42Dc63eE93139c7E"}));var Qt=new Ht.a,Wt=new $t.a({cache:Qt,link:new zt.a({uri:"https://api.thegraph.com/subgraphs/name/molochventures/moloch"}),resolvers:Lt,typeDefs:Kt}),Gt={loggedInUser:"",guildBankValue:"",shareValue:"",totalShares:"",currentPeriod:"",exchangeRate:""};Qt.writeData({data:Object(f.a)({},Gt,{loggedInUser:window.localStorage.getItem("loggedInUser")||""})}),Wt.onResetStore(function(){return Qt.writeData({data:Gt})});var Jt=P()(Yt()),Zt=Object(Ue.a)({loggedInUserData:function(e){var t=e.render;return r.a.createElement(A.b,{query:Jt},t)},metadata:function(e){var t=e.render;return r.a.createElement(A.b,{query:Q},t)}}),Xt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={restored:!1,exchangeRate:"0",totalShares:"0",guildBankValue:"0"},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateData(!0);case 2:this.setState({restored:!0});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"populateData",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n,r,s,o,l,c,u,m,d,p,b,g,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt.query({query:Jt});case 2:if(a=e.sent,!(n=a.data.loggedInUser)){e.next=7;break}return e.next=7,ie(Wt);case 7:return e.next=9,Wt.query({query:Q});case 9:if(r=e.sent,s=r.data,o=s.exchangeRate,l=s.totalShares,c=s.currentPeriod,u=s.guildBankValue,m=s.shareValue,o&&!t){e.next=24;break}return e.next=19,Se(n);case 19:return d=e.sent,e.next=22,d.compute();case 22:o=e.sent[0],o=re.utils.bigNumberify(o);case 24:if(l&&c&&!t){e.next=34;break}return e.next=27,Ne();case 27:return p=e.sent,e.next=30,p.totalShares();case 30:return l=e.sent,e.next=33,p.getCurrentPeriod();case 33:c=e.sent;case 34:return e.next=36,Ce();case 36:if(b=e.sent,u&&!t){e.next=41;break}return e.next=40,b.balanceOf("0x211a94468Ba1e379236B45cA42Dc63eE93139c7E");case 40:u=e.sent;case 41:u&&l&&(g=u.gt(0)?l.toNumber()/parseFloat(re.utils.formatEther(u)):0,m=re.utils.parseEther(g.toString())),f={guildBankValue:u.toString(),shareValue:m.toString(),totalShares:l.toString(),currentPeriod:c.toString(),exchangeRate:o.toString()},Wt.writeData({data:f});case 44:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.restored?r.a.createElement(A.a,{client:Wt},r.a.createElement(y.a,{basename:""},r.a.createElement(Zt,null,function(t){var a=t.loggedInUserData;t.metadata;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement(je,{loggedInUser:a.data.loggedInUser,client:Wt,populateData:e.populateData}),r.a.createElement(Re,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(e){return r.a.createElement($e,Object.assign({},e,{loggedInUser:a.data.loggedInUser}))}}),r.a.createElement(h.b,{path:"/proposals",render:function(e){return r.a.createElement(gt,Object.assign({},e,{loggedInUser:a.data.loggedInUser}))}}),r.a.createElement(h.b,{path:"/members",render:function(e){return r.a.createElement(jt,Object.assign({},e,{loggedInUser:a.data.loggedInUser}))}}),r.a.createElement(h.b,{path:"/proposalsubmission",render:function(e){return a.data.loggedInUser?r.a.createElement(Ft,Object.assign({},e,{loggedInUser:a.data.loggedInUser})):r.a.createElement(h.a,{to:{pathname:"/"}})}}),r.a.createElement(h.b,{component:function(e){return r.a.createElement($e,Object.assign({},e,{loggedInUser:a.data.loggedInUser}))}}))))}))):r.a.createElement("div",null,"Loading!!!")}}]),t}(r.a.Component);a(639),a(640);o.a.render(r.a.createElement(Xt,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a.p+"static/media/hood.ba69d28c.png"}},[[349,1,2]]]);
//# sourceMappingURL=main.6185b4a3.chunk.js.map