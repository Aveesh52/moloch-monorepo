{"version":3,"sources":["assets/bull.png","assets/ethereumIcon.png","components/Background.js","helpers/graphQlQueries.js","web3.js","components/Header.js","components/Wrapper.js","helpers/currency.js","components/Home.js","components/ProgressBar.js","helpers/proposals.js","components/ProposalDetail.js","components/ProposalList.js","components/MemberDetail.js","components/MemberList.js","components/Login.js","components/ProposalSubmission.js","components/GuildBank.js","components/NotFound.js","resolvers.js","schema.js","App.js","index.js","assets/hood.png"],"names":["module","exports","__webpack_require__","p","Background","react_default","a","createElement","id","className","gql","_templateObject","moloch","token","medianizer","eth","GET_TOTAL_SHARES","_templateObject2","GET_SHARE_VALUE","_templateObject3","_templateObject4","GET_CURRENT_PERIOD","_templateObject5","GET_METADATA","_templateObject6","GET_LOGGED_IN_USER","_templateObject7","GET_MEMBERS","_templateObject8","SET_PROPOSAL_ATTRIBUTES","_templateObject9","MainMenuWrapped","withApollo","props","member","isActive","Fragment","Dropdown","Item","onClick","_handleCloseDropdown","Link","to","concat","Icon","name","Divider","icon","content","_handleOpenDropdown","onLoadChangeDelegateKey","onLoadWithdrawLootToken","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","client","resetStore","stop","this","ChangeDelegateKeyMenu","Header_this","onLoadMain","Form","Input","placeholder","Button","WithdrawLootTokenMenu","Header","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","visibleMenu","visibleRightMenu","setState","topRightMenuContent","_this3","Header_ChangeDelegateKeyMenu","Header_WithdrawLootTokenMenu","_this4","react_apollo_browser_umd","query","variables","address","loggedInUser","_ref2","loading","error","data","Error","Grid","columns","verticalAlign","Column","textAlign","open","onBlur","onFocus","text","substring","Menu","direction","getTopRightMenuContent","Component","Wrapper","_ref","children","molochAbi","require","erc20Abi","medianizerAbi","initMetmask","_initMetmask","apply","arguments","web3Provider","window","ethereum","web3","alert","enable","currentProvider","ethers","providers","Web3Provider","localStorage","setItem","t0","abrupt","initGnosisSafe","provider","SafeProvider","rpcUrl","process","initMoloch","_initMoloch","_callee2","_context2","getItem","sent","Contract","initToken","_initToken","_callee3","_context3","initMedianizer","_initMedianizer","_callee4","_context4","getDefaultProvider","getMoloch","_getMoloch","_callee6","_context6","getToken","_getToken","_callee7","_context7","getMedianizer","_getMedianizer","_callee8","_context8","currencyFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","convertWeiToDollars","weiAmount","exchangeRate","console","log","weitoEth","utils","formatEther","exchWeiToEth","format","parseFloat","Home_templateObject","NumMembers","members","length","size","color","GET_PROPOSALS","Home_templateObject2","NumProposals","proposals","HomePage","approval","userAddress","handleChange","e","_this","target","value","handleSubmit","_this$state","methods","approve","send","from","_ref3","guildBankValue","totalShares","shareValue","mobile","tablet","computer","Home_NumMembers","Home_NumProposals","Modal","basic","trigger","Content","onSubmit","Field","onChange","type","width","Segment","React","ProgressBar","yes","no","total","percentYes","Math","round","percentNo","position","Progress","percent","top","floated","VOTING_PERIOD_LENGTH","GRACE_PERIOD_LENGTH","ProposalStatus","Unknown","InQueue","VotingPeriod","GracePeriod","Aborted","Passed","Failed","ReadyForProcessing","getProposalDetailsFromOnChain","_x","_x2","_getProposalDetailsFromOnChain","proposal","currentPeriod","inQueue","inGracePeriod","inVotingPeriod","enoughPassingVotes","passedVotingAndGrace","passedVoting","lastProposalProcessed","proposalFromChain","details","parseInt","startingPeriod","yesVotes","noVotes","lastProposalFromChain","proposalIndex","proposalQueue","processed","_x3","votingEnds","gracePeriod","aborted","status","didPass","votingStarts","votingEnded","graceEnded","readyForProcessing","title","description","JSON","parse","stringify","formatter","Vote","Null","Yes","No","MemberAvatar","shares","Image","src","hood","centered","GET_PROPOSAL_DETAIL","ProposalDetail_templateObject","ProposalDetail","handleNo","user","submitVote","userHasVoted","handleYes","_this$state2","handleProcess","_this$state3","processProposal","tokenTribute","sharesRequested","fetchData","match","params","proposalResult","userResult","onChain","mutate","mutation","result","objectSpread","setAttributes","responseJson","items","proposal_detail","isAccepted","voters","find","voter","loggedUser","calculateVote","Row","vertical","votes","map","vote","idx","ProposalDetail_MemberAvatar","key","components_ProgressBar","disabled","ProposalCard","_ref$shareValue","pathname","bigNumberify","mul","toString","getProposalCountdownText","GET_PROPOSAL_LIST","ProposalList_templateObject","ProposalList","determineProposalStatuses","fullProps","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","fullProp","undefined","Symbol","iterator","done","push","return","finish","proposalData","currentPeriodData","totalSharesData","shareValueData","filter","votingPeriod","completed","index","ProposalList_ProposalCard","ProposalListHOC","ProposalListView","_ref7","Switch","Route","exact","path","render","component","GET_MEMBER_DETAIL","MemberDetail_templateObject","MemberDetail","bull","GET_PROPOSAL_HISTORY","MemberDetail_templateObject2","_ref4","fontSize","uintVote","Label","circular","empty","Date","timestamp","toISOString","slice","elements_Header_Header","as","MemberDetailView","MemberDetail_MemberDetail","MemberDetail_ProposalDetail","coinbase","LoggedInUser","GET_ELDERS","MemberList_templateObject","Elders","elder","MemberList_MemberAvatar","GET_NON_ELDERS","MemberList_templateObject2","Contributors","contributor","MemberList","_ref5","MemberList_LoggedInUser","paddingLeft","MemberList_Elders","MemberList_Contributors","MemberListView","higherProps","MemberList_MemberList","assign","components_MemberDetail","AssetsFields","handleAsset","bind","assertThisInitialized","deleteAsset","event","onHandleAsset","assetIndex","onHandleDeleteAsset","paddingTop","paddingRight","assets","symbol","ProposalSubmission","tribute","asset","amount","logo","formErrors","titleValid","descriptionValid","assetsValid","sharesValid","formValid","addAsset","handleInput","handleDeleteAsset","fieldName","fieldValidationErrors","keys","i","validateForm","defineProperty","validateField","_this5","splice","submitProposal","_this6","stretched","transparent","inverted","label","fluid","TextArea","rows","row","ProposalSubmission_AssetsFields","GridColumn","currencies","ethereumIcon","CurrencyElement","GuildBank","redeemToken","GuildBank_CurrencyElement","Login","loginWithMetamask","doLoginBypassAuth","loginWithGnosisSafe","listAccounts","writeData","toLowerCase","loginComplete","history","NotFound","resolvers","Proposal","Mutation","_","cache","getCacheKey","__typename","fragment","resolvers_templateObject","readFragment","typeDefs","schema_templateObject","InMemoryCache","stateLink","withClientState","defaults","httpLink","CachePersistor","storage","maxSize","debug","HttpLink","uri","ApolloClient","link","ApolloLink","onError","graphQLErrors","networkError","message","locations","IS_LOGGED_IN","App_templateObject","App","restored","populateData","refetch","loggedInUserData","compute","getCurrentPeriod","balanceOf","ethPerShare","gt","toNumber","parseEther","dataToWrite","BrowserRouter","Header_Header","Home","Redirect","components_ProposalList","components_MemberList","ProposalSubmission_ProposalSubmission","GuildBank_GuildBank","Login_Login","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.722847bc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bull.204229a6.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react';\n\n\nexport default () => (\n  <div id=\"background\">\n    <div className=\"blurred_image\" />\n    <div className=\"dark_overlay\" />\n  </div>\n)\n","import gql from \"graphql-tag\";\n\nexport const GET_EXCHANGE_RATE = gql`\n  query ExchangeRate {\n    exchangeRate @client\n  }\n`\n\nexport const GET_TOTAL_SHARES = gql`\n  query TotalShares {\n    totalShares @client\n  }\n`\n\nexport const GET_GUILD_BANK_VALUE = gql`\n  query GuildBankValue {\n    guildBankValue @client\n  }\n`\n\nexport const GET_SHARE_VALUE = gql`\n  query ShareValue {\n    shareValue @client\n  }\n`\n\nexport const GET_CURRENT_PERIOD = gql`\n  query CurrentPeriod {\n    currentPeriod @client\n  }\n`\n\nexport const GET_METADATA = gql`\n  query GetMetadata {\n    exchangeRate @client\n    totalShares @client\n    guildBankValue @client\n    shareValue @client\n    currentPeriod @client\n  }\n`\n\nexport const GET_LOGGED_IN_USER = gql`\n  query User($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n    }\n  }\n`;\n\nexport const GET_MEMBERS = gql`\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n`;\n\nexport const SET_PROPOSAL_ATTRIBUTES = gql`\n  mutation SetAttributes($status: String!, $title: String!, $description: String!) {\n    setAttributes(status: $status, title: $title, description: $description) @client {\n      status\n      title\n      description\n    }\n  }\n`;","import SafeProvider from \"safe-web3-provider\"\nimport { ethers } from 'ethers';\n\nconst molochAbi = require('./abi/Moloch.abi.json')\nconst erc20Abi = require('./abi/ERC20.abi.json')\nconst medianizerAbi = require('./abi/Medianizer.abi.json')\n\nlet moloch\nlet token\nlet medianizer\nlet eth\n\nexport async function initMetmask() {\n  if (!window.ethereum && !window.web3) {\n    // Non-DApp browsers won't work.\n    alert(\"This page must be viewed on a Web3 enabled browser.\");\n  }\n  if (window.ethereum) {\n    // Modern DApp browsers need to enable Metamask access.\n    try {\n      await window.ethereum.enable()\n      let web3Provider = window['ethereum'] || window.web3.currentProvider\n      eth = new ethers.providers.Web3Provider(web3Provider);\n      localStorage.setItem(\"loginType\", \"metamask\");\n    } catch (error) {\n      alert(\"Metamask needs to be enabled.\")\n    }\n  }\n  return eth\n}\n\nexport function initGnosisSafe() {\n  /**\n   *  Create Safe Provider\n   */\n  const provider = new SafeProvider({\n    // TODO: CHANGE THIS TO INFURA/ALCHEMY\n    rpcUrl: process.env.REACT_APP_ETH_URL\n  });\n\n  /**\n   *  Create Web3\n   */\n  eth = new ethers.providers.Web3Provider(provider);\n  localStorage.setItem(\"loginType\", \"gnosis\");\n  return eth\n}\n\nexport async function initMoloch() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  moloch = new ethers.Contract(process.env.REACT_APP_MOLOCH_ADDRESS, molochAbi, eth)\n  // moloch = new web3.eth.Contract(molochAbi, process.env.REACT_APP_MOLOCH_ADDRESS)\n  return moloch\n}\n\nexport async function initToken() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  // token = new web3.eth.Contract(erc20Abi, process.env.REACT_APP_TOKEN_ADDRESS)\n  token = new ethers.Contract(process.env.REACT_APP_TOKEN_ADDRESS, erc20Abi, eth)\n  return token\n}\n\nexport async function initMedianizer() {\n  // pull from mainnet\n  let provider = ethers.getDefaultProvider();\n  medianizer = new ethers.Contract(process.env.REACT_APP_MEDIANIZER_ADDRESS, medianizerAbi, provider)\n  return medianizer\n}\n\nexport async function getWeb3() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  return eth\n}\n\nexport async function getMoloch() {\n  if (!moloch) {\n    await initMoloch()\n  }\n  return moloch\n}\n\nexport async function getToken() {\n  if (!token) {\n    await initToken()\n  }\n  return token\n}\n\nexport async function getMedianizer() {\n  if (!medianizer) {\n    await initMedianizer()\n  }\n  return medianizer\n}","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Grid, Icon, Dropdown, Form, Button } from \"semantic-ui-react\";\nimport { Query, withApollo } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst MainMenu = props => (\n  <div className=\"dropdownItems\">\n    {props.member && props.member.isActive ? (\n      <>\n        <Dropdown.Item className=\"item\" onClick={() => props._handleCloseDropdown()}>\n          <Link to={`/members/${props.member.id}`} className=\"link\">\n            <p>\n              <Icon name=\"user\" />\n              View Profile\n            </p>\n          </Link>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"key\"\n          className=\"item\"\n          content=\"Change Delegate Key\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadChangeDelegateKey();\n          }}\n        />\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"dollar\"\n          className=\"item\"\n          content=\"Rage Quit\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadWithdrawLootToken();\n          }}\n        />\n        <Dropdown.Divider />\n      </>\n    ) : null}\n    <Dropdown.Item className=\"item\">\n      <Link\n        to=\"/login\"\n        className=\"link\"\n        onClick={async () => {\n          props._handleCloseDropdown();\n          await props.client.resetStore();\n        }}\n      >\n        <p>\n          <Icon name=\"power off\" />\n          Sign Out\n        </p>\n      </Link>\n    </Dropdown.Item>\n  </div>\n);\nconst MainMenuWrapped = withApollo(MainMenu);\n\nconst ChangeDelegateKeyMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"key\" />\n        Change Delegate Key\n      </p>\n      <Form.Input placeholder=\"Enter new key address\" />\n      <Button>Save</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nconst WithdrawLootTokenMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"dollar\" />\n        Rage Quit\n      </p>\n      <Form.Input placeholder=\"Enter withdrawal address\" />\n      <Form.Input placeholder=\"0\" />\n      <Button>Withdraw</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visibleMenu: \"main\",\n      visibleRightMenu: false\n    };\n  }\n\n  _handleOpenDropdown() {\n    this.setState({ visibleRightMenu: true });\n  }\n\n  _handleCloseDropdown() {\n    this.setState({ visibleRightMenu: false });\n  }\n\n  getTopRightMenuContent(member) {\n    let topRightMenuContent;\n    switch (this.state.visibleMenu) {\n      case \"main\":\n        topRightMenuContent = (\n          <MainMenuWrapped\n            member={member}\n            _handleOpenDropdown={() => this._handleOpenDropdown()}\n            _handleCloseDropdown={() => this._handleCloseDropdown()}\n            onLoadChangeDelegateKey={() => this.setState({ visibleMenu: \"changeDelegateKey\" })}\n            onLoadWithdrawLootToken={() => this.setState({ visibleMenu: \"withdrawLootToken\" })}\n          />\n        );\n        break;\n      case \"changeDelegateKey\":\n        topRightMenuContent = (\n          <ChangeDelegateKeyMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      case \"withdrawLootToken\":\n        topRightMenuContent = (\n          <WithdrawLootTokenMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      default:\n        break;\n    }\n    return topRightMenuContent;\n  }\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"header\">\n              <Grid columns=\"equal\" verticalAlign=\"middle\">\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"left\" className=\"menu\">\n                    {/* <Dropdown icon=\"bars\">\n                <Dropdown.Menu className=\"menu blurred\" direction=\"right\">\n                  <Link to=\"guildbank\" className=\"item\">\n                    <p>Guild Bank</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/members\" className=\"item\">\n                    <p>Members</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/proposals\" className=\"item\">\n                    <p>Proposals</p>\n                  </Link>\n                </Dropdown.Menu>\n              </Dropdown> */}\n                  </Grid.Column>\n                ) : null}\n                <Grid.Column textAlign=\"center\" className=\"logo\">\n                  <Link to=\"/\">MOLOCH</Link>\n                </Grid.Column>\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"right\" className=\"dropdown\">\n                    <Dropdown\n                      className=\"right_dropdown\"\n                      open={this.state.visibleRightMenu}\n                      onBlur={() => this._handleCloseDropdown()}\n                      onFocus={() => this._handleOpenDropdown()}\n                      text={`${this.props.loggedInUser.substring(0,6)}...`}\n                    >\n                      <Dropdown.Menu className=\"menu blurred\" direction=\"left\">\n                        {this.getTopRightMenuContent(data.member)}\n                      </Dropdown.Menu>\n                    </Dropdown>\n                  </Grid.Column>\n                ) : null}\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import React from 'react';\n\n\nexport default ({ children }) => (\n  <div id=\"wrapper\">\n    { children }\n  </div>\n)","import { utils } from \"ethers\";\n\nexport const currencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\n/**\n * Converts Wei amount to Dollars\n * @param {*} weiAmount \n * @param {*} exchangeRate in Wei units\n */\nexport function convertWeiToDollars(weiAmount, exchangeRate) {\n  console.log('exchangeRate: ', exchangeRate);\n  console.log('weiAmount: ', weiAmount);\n  const weitoEth = utils.formatEther(weiAmount)\n  const exchWeiToEth = utils.formatEther(exchangeRate)\n  \n  return currencyFormatter.format(parseFloat(weitoEth * exchWeiToEth))\n}","import React from \"react\";\nimport { Grid, Button, Segment, Modal, Form } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport gql from \"graphql-tag\";\nimport { Query, withApollo } from \"react-apollo\";\nimport { getToken } from \"../web3\";\nimport { utils } from \"ethers\";\nimport { GET_METADATA } from \"../helpers/graphQlQueries\";\nimport { convertWeiToDollars } from \"../helpers/currency\";\n\nconst GET_MEMBERS = gql`\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n`;\nconst NumMembers = () => (\n  <Query query={GET_MEMBERS}>\n    {({ loading, error, data }) => {\n      let members;\n      if (error) {\n        members = \"NA\";\n        console.error(`Could not load members: ${error}`);\n      } else if (loading) {\n        members = \"-\";\n      } else {\n        members = data.members.length;\n      }\n      return (\n        <Link to=\"/members\" className=\"link\">\n          <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n            {members} Members\n          </Button>\n        </Link>\n      );\n    }}\n  </Query>\n);\n\n// TODO filter this to get current proposals?\nconst GET_PROPOSALS = gql`\n  {\n    proposals {\n      id\n    }\n  }\n`;\nconst NumProposals = () => (\n  <Query query={GET_PROPOSALS}>\n    {({ loading, error, data }) => {\n      let proposals;\n      if (error) {\n        proposals = \"NA\";\n        console.error(`Could not load proposals: ${error}`);\n      } else if (loading) {\n        proposals = \"-\";\n      } else {\n        proposals = data.proposals.length;\n      }\n      return (\n        <Link to=\"/proposals\" className=\"link\">\n          <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n            {proposals} Proposals\n          </Button>\n        </Link>\n      );\n    }}\n  </Query>\n);\n\nclass HomePage extends React.Component {\n  state = {\n    approval: \"\",\n    token: null,\n    userAddress: null\n  };\n\n  async componentDidMount() {\n    const token = await getToken();\n\n    this.setState({\n      token\n    });\n  }\n\n  handleChange = e => this.setState({ approval: e.target.value });\n\n  handleSubmit = () => {\n    const { loggedInUser } = this.props;\n    const { approval, token } = this.state;\n    token.methods.approve(process.env.REACT_APP_MOLOCH_ADDRESS, approval).send({ from: loggedInUser });\n  };\n\n  render() {\n    const { approval } = this.state;\n    return (\n      <Query query={GET_METADATA}>\n        {({ loading, error, data }) => {\n          if (error) {\n            console.error(`Could not load page: ${error}`);\n          } else if (loading) {\n            return \"Loading...\";\n          } else {\n            const { guildBankValue, exchangeRate, totalShares, shareValue } = data\n            return (\n              <div id=\"homepage\">\n                <Grid columns={16} verticalAlign=\"middle\">\n                  <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                    <Link to=\"/guildbank\" className=\"text_link\">\n                      <p className=\"subtext\">Guild Bank Value</p>\n                      <p className=\"amount\">{convertWeiToDollars(guildBankValue, exchangeRate)}</p>\n                    </Link>\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={10} computer={8} textAlign=\"center\" className=\"browse_buttons\">\n                    <NumMembers />\n                    <NumProposals />\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                    <Modal\n                      basic\n                      size=\"small\"\n                      trigger={\n                        <Button size=\"large\" color=\"grey\" className=\"browse_buttons\">\n                          Approve wETH\n                        </Button>\n                      }\n                    >\n                      <Modal.Header>Approve wETH</Modal.Header>\n                      <Modal.Content>\n                        <Form onSubmit={this.handleSubmit}>\n                          <Form.Field>\n                            <label>Amount to Approve</label>\n                            <input placeholder=\"Amount in Wei\" name=\"amount\" value={approval} onChange={this.handleChange} className=\"asset_amount\" />\n                          </Form.Field>\n                          <Button type=\"submit\" color=\"grey\" className=\"btn_link\">\n                            Submit\n                          </Button>\n                        </Form>\n                      </Modal.Content>\n                    </Modal>\n                  </Grid.Column>\n\n                  <Grid.Column width={16}>\n                    <Segment className=\"blurred box\">\n                      <Grid columns=\"equal\" className=\"graph_values\">\n                        <Grid.Column textAlign=\"left\">\n                          <p className=\"subtext\">Total Shares</p>\n                          <p className=\"amount\">{totalShares}</p>\n                        </Grid.Column>\n                        <Grid.Column textAlign=\"center\">\n                          <p className=\"subtext\">Total ETH</p>\n                          <p className=\"amount\">{utils.formatEther(guildBankValue)}</p>\n                        </Grid.Column>\n                        <Grid.Column textAlign=\"right\">\n                          <p className=\"subtext\">Share Value</p>\n                          <p className=\"amount\">\n                            {convertWeiToDollars(shareValue, exchangeRate)}\n                          </p>\n                        </Grid.Column>\n                      </Grid>\n                    </Segment>\n                  </Grid.Column>\n                </Grid>\n              </div>\n            );\n          }\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default withApollo(HomePage);\n","import React from 'react';\nimport { Progress, Grid } from 'semantic-ui-react';\n\n\nconst ProgressBar = ({ yes, no, totalShares }) => {\n  const total = yes + no\n  const percentYes = yes === 0 ? 0 : Math.round((yes / total) * 100)\n  const percentNo = no === 0 ? 0 : Math.round((no / total) * 100)\n  return (\n  <>\n    <div style={{ position: \"relative\" }}>\n      <Progress\n        percent={percentYes + percentNo}\n        color=\"red\"\n        size=\"small\"\n        style={{\n          position: \"absolute\",\n          top: \"0\",\n          width: \"100%\"\n        }}\n      />\n      <Progress percent={percentYes} color=\"green\" size=\"small\" />\n    </div>\n    <Grid columns=\"equal\">\n      <Grid.Column floated=\"left\">{yes} Yes Votes</Grid.Column>\n      <Grid.Column floated=\"right\" textAlign=\"right\">\n        {no} No Votes\n      </Grid.Column>\n    </Grid>\n  </>\n)};\n\nexport default ProgressBar","import { getMoloch } from \"../web3\";\n\nconst VOTING_PERIOD_LENGTH = 35;\nconst GRACE_PERIOD_LENGTH = 35;\n\nexport const ProposalStatus = {\n  Unknown: \"Unknown\",\n  InQueue: \"InQueue\",\n  VotingPeriod: \"VotingPeriod\",\n  GracePeriod: \"GracePeriod\",\n  Aborted: \"Aborted\",\n  Passed: \"Passed\",\n  Failed: \"Failed\",\n  ReadyForProcessing: \"ReadyForProcessing\"\n};\n\n// fill in missing data from onchain\nexport async function getProposalDetailsFromOnChain(proposal, currentPeriod) {\n  const moloch = await getMoloch()\n  currentPeriod = parseInt(currentPeriod)\n  console.log('currentPeriod: ', currentPeriod);\n  \n  const inQueue = proposal => currentPeriod < proposal.startingPeriod;\n\n  const inGracePeriod = proposal =>\n    currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH &&\n    currentPeriod < proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH;\n\n  const inVotingPeriod = proposal => currentPeriod >= proposal.startingPeriod && currentPeriod <= proposal.startingPeriod + VOTING_PERIOD_LENGTH;\n\n  const enoughPassingVotes = proposal => Math.round((parseInt(proposal.yesVotes) / (parseInt(proposal.yesVotes) + parseInt(proposal.noVotes))) * 100) > 50\n\n  const passedVotingAndGrace = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH\n\n  const passedVoting = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH\n\n  const lastProposalProcessed = async proposal => {\n    if (proposal.proposalIndex === 0) {\n      return true\n    }\n    const lastProposalFromChain = await moloch.proposalQueue(proposal.proposalIndex - 1);\n    return lastProposalFromChain.processed\n  }\n\n  proposal.proposalIndex = parseInt(proposal.proposalIndex);\n\n  const proposalFromChain = await moloch.proposalQueue(proposal.proposalIndex);\n  console.log('proposalFromChain: ', proposalFromChain);\n  proposal.startingPeriod = parseInt(proposalFromChain.startingPeriod);\n\n  proposal.votingEnds = 0;\n  proposal.gracePeriod = 0;\n\n  proposal.lastProposalProcessed = await lastProposalProcessed(proposal)\n  if (proposal.aborted) {\n    proposal.status = ProposalStatus.Aborted;\n  } else if (proposal.processed && proposal.didPass) {\n    proposal.status = ProposalStatus.Passed;\n  } else if (proposal.processed && !proposal.didPass) {\n    proposal.status = ProposalStatus.Failed;\n  } else if (inGracePeriod(proposal)) {\n    proposal.status = ProposalStatus.GracePeriod;\n    proposal.gracePeriod = proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH - currentPeriod;\n  } else if (inVotingPeriod(proposal)) {\n    proposal.status = ProposalStatus.VotingPeriod;\n    proposal.votingEnds = proposal.startingPeriod + VOTING_PERIOD_LENGTH - currentPeriod;\n  } else if (inQueue(proposal)) {\n    proposal.status = ProposalStatus.InQueue;\n    proposal.votingStarts = proposal.startingPeriod - currentPeriod\n  } else if (passedVotingAndGrace(proposal)) {\n    proposal.status = ProposalStatus.ReadyForProcessing\n  } else {\n    proposal.status = ProposalStatus.Unknown\n  }\n\n  proposal.votingEnded = passedVoting(proposal);\n  proposal.graceEnded = passedVotingAndGrace(proposal);\n\n  proposal.readyForProcessing = false;\n  if (\n    proposal.status === ProposalStatus.InQueue &&\n    passedVotingAndGrace(proposal) &&\n    enoughPassingVotes(proposal) &&\n    proposal.lastProposalProcessed\n  ) {\n    proposal.readyForProcessing = true;\n  }\n\n  let details = {\n    title: \"\",\n    description: \"\"\n  };\n  try {\n    details = JSON.parse(proposalFromChain.details);\n  } catch (e) {\n    console.log(\n      `Could not parse details from proposal.proposalIndex: ${proposal.proposalIndex} proposalFromChain: ${JSON.stringify(\n        proposalFromChain,\n        null,\n        2\n      )}`\n    );\n    details.title = proposalFromChain.details\n  }\n\n  proposal.title = details.title;\n  proposal.description = details.description;\n\n  return proposal;\n}\n","import React, { Component } from \"react\";\nimport { Divider, Grid, Icon, Segment, Button, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport hood from \"assets/hood.png\";\n\nimport ProgressBar from \"./ProgressBar\";\n\nimport gql from \"graphql-tag\";\nimport { withApollo } from \"react-apollo\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { getMoloch } from \"../web3\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES } from \"../helpers/graphQlQueries\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nexport const Vote = {\n  Null: 0, // default value, counted as abstention\n  Yes: 1,\n  No: 2\n}\n\nconst MemberAvatar = ({ member, shares }) => {\n  return (\n    <Grid.Column mobile={4} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={member}>\n      <Link to={`/members/${member}`} className=\"uncolored\">\n        <Image src={hood} centered />\n        <p className=\"name\">{!member ? \"\" : member.length > 10 ? member.substring(0, 10) + \"...\" : member}</p>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_DETAIL = gql`\n  query Proposal($id: String!) {\n    proposal(id: $id) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes {\n        member {\n          id\n          shares\n        }\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nclass ProposalDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      proposal: {\n        tokenTribute: 0,\n        sharesRequested: 0,\n        votingEnded: true,\n        graceEnded: true,\n        yesVotes: 0,\n        noVotes: 0,\n        status: ProposalStatus.InQueue\n      },\n      user: {\n        id: 0,\n        shares: 0,\n        isActive: false\n      },\n      moloch: null\n    };\n\n    this.fetchData(props);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  async fetchData(props) {\n    const { client, loggedInUser } = props;\n    const proposalResult = await client.query({\n      query: GET_PROPOSAL_DETAIL,\n      variables: { id: this.props.match.params.id }\n    });\n\n    const userResult = await client.query({\n      query: GET_LOGGED_IN_USER,\n      variables: { address: loggedInUser }\n    });\n    this.setState({\n      user: userResult.data.member\n    });\n\n    let proposal = proposalResult.data.proposal\n    if (proposalResult.data.proposal.status === ProposalStatus.Unknown) {\n      const onChain = await getProposalDetailsFromOnChain(proposalResult.data.proposal);\n      const result = await client.mutate({\n        mutation: SET_PROPOSAL_ATTRIBUTES,\n        variables: {\n          id: proposalResult.data.proposal.id,\n          status: onChain.status,\n          title: onChain.title,\n          description: onChain.description || \"\"\n        }\n      });\n      proposal = {\n        ...proposalResult.data.proposal,\n        status: result.data.setAttributes.status,\n        title: result.data.setAttributes.title,\n        description: result.data.setAttributes.description\n      }\n    }\n    this.setState({\n      proposal\n    });\n  }\n\n  loadData(responseJson) {\n    let proposal = responseJson.items.member ? responseJson.items.member : responseJson.items;\n    this.setState({ proposal_detail: proposal, isAccepted: proposal.status === \"accepted\" || proposal.status === \"active\" ? true : false });\n    let voters = this.state.proposal_detail.voters ? this.state.proposal_detail.voters : [];\n    let userHasVoted = voters.find(voter => voter.member === this.state.loggedUser) ? true : false;\n    this.setState({ userHasVoted });\n    this.calculateVote(voters);\n  }\n\n  handleNo = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.No).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleYes = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.Yes).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleProcess = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.processProposal(proposal.proposalIndex).send({ from: user.id })\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_detail\">\n        <Grid centered columns={16}>\n          <Segment className=\"transparent box segment\" textAlign=\"center\">\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <span className=\"title\">{this.state.proposal.title ? this.state.proposal.title : \"N/A\"}</span>\n              </Grid.Column>\n            </Grid>\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={4}>\n                <div className=\"subtext description\">{this.state.proposal.description ? this.state.proposal.description : \"N/A\"}</div>\n                <Grid columns=\"equal\" className=\"tokens\">\n                  <Grid.Row>\n                    <Grid.Column className=\"tributes\">\n                      <Segment className=\"pill\" textAlign=\"center\">\n                        <Icon name=\"ethereum\" />\n                        {this.state.proposal.tokenTribute} ETH\n                      </Segment>\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <p className=\"subtext voting\">Shares</p>\n                    <p className=\"amount\">{this.state.proposal.sharesRequested}</p>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\">\n                    <p className=\"subtext\">Total USD Value</p>\n                    <p className=\"amount\">{formatter.format(0)}</p>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={2}>\n                <Divider vertical />\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={6}>\n                <Grid columns={16}>\n                  <Grid.Column textAlign=\"left\" mobile={16} tablet={8} computer={8} className=\"pill_column\">\n                    <span className=\"pill\">\n                      {this.state.proposal.votingEnded ? (\n                        <span className=\"subtext\">Voting Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Voting Ends: </span>\n                          <span>\n                            {this.state.proposal.votingEnds ? this.state.proposal.votingEnds : \"-\"} period\n                            {this.state.proposal.votingEnds === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\" className=\"pill_column grace\" mobile={16} tablet={8} computer={8}>\n                    <span className=\"pill\">\n                      {this.state.proposal.graceEnded ? (\n                        <span className=\"subtext\">Grace Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Grace Period Ends: </span>\n                          <span>\n                            {this.state.proposal.gracePeriod ? this.state.proposal.gracePeriod : \"-\"} period\n                            {this.state.proposal.gracePeriod === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                </Grid>\n                <Grid columns={16} className=\"member_list\">\n                  <Grid.Row>\n                    <Grid.Column mobile={16} tablet={16} computer={16} className=\"pill_column\">\n                      {this.state.proposal.votes && this.state.proposal.votes.length > 0 ? (\n                        <Grid>\n                          <Grid.Row className=\"members_row\">\n                            {/* centered */}\n                            {this.state.proposal.votes.map((vote, idx) => <MemberAvatar member={vote.member.id} shares={vote.member.shares} key={idx} />)}\n                          </Grid.Row>\n                        </Grid>\n                      ) : null}\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid>\n                  <Grid.Column>\n                    <ProgressBar yes={parseInt(this.state.proposal.yesVotes)} no={parseInt(this.state.proposal.noVotes)} />\n                  </Grid.Column>\n                </Grid>\n                <Grid columns=\"equal\" centered>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleNo}\n                    >\n                      Vote No\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleYes}\n                    >\n                      Vote Yes\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button className=\"btn\" color=\"grey\" onClick={this.handleProcess} disabled={!this.state.proposal.readyForProcessing}>\n                      Process Proposal\n                    </Button>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid>\n          </Segment>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withApollo(ProposalDetail);\n","import React from \"react\";\nimport { Segment, Grid, Button } from \"semantic-ui-react\";\nimport { Route, Switch, Link } from \"react-router-dom\";\n\nimport ProposalDetail from \"./ProposalDetail\";\nimport ProgressBar from \"./ProgressBar\";\nimport { Query, withApollo } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES, GET_CURRENT_PERIOD, GET_TOTAL_SHARES, GET_SHARE_VALUE } from \"../helpers/graphQlQueries\";\nimport { currencyFormatter } from \"../helpers/currency\";\nimport { utils } from \"ethers\";\n\nfunction getProposalCountdownText(proposal) {\n  switch (proposal.status) {\n    case ProposalStatus.InQueue:\n      return (\n        <>\n          <span className=\"subtext\">Voting Begins: </span>\n          <span>\n            {proposal.votingStarts ? proposal.votingStarts : \"-\"} period{proposal.votingStarts === 1 ? null : \"s\"}\n          </span>\n        </>\n      )\n    case ProposalStatus.VotingPeriod:\n      return (\n        <>\n          <span className=\"subtext\">Voting Ends: </span>\n          <span>\n            {proposal.votingEnds ? proposal.votingEnds : \"-\"} period{proposal.votingEnds === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    case ProposalStatus.GracePeriod:\n      return (\n        <>\n          <span className=\"subtext\">Grace Period Ends: </span>\n          <span>\n            {proposal.gracePeriod ? proposal.gracePeriod : \"-\"} period{proposal.gracePeriod === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    default:\n      return <></>;\n  }\n}\n\nconst ProposalCard = ({ proposal, totalShares, shareValue = 0 }) => {\n  let id = proposal.id;\n  return (\n    <Grid.Column mobile={16} tablet={8} computer={5}>\n      <Link to={{ pathname: `/proposals/${id}` }} className=\"uncolored\">\n        <Segment className=\"blurred box\">\n          <p className=\"name\">{proposal.title ? proposal.title : \"N/A\"}</p>\n          <p className=\"subtext description\">{proposal.description ? proposal.description : \"N/A\"}</p>\n          <Grid columns=\"equal\" className=\"value_shares\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n                <p className=\"amount\">{proposal.sharesRequested}</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Total Value</p>\n                <p className=\"amount\">{currencyFormatter.format(utils.bigNumberify(proposal.sharesRequested).mul(shareValue).toString())}</p>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\" className=\"deadlines\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <Segment className=\"voting pill\" textAlign=\"center\">\n                  {getProposalCountdownText(proposal)}\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <ProgressBar totalShares={totalShares} yes={parseInt(proposal.yesVotes)} no={parseInt(proposal.noVotes)} />\n        </Segment>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_LIST = gql`\n  {\n    proposals(orderBy: proposalIndex, orderDirection: desc) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n`;\nclass ProposalList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      proposals: [],\n      loading: true,\n      totalShares: 0\n    };\n\n    this.fetchData(props);\n  }\n\n  async fetchData(props) {\n    const { client } = props;\n    this.setState({\n      loading: true\n    });\n    const { data: proposalData } = await client.query({\n      query: GET_PROPOSAL_LIST\n    });\n\n    const { data: currentPeriodData } = await client.query({\n      query: GET_CURRENT_PERIOD\n    });\n\n    const { data: totalSharesData } = await client.query({\n      query: GET_TOTAL_SHARES\n    });\n\n    const { data: shareValueData } = await client.query({\n      query: GET_SHARE_VALUE\n    });\n    try {\n      await this.determineProposalStatuses(client, proposalData.proposals, currentPeriodData.currentPeriod);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.setState({\n        loading: false,\n        totalShares: +totalSharesData.totalShares,\n        shareValue: shareValueData.shareValue\n      });\n    }\n  }\n\n  determineProposalStatuses = async (client, proposals, currentPeriod) => {\n    if (!proposals || proposals.length === 0) {\n      return;\n    }\n\n    const fullProps = [];\n    for (const proposal of proposals) {\n      if (proposal.status === ProposalStatus.Unknown) {\n        const fullProp = await getProposalDetailsFromOnChain(proposal, currentPeriod);\n        console.log(\"fullProp: \", fullProp);\n        const result = await client.mutate({\n          mutation: SET_PROPOSAL_ATTRIBUTES,\n          variables: {\n            id: proposal.id,\n            status: fullProp.status,\n            title: fullProp.title,\n            description: fullProp.description || \"\",\n            gracePeriod: fullProp.gracePeriod || \"\",\n            votingEnds: `${fullProp.votingEnds}` || \"\",\n            votingStarts: `${fullProp.votingStarts}` || \"\",\n            readyForProcessing: fullProp.readyForProcessing || \"\"\n          }\n        });\n        fullProps.push({\n          ...proposal,\n          status: result.data.setAttributes.status,\n          title: result.data.setAttributes.title,\n          description: result.data.setAttributes.description,\n          gracePeriod: result.data.setAttributes.gracePeriod,\n          votingEnds: result.data.setAttributes.votingEnds,\n          votingStarts: result.data.setAttributes.votingStarts,\n          readyForProcessing: result.data.setAttributes.readyForProcessing\n        });\n      } else {\n        fullProps.push(proposal);\n      }\n    }\n\n    this.setState({\n      proposals: fullProps\n    });\n    return;\n  };\n\n  render() {\n    const { isActive } = this.props;\n    const { proposals, totalShares } = this.state;\n    const gracePeriod = proposals.filter(p => p.status === ProposalStatus.GracePeriod);\n    const votingPeriod = proposals.filter(p => p.status === ProposalStatus.VotingPeriod);\n    const inQueue = proposals.filter(p => p.status === ProposalStatus.InQueue);\n    const completed = proposals.filter(\n      p => p.status === ProposalStatus.Aborted || p.status === ProposalStatus.Passed || p.status === ProposalStatus.Failed\n    );\n    return (\n      <div id=\"proposal_list\">\n        <React.Fragment>\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={8} computer={4} textAlign=\"right\" floated=\"right\" className=\"submit_button\">\n              <Link to={isActive ? \"/proposalsubmission\" : \"/proposals\"} className=\"link\">\n                <Button size=\"large\" color=\"red\" disabled={!isActive}>\n                  New Proposal\n                </Button>\n              </Link>\n            </Grid.Column>\n          </Grid>\n          {this.state.loading ? (\n            <>Loading proposals...</>\n          ) : (\n            <>\n              {/* Grace Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {gracePeriod.length} Proposal{gracePeriod.length > 1 || gracePeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Grace Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {gracePeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Voting Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {votingPeriod.length} Proposal{votingPeriod.length > 1 || votingPeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Voting Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {votingPeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* In Queue */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {inQueue.length} Proposal{inQueue.length > 1 || inQueue.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Queue</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {inQueue.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Completed */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {completed.length} Proposal{completed.length > 1 || completed.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">Completed</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {completed.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n            </>\n          )}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\nconst ProposalListHOC = withApollo(ProposalList);\n\nconst ProposalListView = props => {\n  return (\n    <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n      {({ loading, error, data }) => {\n        if (loading) return \"Loading...\";\n        if (error) throw new Error(`Error!: ${error}`);\n        return (\n          <Switch>\n            <Route exact path=\"/proposals\" render={() => <ProposalListHOC isActive={data.member ? data.member.isActive : false} />} />\n            <Route path=\"/proposals/:id\" component={ProposalDetail} />\n          </Switch>\n        );\n      }}\n    </Query>\n  );\n};\n\nexport default ProposalListView;\n","import React from \"react\";\nimport { Divider, Grid, Segment, Image, Icon, Label, Header } from \"semantic-ui-react\";\n\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { Vote } from \"./ProposalDetail\";\nimport { utils } from \"ethers\"\nimport { convertWeiToDollars } from \"../helpers/currency\";\n\nconst GET_MEMBER_DETAIL = gql`\n  query Member($id: String!) {\n    member(id: $id) {\n      id\n      shares\n      tokenTribute\n    }\n    shareValue @client\n    exchangeRate @client\n  }\n`;\nconst MemberDetail = ({ name, loggedInUser }) => (\n  <Query query={GET_MEMBER_DETAIL} variables={{ id: name }}>\n    {({ loading, error, data }) => {\n      if (loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (error) throw new Error(`Error!: ${error}`);\n      console.log('data: ', data);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\">\n            <Grid.Column>\n              <p className=\"subtext\">Shares</p>\n              <p className=\"amount\">{data.member.shares}</p>\n            </Grid.Column>\n            <Grid.Column textAlign=\"right\">\n              <p className=\"subtext\">Total Value</p>\n              <p className=\"amount\">{convertWeiToDollars(utils.bigNumberify(data.member.shares).mul(data.shareValue).toString(), data.exchangeRate)}</p>\n            </Grid.Column>\n          </Grid>\n          <Grid>\n            <Grid.Column textAlign=\"center\" className=\"avatar\">\n              <Image centered src={loggedInUser === name ? bull : hood} size=\"tiny\" />\n            </Grid.Column>\n          </Grid>\n          <p className=\"subtext\">Tribute</p>\n          <Grid columns=\"equal\">\n            <Grid.Row>\n              <Grid.Column>\n                <Segment className=\"pill\" textAlign=\"center\">\n                  <Icon name=\"ethereum\" />\n                  {utils.formatEther(data.member.tokenTribute)} ETH\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Query>\n);\n\nconst GET_PROPOSAL_HISTORY = gql`\n  query Proposals($id: String!) {\n    proposals {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      votes(where: { memberAddress: $id }) {\n        id\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nconst ProposalDetail = ({ name }) => (\n  <Query query={GET_PROPOSAL_HISTORY} variables={{ id: name }}>\n    {({ loading, error, data }) => {\n      if (loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (error) throw new Error(`Error!: ${error}`);\n      console.log(\"data: \", data);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\" textAlign=\"center\">\n            <Grid.Row className=\"subtext\" style={{ fontSize: 20 }}>\n              History\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\">\n            <Grid.Row className=\"header\">\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Proposal Title</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Date</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Tribute Offered</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Vote</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Status</p>\n              </Grid.Column>\n            </Grid.Row>\n            {data.proposals && data.proposals.length > 0 ? (\n              data.proposals.map((p, idx) => {\n                return (\n                  <React.Fragment key={idx}>\n                    <Grid.Row verticalAlign=\"middle\">\n                      <Grid.Column textAlign=\"center\">\n                        {p.votes.uintVote === Vote.Yes && <Label className=\"dot\" circular color=\"green\" empty />}\n                        {/* TODO: is this right? */}\n                        {(p.votes.uintVote === Vote.No || p.votes.uintVote === Vote.Null) && <Label className=\"dot\" circular color=\"red\" empty />}\n                        {p.title}\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{new Date(p.timestamp * 1000).toISOString().slice(0, 10)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.sharesRequested}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{utils.formatEther(p.tokenTribute)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <Header as=\"p\" color={p.vote === 2 ? \"green\" : p.vote === 1 ? \"red\" : null}>\n                          {p.vote === 2 ? \"Y\" : p.vote === 1 ? \"N\" : \"\"}\n                        </Header>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.aborted ? \"Aborted\" : p.processed ? (p.didPass ? \"Passed\" : \"Failed\") : \"Pending\"}</p>\n                      </Grid.Column>\n                    </Grid.Row>\n                    <Divider />\n                  </React.Fragment>\n                );\n              })\n            ) : (\n              <>This member hasn't voted on any proposals yet.</>\n            )}\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Query>\n);\n\nconst MemberDetailView = props => (\n  <div id=\"member_detail\">\n    <p className=\"title\"> {props.match.params.name} </p>\n    <Divider />\n    <Grid columns={16}>\n      <Grid.Row className=\"details\">\n        <Grid.Column mobile={16} tablet={16} computer={6} className=\"user\">\n          <MemberDetail name={props.match.params.name} loggedInUser={props.loggedInUser} />\n        </Grid.Column>\n        <Grid.Column mobile={16} tablet={16} computer={10} className=\"proposals\">\n          <ProposalDetail name={props.match.params.name} />\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  </div>\n);\n\nexport default MemberDetailView;\n","import React from \"react\";\nimport { Grid, Image, Divider } from \"semantic-ui-react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport MemberDetail from \"./MemberDetail\";\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { GET_LOGGED_IN_USER, GET_MEMBERS } from \"../helpers/graphQlQueries\";\n\nconst MemberAvatar = ({ address, shares }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={address}>\n    <Link to={`/members/${address}`} className=\"uncolored\">\n      <Image src={hood} centered size=\"tiny\" />\n      <p className=\"name\">{!address ? \"\" : address.length > 10 ? address.substring(0, 10) + \"...\" : address}</p>\n      <p className=\"subtext\">{shares} shares</p>\n    </Link>\n  </Grid.Column>\n);\n\nconst LoggedInUser = props => (\n  <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.member && data.member.isActive ? (\n        <Link to={`/members/${data.member.id}`} className=\"uncolored\">\n          <Image centered src={bull} size=\"tiny\" />\n          <p className=\"name\">{!data.member.id ? \"\" : data.member.id.length > 10 ? data.member.id.substring(0, 10) + \"...\" : data.member.id}</p>\n          <p className=\"subtext\">{data.member.shares ? data.member.shares : 0} shares</p>\n        </Link>\n      ) : (\n        <div />\n      );\n    }}\n  </Query>\n);\n\nconst GET_ELDERS = gql`\n  {\n    members(where: { shares_gte: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Elders = () => (\n  <Query query={GET_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((elder, idx) => <MemberAvatar address={elder.id} shares={elder.shares} key={idx} />)\n      ) : (\n        <>No elders to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst GET_NON_ELDERS = gql`\n  {\n    members(where: { shares_gt: 0, shares_lt: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Contributors = () => (\n  <Query query={GET_NON_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((contributor, idx) => <MemberAvatar address={contributor.id} shares={contributor.shares} key={idx} />)\n      ) : (\n        <>No contributors to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst MemberList = props => (\n  <Query query={GET_MEMBERS}>\n    {({ loading, error, data }) => {\n      let members;\n      if (error) {\n        members = \"NA\";\n        console.error(`Could not load members: ${error}`);\n      } else if (loading) {\n        members = \"-\";\n      } else {\n        members = data.members.length;\n      }\n      return (\n        <div id=\"member_list\">\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={6} computer={6} textAlign=\"left\" className=\"member_list_header\">\n              <p className=\"subtext\">{members} Members</p>\n            </Grid.Column>\n\n            {/* <Grid.Column mobile={16} tablet={10} computer={10} textAlign=\"right\" className=\"submit_button\">\n              <Link to='/membershipproposalsubmission' className=\"link\">\n                <Button size='large' color='red' disabled={(props.user.status === 'founder') ? true : false}>Membership Proposal</Button>\n              </Link>\n            </Grid.Column> */}\n          </Grid>\n\n          <Grid>\n            <Grid.Column textAlign=\"center\">\n              <LoggedInUser {...props} />\n            </Grid.Column>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Elders (100+ shares)</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Elders />\n            </Grid.Row>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Contributors</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Contributors />\n            </Grid.Row>\n          </Grid>\n        </div>\n      );\n    }}\n  </Query>\n);\n\nconst MemberListView = higherProps => (\n  <Switch>\n    <Route exact path=\"/members\" render={props => <MemberList {...props} loggedInUser={higherProps.loggedInUser} />} />\n    <Route path=\"/members/:name\" render={props => <MemberDetail {...props} loggedInUser={higherProps.loggedInUser} />} />\n  </Switch>\n);\n\nexport default MemberListView;\n","import React, { Component } from \"react\";\nimport { Grid, Button } from \"semantic-ui-react\";\n\nimport { initMetmask, initGnosisSafe } from \"../web3\";\nimport { ApolloConsumer } from \"react-apollo\";\n\nlet coinbase;\n\nexport default class Login extends Component {\n  // bypass auth for now\n  loginWithMetamask = async client => {\n    const web3 = await initMetmask();\n    if (!web3) {\n      return\n    }\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  loginWithGnosisSafe = async client => {\n    const web3 = initGnosisSafe();\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  doLoginBypassAuth = async (client, web3) => {\n    coinbase = (await web3.listAccounts())[0];\n\n    if (!coinbase) {\n      alert(\"Could not retrieve address from Gnosis Safe/MetaMask, is it configured and this domain whitelisted?\");\n    } else {\n      // Try getting a user by their public address.\n      client.writeData({\n        data: {\n          loggedInUser: coinbase.toLowerCase()\n        }\n      });\n      this.props.loginComplete()\n      this.props.history.push(\"/\");\n    }\n  };\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <div id=\"login\">\n            <Grid columns={1} centered>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithMetamask(client)}>\n                  Connect With Web3\n                </Button>\n              </Grid.Row>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithGnosisSafe(client)}>\n                  Connect With Web3 (Gnosis Safe)\n                </Button>\n              </Grid.Row>\n            </Grid>\n          </div>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Button, Divider, Form, Grid, Input, Segment, GridColumn } from \"semantic-ui-react\";\nimport { getMoloch } from \"../web3\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nclass AssetsFields extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAsset = this.handleAsset.bind(this);\n    this.deleteAsset = this.deleteAsset.bind(this);\n  }\n\n  handleAsset(event, { value, name }) {\n    this.props.onHandleAsset({ value, name, assetIndex: this.props.assetIndex });\n  }\n\n  deleteAsset() {\n    this.props.onHandleDeleteAsset({ assetIndex: this.props.assetIndex });\n  }\n\n  render() {\n    return (\n      <Grid.Row className=\"asset_field_row\">\n        {/* <Grid.Column mobile={14} tablet={5} computer={7} className=\"asset_field_grid membership\"> */}\n        <Grid.Column width={2} textAlign=\"left\" className=\"asset_field_grid membership\">\n          {/* <Input name=\"asset\" className=\"asset icon_asset\" icon=\"ethereum\" iconPosition=\"left\" placeholder=\"ETH, BTC, Token address\" onChange={this.handleAsset} type=\"text\" /> */}\n          {/* <Input icon=\"ethereum\" iconPosition=\"left\" name=\"asset\" className=\"asset icon_asset\" type=\"text\" value={this.props.assets.symbol} disabled={true} /> */}\n          <div className=\"subtext\" style={{ paddingTop: 10, paddingRight: 10 }}>\n            {this.props.assets.symbol}\n          </div>\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid mobile_delete_icon\" textAlign=\"right\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n        <Grid.Column mobile={14} tablet={10} computer={7} className=\"asset_field_grid\">\n          <Input name=\"amount\" className=\"asset_amount\" placeholder=\"Enter Amount\" type=\"number\" onChange={this.handleAsset} />\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid computer_delete_icon\" textAlign=\"center\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n      </Grid.Row>\n    );\n  }\n}\n\nexport default class ProposalSubmission extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      address: props.loggedInUser,\n      title: \"\",\n      description: \"\",\n      shares: 0,\n      tribute: 0, // TODO: this will be calculated with the blockchain\n      assets: [\n        {\n          asset: \"ETH\",\n          symbol: \"ETH\",\n          amount: 0,\n          logo: \"https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png\"\n        }\n      ],\n      formErrors: { title: \"\", description: \"\", assets: \"\", shares: \"\" },\n      titleValid: false,\n      descriptionValid: false,\n      assetsValid: false,\n      sharesValid: false,\n      formValid: false\n    };\n\n    this.addAsset = this.addAsset.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleAsset = this.handleAsset.bind(this);\n    this.handleDeleteAsset = this.handleDeleteAsset.bind(this);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let titleValid = this.state.titleValid;\n    let descriptionValid = this.state.descriptionValid;\n    let assetsValid = this.state.assetsValid;\n    let sharesValid = this.state.sharesValid;\n\n    switch (fieldName) {\n      case \"title\":\n        titleValid = value !== \"\";\n        fieldValidationErrors.title = titleValid ? \"\" : \"Title field is invalid\";\n        break;\n      case \"description\":\n        descriptionValid = value !== \"\";\n        fieldValidationErrors.description = descriptionValid ? \"\" : \"Description field is invalid\";\n        break;\n      case \"assets\":\n        Object.keys(value).map(key => {\n          for (var i in value[key]) {\n            if (Object.keys(value[key]).length <= 1) {\n              assetsValid = false;\n              return false;\n            } else {\n              if (value[key][i] === null || value[key][i] === \"\") {\n                assetsValid = false;\n                return false;\n              }\n            }\n          }\n          assetsValid = true;\n          return true;\n        });\n        fieldValidationErrors.assets = assetsValid ? \"\" : \"Asset is invalid\";\n        break;\n      case \"shares\":\n        sharesValid = value > 0;\n        fieldValidationErrors.shares = sharesValid ? \"\" : \"Shares field is invalid\";\n        break;\n      default:\n        break;\n    }\n    this.setState(\n      {\n        formErrors: fieldValidationErrors,\n        titleValid: titleValid,\n        descriptionValid: descriptionValid,\n        assetsValid: assetsValid,\n        sharesValid: sharesValid\n      },\n      this.validateForm\n    );\n  }\n\n  validateForm() {\n    this.setState({ formValid: this.state.titleValid && this.state.descriptionValid && this.state.assetsValid && this.state.sharesValid });\n  }\n\n  addAsset() {\n    let assets = this.state.assets ? this.state.assets : [];\n    assets.push({});\n\n    this.setState({ assets });\n  }\n\n  handleInput(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    if (name === \"shares\") {\n      this.setState({ [name]: parseInt(value) }, () => {\n        this.validateField(name, value);\n      });\n    } else {\n      this.setState({ [event.target.name]: event.target.value }, () => {\n        this.validateField(name, value);\n      });\n    }\n  }\n\n  handleAsset(event) {\n    let assets = this.state.assets;\n    assets[event.assetIndex][event.name] = event.value;\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n    this.setState({ tribute: 0 * event.value });\n  }\n\n  handleDeleteAsset(event) {\n    let assets = this.state.assets;\n    assets.splice(event.assetIndex, 1);\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n  }\n\n  async handleSubmit() {\n    const { moloch, formValid, address, title, description, shares, tribute } = this.state\n\n    if (formValid) {\n      try {\n        await moloch.methods.submitProposal(address, tribute, shares, JSON.stringify({ title, description })).send({ from: address })\n      } catch (e) {\n        console.error(e);\n        alert(\"Error processing proposal\");\n      }\n    } else {\n      alert(\"Please fill any missing fields.\");\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_submission\">\n        <Form>\n          <Grid centered columns={16}>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Input\n                  name=\"title\"\n                  transparent\n                  size=\"big\"\n                  inverted\n                  placeholder=\"Proposal Title\"\n                  onChange={this.handleInput}\n                  value={this.state.title}\n                />\n                <Divider />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Segment className=\"blurred box\">\n                  <Form.Input\n                    name=\"shares\"\n                    label=\"Request voting shares\"\n                    placeholder=\"Shares\"\n                    fluid\n                    type=\"number\"\n                    onChange={this.handleInput}\n                    value={this.state.shares}\n                  />\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <Segment className=\"blurred box\">\n                      <Form.TextArea\n                        name=\"description\"\n                        label=\"Description\"\n                        placeholder=\"Type here\"\n                        rows={15}\n                        onChange={this.handleInput}\n                        value={this.state.description}\n                      />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={16} computer={8}>\n                    <Segment className=\"blurred box\">\n                      <Grid columns={16}>\n                        <Grid.Column width={14}>\n                          <div className=\"subtext\">Request Amount</div>\n                        </Grid.Column>\n                        {/* <Grid.Column width={2}>\n                                                    <div className=\"subtext\">\n                                                        <Icon name='add' className=\"add_icon\" link onClick={this.addAsset} />\n                                                    </div>\n                                                </Grid.Column> */}\n                      </Grid>\n                      <Grid columns={3} className=\"assets_field\">\n                        {this.state.assets.map((row, i) => (\n                          <AssetsFields\n                            key={i}\n                            assetIndex={i}\n                            assets={row}\n                            onHandleAsset={this.handleAsset}\n                            onHandleDeleteAsset={this.handleDeleteAsset}\n                          />\n                        ))}\n                      </Grid>\n                      <Divider />\n                      <Grid columns=\"equal\" className=\"value_shares\">\n                        <Grid.Row>\n                          <Grid.Column textAlign=\"center\">\n                            <p className=\"subtext\">Tribute Value</p>\n                            <p className=\"amount\">{formatter.format(this.state.tribute)}</p>\n                          </Grid.Column>\n                        </Grid.Row>\n                      </Grid>\n                    </Segment>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <GridColumn mobile={16} tablet={8} computer={8} className=\"submit_button\">\n                <Button size=\"large\" color=\"red\" onClick={this.handleSubmit}>\n                  Submit Proposal\n                </Button>\n              </GridColumn>\n            </Grid.Row>\n          </Grid>\n        </Form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Grid, Image, Divider, Button } from \"semantic-ui-react\";\nimport ethereumIcon from \"assets/ethereumIcon.png\";\nimport { Query } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst currencies = [\n  {\n    name: \"ETH\",\n    shares: 508,\n    value: 32000,\n    icon: ethereumIcon\n  }\n];\n\nconst CurrencyElement = ({ name, shares, icon, value }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"currency_element\">\n    <Image src={icon} centered size=\"tiny\" circular />\n    <p className=\"name\">{name}</p>\n    <p className=\"shares\">{shares}</p>\n    <p className=\"subtext\">{\"$\" + value}</p>\n  </Grid.Column>\n);\n\nexport default class GuildBank extends React.Component {\n  state = {\n    isActive: true\n  };\n\n  redeemToken() {}\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"guild_bank\">\n              <Grid>\n                <Grid.Column textAlign=\"center\" className=\"guild_value\">\n                  <p className=\"subtext\">Guild Bank Value</p>\n                  <p className=\"amount\">$53,640,918</p>\n                  <Button size=\"large\" color=\"grey\" disabled={data.member.isActive && this.state.isActive ? false : true} onClick={this.redeemToken}>\n                    Redeem Loot Token\n                  </Button>\n                </Grid.Column>\n              </Grid>\n\n              <Grid>\n                <Grid.Row />\n                <Divider />\n                <Grid.Row centered>\n                  {currencies.map((elder, idx) => (\n                    <CurrencyElement {...elder} key={idx} />\n                  ))}\n                </Grid.Row>\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import React from 'react';\n\nexport default () => (\n  <p>Not Found</p>\n)\n","import { ProposalStatus } from \"./helpers/proposals\";\nimport gql from \"graphql-tag\";\n\nexport const defaults = {\n  loggedInUser: \"\",\n  exchangeRate: \"\",\n  totalShares: \"\",\n  guildBankValue: \"\",\n  shareValue: \"\",\n  currentPeriod: \"\"\n};\n\nexport const resolvers = {\n  Proposal: {\n    status: () => ProposalStatus.Unknown,\n    title: () => \"\",\n    description: () => \"\",\n    gracePeriod: () => \"\",\n    votingEnds: () => \"\",\n    votingStarts: () => \"\",\n    readyForProcessing: () => false\n  },\n  Mutation: {\n    setAttributes: (_, variables, { cache, getCacheKey }) => {\n      const id = getCacheKey({ __typename: \"Proposal\", id: variables.id });\n      console.log('variables: ', variables);\n      const fragment = gql`\n        fragment getStatus on Proposal {\n          status\n        }\n      `;\n      const proposal = cache.readFragment({ fragment, id });\n      const data = {\n        ...proposal,\n        status: variables.status,\n        title: variables.title,\n        description: variables.description,\n        gracePeriod: variables.gracePeriod,\n        votingEnds: variables.votingEnds,\n        votingStarts: variables.votingStarts,\n        readyForProcessing: variables.readyForProcessing\n      };\n      cache.writeData({ id, data });\n      return data;\n    }\n  }\n};\n","import gql from \"graphql-tag\";\n\nexport const typeDefs = gql`\n  extend type Proposal {\n    status: String,\n    title: String,\n    description: String,\n    gracePeriod: String,\n    votingEnds: String,\n    votingStarts: String,\n    readyForProcessing: Bool\n  }\n\n  extend type Query {\n    proposalsWithStatus: [Proposal]\n  }\n`;","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport Background from \"./components/Background\";\nimport Header from \"./components/Header\";\nimport Wrapper from \"./components/Wrapper\";\nimport Home from \"./components/Home\";\nimport ProposalList from \"./components/ProposalList\";\nimport MemberList from \"./components/MemberList\";\nimport ProposalSubmission from \"./components/ProposalSubmission\";\nimport GuildBank from \"./components/GuildBank\";\nimport Login from \"./components/Login\";\nimport NotFound from \"./components/NotFound\";\nimport { ApolloProvider, Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { defaults, resolvers } from \"./resolvers\";\nimport { typeDefs } from \"./schema\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { onError } from \"apollo-link-error\";\nimport { ApolloLink } from \"apollo-link\";\nimport { withClientState } from \"apollo-link-state\";\nimport { CachePersistor } from \"apollo-cache-persist\";\nimport { GET_METADATA } from \"./helpers/graphQlQueries\";\nimport { getMedianizer, getMoloch, getToken } from \"./web3\";\nimport { utils } from \"ethers\";\n\nconsole.log(process.env);\n\nconst cache = new InMemoryCache();\n\nconst stateLink = withClientState({\n  cache,\n  defaults,\n  resolvers,\n  typeDefs\n});\n\nconst persistor = new CachePersistor({\n  cache,\n  storage: window.localStorage,\n  maxSize: false,\n  debug: true\n});\n\nconst httpLink = new HttpLink({\n  uri: process.env.REACT_APP_GRAPH_NODE_URI\n});\n\nconst client = new ApolloClient({\n  cache,\n  link: ApolloLink.from([\n    onError(({ graphQLErrors, networkError }) => {\n      if (graphQLErrors)\n        graphQLErrors.map(({ message, locations, path }) =>\n          console.log(`[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`)\n        );\n      if (networkError) console.log(`[Network error]: ${networkError}`);\n    }),\n    stateLink,\n    httpLink\n  ])\n});\n\nconst IS_LOGGED_IN = gql`\n  query IsUserLoggedIn {\n    loggedInUser @client\n  }\n`;\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restored: false,\n      exchangeRate: \"0\",\n      totalShares: \"0\",\n      guildBankValue: \"0\",\n    };\n  }\n\n  async componentDidMount() {\n    // await persistor.restore();\n\n    await this.populateData(true)\n\n    this.setState({ restored: true });\n  }\n\n  async populateData(refetch) {\n    let { data: loggedInUserData } = await client.query({\n      query: IS_LOGGED_IN\n    });\n    const loggedInUser = loggedInUserData.loggedInUser\n    if (!loggedInUser) {\n      console.log(`User not logged in, cannot fetch`)\n      return\n    }\n\n    let { data } = await client.query({\n      query: GET_METADATA\n    });\n    console.log('data: ', data);\n    let { exchangeRate, totalShares, currentPeriod, guildBankValue, shareValue } = data;\n\n    if (!exchangeRate || refetch) {\n      const medianizer = await getMedianizer();\n      exchangeRate = (await medianizer.compute())[0];\n      exchangeRate = utils.bigNumberify(exchangeRate)\n    }\n\n    if (!totalShares || !currentPeriod || refetch) {\n      const moloch = await getMoloch();\n      totalShares = await moloch.totalShares();\n      currentPeriod = await moloch.getCurrentPeriod();\n    }\n\n    const token = await getToken();\n    if (!guildBankValue || refetch) {\n      guildBankValue = await token.balanceOf(process.env.REACT_APP_GUILD_BANK_ADDRESS);\n    }\n\n    if (guildBankValue && totalShares) {\n      const ethPerShare = guildBankValue.gt(0) ? totalShares.toNumber() / parseFloat(utils.formatEther(guildBankValue)) : 0 // in eth\n      shareValue = utils.parseEther(ethPerShare.toString()) // in wei\n    }\n\n    const dataToWrite = {\n      guildBankValue: guildBankValue.toString(),\n      shareValue: shareValue.toString(),\n      totalShares: totalShares.toString(),\n      currentPeriod: currentPeriod.toString(),\n      exchangeRate: exchangeRate.toString()\n    }\n\n    client.writeData({\n      data: dataToWrite\n    });\n  }\n\n  render() {\n    return this.state.restored ? (\n      <ApolloProvider client={client}>\n        <Router>\n          <Query query={IS_LOGGED_IN}>\n            {({ data }) => {\n              return (\n                <>\n                  <Background />\n                  <Header loggedInUser={data.loggedInUser} />\n                  <Wrapper>\n                    <Switch>\n                      <Route\n                        exact\n                        path=\"/\"\n                        render={props =>\n                          data.loggedInUser ? <Home {...props} loggedInUser={data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposals\"\n                        render={props =>\n                          data.loggedInUser ? <ProposalList {...props} loggedInUser={data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/members\"\n                        render={props =>\n                          data.loggedInUser ? <MemberList {...props} loggedInUser={data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposalsubmission\"\n                        render={props =>\n                          data.loggedInUser ? (\n                            <ProposalSubmission {...props} loggedInUser={data.loggedInUser} />\n                          ) : (\n                            <Redirect to={{ pathname: \"/login\" }} />\n                          )\n                        }\n                      />\n                      <Route\n                        path=\"/guildbank\"\n                        render={props =>\n                          data.loggedInUser ? <GuildBank {...props} loggedInUser={data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route path=\"/login\" render={props => <Login {...props} loginComplete={() => this.populateData(true)} />} />\n                      <Route component={NotFound} />\n                    </Switch>\n                  </Wrapper>\n                </>\n              );\n            }}\n          </Query>\n        </Router>\n      </ApolloProvider>\n    ) : (\n      <div>Loading!!!</div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport './index.scss';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/hood.ba69d28c.png\";"],"sourceRoot":""}