{"version":3,"sources":["assets/bull.png","assets/ethereumIcon.png","components/Background.js","helpers/graphQlQueries.js","web3.js","components/Header.js","components/Wrapper.js","helpers/currency.js","components/Home.js","components/ProgressBar.js","helpers/proposals.js","components/ProposalDetail.js","components/ProposalList.js","components/MemberDetail.js","components/MemberList.js","components/Login.js","components/ProposalSubmission.js","components/GuildBank.js","resolvers.js","schema.js","App.js","index.js","assets/hood.png"],"names":["module","exports","__webpack_require__","p","Background","react_default","a","createElement","id","className","moloch","token","medianizer","eth","GET_EXCHANGE_RATE","gql","_templateObject","GET_TOTAL_SHARES","_templateObject2","GET_SHARE_VALUE","_templateObject3","_templateObject4","GET_CURRENT_PERIOD","_templateObject5","GET_METADATA","_templateObject6","GET_LOGGED_IN_USER","_templateObject7","GET_MEMBERS","_templateObject8","GET_PROPOSALS","_templateObject9","SET_PROPOSAL_ATTRIBUTES","_templateObject10","MainMenuWrapped","withApollo","props","member","isActive","Fragment","Dropdown","Item","onClick","_handleCloseDropdown","Link","to","concat","Icon","name","Divider","icon","content","_handleOpenDropdown","onLoadChangeDelegateKey","onLoadWithdrawLootToken","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","client","resetStore","stop","ChangeDelegateKeyMenu","Header_this","onLoadMain","Form","Input","placeholder","Button","WithdrawLootTokenMenu","Header","_this2","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visibleMenu","visibleRightMenu","setState","topRightMenuContent","_this3","Header_ChangeDelegateKeyMenu","Header_WithdrawLootTokenMenu","_this4","react_apollo_esm","query","variables","address","loggedInUser","_ref2","loading","error","data","Error","Grid","columns","verticalAlign","Column","textAlign","open","onBlur","onFocus","text","substring","Menu","direction","getTopRightMenuContent","Component","Wrapper","_ref","children","molochAbi","require","erc20Abi","medianizerAbi","initMetmask","_initMetmask","apply","arguments","web3Provider","window","ethereum","web3","alert","enable","currentProvider","ethers","providers","Web3Provider","localStorage","setItem","t0","abrupt","initGnosisSafe","provider","SafeProvider","rpcUrl","process","initMoloch","_initMoloch","_callee2","_context2","getItem","sent","Contract","initToken","_initToken","_callee3","_context3","initMedianizer","_initMedianizer","_callee4","_context4","getDefaultProvider","getMoloch","_getMoloch","_callee6","_context6","getToken","_getToken","_callee7","_context7","getMedianizer","_getMedianizer","_callee8","_context8","currencyFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","convertWeiToDollars","weiAmount","exchangeRate","weitoEth","utils","formatEther","exchWeiToEth","format","parseFloat","Composed","adopt","members","render","proposals","metadata","_ref3","NumMembers","_ref4","size","color","length","NumProposals","_ref5","HomePage","approval","userAddress","handleChange","e","_this","target","value","handleSubmit","_this$state","methods","approve","send","from","_ref6","Segment","_metadata$data","guildBankValue","totalShares","shareValue","mobile","tablet","computer","Statistic","inverted","label","Home_NumMembers","Home_NumProposals","Modal","basic","trigger","Content","onSubmit","Field","onChange","type","width","React","ProgressBar","yes","no","total","percentYes","Math","round","percentNo","position","Progress","percent","top","floated","VOTING_PERIOD_LENGTH","GRACE_PERIOD_LENGTH","ProposalStatus","Unknown","InQueue","VotingPeriod","GracePeriod","Aborted","Passed","Failed","ReadyForProcessing","getProposalDetailsFromOnChain","_x","_x2","_getProposalDetailsFromOnChain","proposal","currentPeriod","inQueue","inGracePeriod","inVotingPeriod","enoughPassingVotes","passedVotingAndGrace","passedVoting","lastProposalProcessed","proposalFromChain","details","parseInt","console","log","startingPeriod","yesVotes","noVotes","lastProposalFromChain","proposalIndex","proposalQueue","processed","_x3","toString","votingEnds","gracePeriod","votingStarts","aborted","status","didPass","votingEnded","graceEnded","readyForProcessing","JSON","parse","title","description","stringify","formatter","Vote","Null","Yes","No","MemberAvatar","shares","Image","src","hood","centered","GET_PROPOSAL_DETAIL","ProposalDetail_templateObject","ProposalDetail","handleNo","user","submitVote","userHasVoted","handleYes","_this$state2","handleProcess","_this$state3","processProposal","tokenTribute","sharesRequested","fetchData","match","params","proposalResult","userResult","onChain","mutate","mutation","result","objectSpread","setAttributes","responseJson","items","proposal_detail","isAccepted","voters","find","voter","loggedUser","calculateVote","Row","vertical","votes","map","vote","idx","ProposalDetail_MemberAvatar","key","components_ProgressBar","disabled","ProposalCard","_ref$shareValue","pathname","bigNumberify","mul","getProposalCountdownText","GET_PROPOSAL_LIST","ProposalList_templateObject","ProposalList","determineProposalStatuses","fullProps","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","fullProp","undefined","Symbol","iterator","done","push","return","finish","proposalData","currentPeriodData","totalSharesData","shareValueData","filter","votingPeriod","completed","index","ProposalList_ProposalCard","ProposalListHOC","ProposalListView","_ref7","Switch","Route","exact","path","component","GET_MEMBER_DETAIL","MemberDetail_templateObject","memberDetail","MemberDetail","MemberDetail_Composed","bull","GET_PROPOSAL_HISTORY","MemberDetail_templateObject2","fontSize","uintVote","Label","circular","empty","Date","timestamp","toISOString","slice","elements_Header_Header","as","MemberDetailView","MemberDetail_MemberDetail","MemberDetail_ProposalDetail","coinbase","LoggedInUser","GET_ELDERS","MemberList_templateObject","Elders","elder","MemberList_MemberAvatar","GET_NON_ELDERS","MemberList_templateObject2","Contributors","contributor","MemberList","MemberList_LoggedInUser","paddingLeft","MemberList_Elders","MemberList_Contributors","MemberListView","higherProps","MemberList_MemberList","assign","components_MemberDetail","AssetsFields","handleAsset","bind","assertThisInitialized","deleteAsset","event","onHandleAsset","assetIndex","onHandleDeleteAsset","paddingTop","paddingRight","assets","symbol","ProposalSubmission","tribute","asset","amount","logo","formErrors","titleValid","descriptionValid","assetsValid","sharesValid","formValid","addAsset","handleInput","handleDeleteAsset","fieldName","fieldValidationErrors","keys","i","validateForm","defineProperty","validateField","_this5","splice","submitProposal","_this6","stretched","transparent","fluid","TextArea","rows","row","ProposalSubmission_AssetsFields","GridColumn","currencies","ethereumIcon","CurrencyElement","GuildBank","redeemToken","GuildBank_CurrencyElement","Login","loginWithMetamask","doLoginBypassAuth","loginWithGnosisSafe","listAccounts","writeData","toLowerCase","loginComplete","history","resolvers","Proposal","Mutation","_","cache","fragment","resolvers_templateObject","readFragment","typeDefs","schema_templateObject","InMemoryCache","ApolloClient","link","HttpLink","uri","IS_LOGGED_IN","App_templateObject","loggedInUserData","App","restored","populateData","refetch","compute","getCurrentPeriod","balanceOf","ethPerShare","gt","toNumber","parseEther","dataToWrite","BrowserRouter","App_Composed","Header_Header","Home_HomePage","Redirect","components_ProposalList","components_MemberList","ProposalSubmission_ProposalSubmission","GuildBank_GuildBank","Login_Login","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.81f63852.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bull.204229a6.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react';\n\n\nexport default () => (\n  <div id=\"background\">\n    <div className=\"blurred_image\" />\n    <div className=\"dark_overlay\" />\n  </div>\n)\n","import gql from \"graphql-tag\";\n\nexport const GET_EXCHANGE_RATE = gql`\n  query ExchangeRate {\n    exchangeRate @client\n  }\n`;\n\nexport const GET_TOTAL_SHARES = gql`\n  query TotalShares {\n    totalShares @client\n  }\n`;\n\nexport const GET_GUILD_BANK_VALUE = gql`\n  query GuildBankValue {\n    guildBankValue @client\n  }\n`;\n\nexport const GET_SHARE_VALUE = gql`\n  query ShareValue {\n    shareValue @client\n  }\n`;\n\nexport const GET_CURRENT_PERIOD = gql`\n  query CurrentPeriod {\n    currentPeriod @client\n  }\n`;\n\nexport const GET_METADATA = gql`\n  query GetMetadata {\n    exchangeRate @client\n    totalShares @client\n    guildBankValue @client\n    shareValue @client\n    currentPeriod @client\n  }\n`;\n\nexport const GET_LOGGED_IN_USER = gql`\n  query User($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n    }\n  }\n`;\n\nexport const GET_MEMBERS = gql`\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n`;\n\n// TODO filter this to get current proposals?\nexport const GET_PROPOSALS = gql`\n  {\n    proposals {\n      id\n    }\n  }\n`;\n\nexport const SET_PROPOSAL_ATTRIBUTES = gql`\n  mutation SetAttributes(\n    $status: String!, \n    $title: String!, \n    $description: String!, \n    $gracePeriod: Number!, \n    $votingEnds: Number!, \n    $votingStarts: Number!, \n    $readyForProcessing: Bool!\n  ) {\n    setAttributes(\n      status: $status, \n      title: $title, \n      description: $description, \n      gracePeriod: $gracePeriod, \n      votingEnds: $votingEnds, \n      votingStarts: $votingStarts, \n      readyForProcessing: $readyForProcessing\n    ) @client {\n      status\n      title\n      description\n      gracePeriod\n      votingEnds\n      votingStarts\n      readyForProcessing\n    }\n  }\n`;\n","import SafeProvider from \"safe-web3-provider\"\nimport { ethers } from 'ethers';\n\nconst molochAbi = require('./abi/Moloch.abi.json')\nconst erc20Abi = require('./abi/ERC20.abi.json')\nconst medianizerAbi = require('./abi/Medianizer.abi.json')\n\nlet moloch\nlet token\nlet medianizer\nlet eth\n\nexport async function initMetmask() {\n  if (!window.ethereum && !window.web3) {\n    // Non-DApp browsers won't work.\n    alert(\"This page must be viewed on a Web3 enabled browser.\");\n  }\n  if (window.ethereum) {\n    // Modern DApp browsers need to enable Metamask access.\n    try {\n      await window.ethereum.enable()\n      let web3Provider = window['ethereum'] || window.web3.currentProvider\n      eth = new ethers.providers.Web3Provider(web3Provider);\n      localStorage.setItem(\"loginType\", \"metamask\");\n    } catch (error) {\n      alert(\"Metamask needs to be enabled.\")\n    }\n  }\n  return eth\n}\n\nexport function initGnosisSafe() {\n  /**\n   *  Create Safe Provider\n   */\n  const provider = new SafeProvider({\n    // TODO: CHANGE THIS TO INFURA/ALCHEMY\n    rpcUrl: process.env.REACT_APP_ETH_URL\n  });\n\n  /**\n   *  Create Web3\n   */\n  eth = new ethers.providers.Web3Provider(provider);\n  localStorage.setItem(\"loginType\", \"gnosis\");\n  return eth\n}\n\nexport async function initMoloch() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  moloch = new ethers.Contract(process.env.REACT_APP_MOLOCH_ADDRESS, molochAbi, eth)\n  // moloch = new web3.eth.Contract(molochAbi, process.env.REACT_APP_MOLOCH_ADDRESS)\n  return moloch\n}\n\nexport async function initToken() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  // token = new web3.eth.Contract(erc20Abi, process.env.REACT_APP_TOKEN_ADDRESS)\n  token = new ethers.Contract(process.env.REACT_APP_TOKEN_ADDRESS, erc20Abi, eth)\n  return token\n}\n\nexport async function initMedianizer() {\n  // pull from mainnet\n  let provider = ethers.getDefaultProvider();\n  medianizer = new ethers.Contract(process.env.REACT_APP_MEDIANIZER_ADDRESS, medianizerAbi, provider)\n  return medianizer\n}\n\nexport async function getWeb3() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  return eth\n}\n\nexport async function getMoloch() {\n  if (!moloch) {\n    await initMoloch()\n  }\n  return moloch\n}\n\nexport async function getToken() {\n  if (!token) {\n    await initToken()\n  }\n  return token\n}\n\nexport async function getMedianizer() {\n  if (!medianizer) {\n    await initMedianizer()\n  }\n  return medianizer\n}","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Grid, Icon, Dropdown, Form, Button } from \"semantic-ui-react\";\nimport { Query, withApollo } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst MainMenu = props => (\n  <div className=\"dropdownItems\">\n    {props.member && props.member.isActive ? (\n      <>\n        <Dropdown.Item className=\"item\" onClick={() => props._handleCloseDropdown()}>\n          <Link to={`/members/${props.member.id}`} className=\"link\">\n            <p>\n              <Icon name=\"user\" />\n              View Profile\n            </p>\n          </Link>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"key\"\n          className=\"item\"\n          content=\"Change Delegate Key\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadChangeDelegateKey();\n          }}\n        />\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"dollar\"\n          className=\"item\"\n          content=\"Rage Quit\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadWithdrawLootToken();\n          }}\n        />\n        <Dropdown.Divider />\n      </>\n    ) : null}\n    <Dropdown.Item className=\"item\">\n      <Link\n        to=\"/login\"\n        className=\"link\"\n        onClick={async () => {\n          props._handleCloseDropdown();\n          await props.client.resetStore();\n        }}\n      >\n        <p>\n          <Icon name=\"power off\" />\n          Sign Out\n        </p>\n      </Link>\n    </Dropdown.Item>\n  </div>\n);\nconst MainMenuWrapped = withApollo(MainMenu);\n\nconst ChangeDelegateKeyMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"key\" />\n        Change Delegate Key\n      </p>\n      <Form.Input placeholder=\"Enter new key address\" />\n      <Button>Save</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nconst WithdrawLootTokenMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"dollar\" />\n        Rage Quit\n      </p>\n      <Form.Input placeholder=\"Enter withdrawal address\" />\n      <Form.Input placeholder=\"0\" />\n      <Button>Withdraw</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visibleMenu: \"main\",\n      visibleRightMenu: false\n    };\n  }\n\n  _handleOpenDropdown() {\n    this.setState({ visibleRightMenu: true });\n  }\n\n  _handleCloseDropdown() {\n    this.setState({ visibleRightMenu: false });\n  }\n\n  getTopRightMenuContent(member) {\n    let topRightMenuContent;\n    switch (this.state.visibleMenu) {\n      case \"main\":\n        topRightMenuContent = (\n          <MainMenuWrapped\n            member={member}\n            _handleOpenDropdown={() => this._handleOpenDropdown()}\n            _handleCloseDropdown={() => this._handleCloseDropdown()}\n            onLoadChangeDelegateKey={() => this.setState({ visibleMenu: \"changeDelegateKey\" })}\n            onLoadWithdrawLootToken={() => this.setState({ visibleMenu: \"withdrawLootToken\" })}\n          />\n        );\n        break;\n      case \"changeDelegateKey\":\n        topRightMenuContent = (\n          <ChangeDelegateKeyMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      case \"withdrawLootToken\":\n        topRightMenuContent = (\n          <WithdrawLootTokenMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      default:\n        break;\n    }\n    return topRightMenuContent;\n  }\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"header\">\n              <Grid columns=\"equal\" verticalAlign=\"middle\">\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"left\" className=\"menu\">\n                    {/* <Dropdown icon=\"bars\">\n                <Dropdown.Menu className=\"menu blurred\" direction=\"right\">\n                  <Link to=\"guildbank\" className=\"item\">\n                    <p>Guild Bank</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/members\" className=\"item\">\n                    <p>Members</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/proposals\" className=\"item\">\n                    <p>Proposals</p>\n                  </Link>\n                </Dropdown.Menu>\n              </Dropdown> */}\n                  </Grid.Column>\n                ) : null}\n                <Grid.Column textAlign=\"center\" className=\"logo\">\n                  <Link to=\"/\">MOLOCH</Link>\n                </Grid.Column>\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"right\" className=\"dropdown\">\n                    <Dropdown\n                      className=\"right_dropdown\"\n                      open={this.state.visibleRightMenu}\n                      onBlur={() => this._handleCloseDropdown()}\n                      onFocus={() => this._handleOpenDropdown()}\n                      text={`${this.props.loggedInUser.substring(0,6)}...`}\n                    >\n                      <Dropdown.Menu className=\"menu blurred\" direction=\"left\">\n                        {this.getTopRightMenuContent(data.member)}\n                      </Dropdown.Menu>\n                    </Dropdown>\n                  </Grid.Column>\n                ) : null}\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import React from 'react';\n\n\nexport default ({ children }) => (\n  <div id=\"wrapper\">\n    { children }\n  </div>\n)","import { utils } from \"ethers\";\n\nexport const currencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\n/**\n * Converts Wei amount to Dollars\n * @param {*} weiAmount \n * @param {*} exchangeRate in Wei units\n */\nexport function convertWeiToDollars(weiAmount, exchangeRate) {\n  const weitoEth = utils.formatEther(weiAmount)\n  const exchWeiToEth = utils.formatEther(exchangeRate)\n  \n  return currencyFormatter.format(parseFloat(weitoEth * exchWeiToEth))\n}","import React from \"react\";\nimport { Grid, Button, Segment, Modal, Form, Statistic } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport { Query } from \"react-apollo\";\nimport { getToken } from \"../web3\";\nimport { utils } from \"ethers\";\nimport { GET_METADATA, GET_MEMBERS, GET_PROPOSALS } from \"../helpers/graphQlQueries\";\nimport { convertWeiToDollars } from \"../helpers/currency\";\nimport { adopt } from \"react-adopt\";\n\nconst Composed = adopt({\n  members: ({ render }) => <Query query={GET_MEMBERS}>{render}</Query>,\n  proposals: ({ render }) => <Query query={GET_PROPOSALS}>{render}</Query>,\n  metadata: ({ render }) => <Query query={GET_METADATA}>{render}</Query>\n});\n\nconst NumMembers = ({ members }) => (\n  <Link to=\"/members\" className=\"link\">\n    <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n      {members.length} Members\n    </Button>\n  </Link>\n);\n\nconst NumProposals = ({ proposals }) => (\n  <Link to=\"/proposals\" className=\"link\">\n    <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n      {proposals.length} Proposals\n    </Button>\n  </Link>\n);\n\nexport default class HomePage extends React.Component {\n  state = {\n    approval: \"\",\n    token: null,\n    userAddress: null\n  };\n\n  async componentDidMount() {\n    const token = await getToken();\n\n    this.setState({\n      token\n    });\n  }\n\n  handleChange = e => this.setState({ approval: e.target.value });\n\n  handleSubmit = () => {\n    const { loggedInUser } = this.props;\n    const { approval, token } = this.state;\n    token.methods.approve(process.env.REACT_APP_MOLOCH_ADDRESS, approval).send({ from: loggedInUser });\n  };\n\n  render() {\n    const { approval } = this.state;\n    return (\n      <Composed>\n        {({ members, proposals, metadata }) => {\n          if (members.loading || proposals.loading || metadata.loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n          if (members.error) throw new Error(`Error!: ${members.error}`);\n          if (proposals.error) throw new Error(`Error!: ${proposals.error}`);\n          if (metadata.error) throw new Error(`Error!: ${metadata.error}`);\n          const { guildBankValue, exchangeRate, totalShares, shareValue } = metadata.data;\n          return (\n            <div id=\"homepage\">\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                  <Link to=\"/guildbank\" className=\"text_link\">\n                    <Statistic inverted label=\"Guild Bank Value\" value={convertWeiToDollars(guildBankValue, exchangeRate)} />\n                  </Link>\n                </Grid.Column>\n                <Grid.Column mobile={16} tablet={10} computer={8} textAlign=\"center\" className=\"browse_buttons\">\n                  <NumMembers members={members.data.members} />\n                  <NumProposals proposals={proposals.data.proposals} />\n                </Grid.Column>\n                <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                  <Modal\n                    basic\n                    size=\"small\"\n                    trigger={\n                      <Button size=\"large\" color=\"grey\" className=\"browse_buttons\">\n                        Approve wETH\n                      </Button>\n                    }\n                  >\n                    <Modal.Header>Approve wETH</Modal.Header>\n                    <Modal.Content>\n                      <Form onSubmit={this.handleSubmit}>\n                        <Form.Field>\n                          <label>Amount to Approve</label>\n                          <input placeholder=\"Amount in Wei\" name=\"amount\" value={approval} onChange={this.handleChange} className=\"asset_amount\" />\n                        </Form.Field>\n                        <Button type=\"submit\" color=\"grey\" className=\"btn_link\">\n                          Submit\n                        </Button>\n                      </Form>\n                    </Modal.Content>\n                  </Modal>\n                </Grid.Column>\n\n                <Grid.Column width={16}>\n                  <Segment className=\"blurred box\">\n                    <Grid columns=\"equal\" className=\"graph_values\">\n                      <Grid.Column textAlign=\"left\">\n                        <Statistic inverted label=\"Total Shares\" value={totalShares} />\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <Statistic inverted label=\"Total ETH\" value={utils.formatEther(guildBankValue)} />\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"right\">\n                        <Statistic inverted label=\"Share Value\" value={convertWeiToDollars(shareValue, exchangeRate)} />\n                      </Grid.Column>\n                    </Grid>\n                  </Segment>\n                </Grid.Column>\n              </Grid>\n            </div>\n          );\n        }}\n      </Composed>\n    );\n  }\n}\n","import React from 'react';\nimport { Progress, Grid } from 'semantic-ui-react';\n\n\nconst ProgressBar = ({ yes, no, totalShares }) => {\n  const total = yes + no\n  const percentYes = yes === 0 ? 0 : Math.round((yes / total) * 100)\n  const percentNo = no === 0 ? 0 : Math.round((no / total) * 100)\n  return (\n  <>\n    <div style={{ position: \"relative\" }}>\n      <Progress\n        percent={percentYes + percentNo}\n        color=\"red\"\n        size=\"small\"\n        style={{\n          position: \"absolute\",\n          top: \"0\",\n          width: \"100%\"\n        }}\n      />\n      <Progress percent={percentYes} color=\"green\" size=\"small\" />\n    </div>\n    <Grid columns=\"equal\">\n      <Grid.Column floated=\"left\">{yes} Yes Votes</Grid.Column>\n      <Grid.Column floated=\"right\" textAlign=\"right\">\n        {no} No Votes\n      </Grid.Column>\n    </Grid>\n  </>\n)};\n\nexport default ProgressBar","import { getMoloch } from \"../web3\";\n\nconst VOTING_PERIOD_LENGTH = 35;\nconst GRACE_PERIOD_LENGTH = 35;\n\nexport const ProposalStatus = {\n  Unknown: \"Unknown\",\n  InQueue: \"InQueue\",\n  VotingPeriod: \"VotingPeriod\",\n  GracePeriod: \"GracePeriod\",\n  Aborted: \"Aborted\",\n  Passed: \"Passed\",\n  Failed: \"Failed\",\n  ReadyForProcessing: \"ReadyForProcessing\"\n};\n\n// fill in missing data from onchain\nexport async function getProposalDetailsFromOnChain(proposal, currentPeriod) {\n  const moloch = await getMoloch()\n  currentPeriod = parseInt(currentPeriod)\n  console.log('currentPeriod: ', currentPeriod);\n  \n  const inQueue = proposal => currentPeriod < proposal.startingPeriod;\n\n  const inGracePeriod = proposal =>\n    currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH &&\n    currentPeriod < proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH;\n\n  const inVotingPeriod = proposal => currentPeriod >= proposal.startingPeriod && currentPeriod <= proposal.startingPeriod + VOTING_PERIOD_LENGTH;\n\n  const enoughPassingVotes = proposal => Math.round((parseInt(proposal.yesVotes) / (parseInt(proposal.yesVotes) + parseInt(proposal.noVotes))) * 100) > 50\n\n  const passedVotingAndGrace = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH\n\n  const passedVoting = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH\n\n  const lastProposalProcessed = async proposal => {\n    if (proposal.proposalIndex === 0) {\n      return true\n    }\n    const lastProposalFromChain = await moloch.proposalQueue(proposal.proposalIndex - 1);\n    return lastProposalFromChain.processed\n  }\n\n  proposal.proposalIndex = parseInt(proposal.proposalIndex);\n\n  const proposalFromChain = await moloch.proposalQueue(proposal.proposalIndex);\n  console.log('proposalFromChain: ', proposalFromChain);\n  proposal.startingPeriod = parseInt(proposalFromChain.startingPeriod.toString());\n\n  proposal.votingEnds = 0;\n  proposal.gracePeriod = 0;\n  proposal.votingStarts = 0\n\n  proposal.lastProposalProcessed = await lastProposalProcessed(proposal)\n  if (proposal.aborted) {\n    proposal.status = ProposalStatus.Aborted;\n  } else if (proposal.processed && proposal.didPass) {\n    proposal.status = ProposalStatus.Passed;\n  } else if (proposal.processed && !proposal.didPass) {\n    proposal.status = ProposalStatus.Failed;\n  } else if (inGracePeriod(proposal)) {\n    proposal.status = ProposalStatus.GracePeriod;\n    proposal.gracePeriod = proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH - currentPeriod;\n  } else if (inVotingPeriod(proposal)) {\n    proposal.status = ProposalStatus.VotingPeriod;\n    proposal.votingEnds = proposal.startingPeriod + VOTING_PERIOD_LENGTH - currentPeriod;\n  } else if (inQueue(proposal)) {\n    proposal.status = ProposalStatus.InQueue;\n    proposal.votingStarts = proposal.startingPeriod - currentPeriod\n  } else if (passedVotingAndGrace(proposal)) {\n    proposal.status = ProposalStatus.ReadyForProcessing\n  } else {\n    proposal.status = ProposalStatus.Unknown\n  }\n\n  proposal.votingEnded = passedVoting(proposal);\n  proposal.graceEnded = passedVotingAndGrace(proposal);\n\n  proposal.readyForProcessing = false;\n  if (\n    proposal.status === ProposalStatus.InQueue &&\n    passedVotingAndGrace(proposal) &&\n    enoughPassingVotes(proposal) &&\n    proposal.lastProposalProcessed\n  ) {\n    proposal.readyForProcessing = true;\n  }\n\n  try {\n    let details = JSON.parse(proposalFromChain.details);\n    proposal.title = details.title || proposalFromChain.details || \"\";\n    proposal.description = details.description || \"\";\n  } catch (e) {\n    console.log(\n      `Could not parse details from proposal.proposalIndex: ${proposal.proposalIndex} proposalFromChain: ${JSON.stringify(\n        proposalFromChain,\n        null,\n        2\n      )}`\n    );\n    proposal.title = proposalFromChain.details || \"\"\n    proposal.description = \"\"\n  }\n\n  return proposal;\n}\n","import React, { Component } from \"react\";\nimport { Divider, Grid, Icon, Segment, Button, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport hood from \"assets/hood.png\";\n\nimport ProgressBar from \"./ProgressBar\";\n\nimport gql from \"graphql-tag\";\nimport { withApollo } from \"react-apollo\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { getMoloch } from \"../web3\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES } from \"../helpers/graphQlQueries\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nexport const Vote = {\n  Null: 0, // default value, counted as abstention\n  Yes: 1,\n  No: 2\n}\n\nconst MemberAvatar = ({ member, shares }) => {\n  return (\n    <Grid.Column mobile={4} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={member}>\n      <Link to={`/members/${member}`} className=\"uncolored\">\n        <Image src={hood} centered />\n        <p className=\"name\">{!member ? \"\" : member.length > 10 ? member.substring(0, 10) + \"...\" : member}</p>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_DETAIL = gql`\n  query Proposal($id: String!) {\n    proposal(id: $id) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes {\n        member {\n          id\n          shares\n        }\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nclass ProposalDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      proposal: {\n        tokenTribute: 0,\n        sharesRequested: 0,\n        votingEnded: true,\n        graceEnded: true,\n        yesVotes: 0,\n        noVotes: 0,\n        status: ProposalStatus.InQueue\n      },\n      user: {\n        id: 0,\n        shares: 0,\n        isActive: false\n      },\n      moloch: null\n    };\n\n    this.fetchData(props);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  async fetchData(props) {\n    const { client, loggedInUser } = props;\n    const proposalResult = await client.query({\n      query: GET_PROPOSAL_DETAIL,\n      variables: { id: this.props.match.params.id }\n    });\n\n    const userResult = await client.query({\n      query: GET_LOGGED_IN_USER,\n      variables: { address: loggedInUser }\n    });\n    this.setState({\n      user: userResult.data.member\n    });\n\n    let proposal = proposalResult.data.proposal\n    if (proposalResult.data.proposal.status === ProposalStatus.Unknown) {\n      const onChain = await getProposalDetailsFromOnChain(proposalResult.data.proposal);\n      const result = await client.mutate({\n        mutation: SET_PROPOSAL_ATTRIBUTES,\n        variables: {\n          id: proposalResult.data.proposal.id,\n          status: onChain.status,\n          title: onChain.title,\n          description: onChain.description || \"\"\n        }\n      });\n      proposal = {\n        ...proposalResult.data.proposal,\n        status: result.data.setAttributes.status,\n        title: result.data.setAttributes.title,\n        description: result.data.setAttributes.description\n      }\n    }\n    this.setState({\n      proposal\n    });\n  }\n\n  loadData(responseJson) {\n    let proposal = responseJson.items.member ? responseJson.items.member : responseJson.items;\n    this.setState({ proposal_detail: proposal, isAccepted: proposal.status === \"accepted\" || proposal.status === \"active\" ? true : false });\n    let voters = this.state.proposal_detail.voters ? this.state.proposal_detail.voters : [];\n    let userHasVoted = voters.find(voter => voter.member === this.state.loggedUser) ? true : false;\n    this.setState({ userHasVoted });\n    this.calculateVote(voters);\n  }\n\n  handleNo = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.No).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleYes = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.Yes).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleProcess = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.processProposal(proposal.proposalIndex).send({ from: user.id })\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_detail\">\n        <Grid centered columns={16}>\n          <Segment className=\"transparent box segment\" textAlign=\"center\">\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <span className=\"title\">{this.state.proposal.title ? this.state.proposal.title : \"N/A\"}</span>\n              </Grid.Column>\n            </Grid>\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={4}>\n                <div className=\"subtext description\">{this.state.proposal.description ? this.state.proposal.description : \"N/A\"}</div>\n                <Grid columns=\"equal\" className=\"tokens\">\n                  <Grid.Row>\n                    <Grid.Column className=\"tributes\">\n                      <Segment className=\"pill\" textAlign=\"center\">\n                        <Icon name=\"ethereum\" />\n                        {this.state.proposal.tokenTribute} ETH\n                      </Segment>\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <p className=\"subtext voting\">Shares</p>\n                    <p className=\"amount\">{this.state.proposal.sharesRequested}</p>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\">\n                    <p className=\"subtext\">Total USD Value</p>\n                    <p className=\"amount\">{formatter.format(0)}</p>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={2}>\n                <Divider vertical />\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={6}>\n                <Grid columns={16}>\n                  <Grid.Column textAlign=\"left\" mobile={16} tablet={8} computer={8} className=\"pill_column\">\n                    <span className=\"pill\">\n                      {this.state.proposal.votingEnded ? (\n                        <span className=\"subtext\">Voting Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Voting Ends: </span>\n                          <span>\n                            {this.state.proposal.votingEnds ? this.state.proposal.votingEnds : \"-\"} period\n                            {this.state.proposal.votingEnds === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\" className=\"pill_column grace\" mobile={16} tablet={8} computer={8}>\n                    <span className=\"pill\">\n                      {this.state.proposal.graceEnded ? (\n                        <span className=\"subtext\">Grace Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Grace Period Ends: </span>\n                          <span>\n                            {this.state.proposal.gracePeriod ? this.state.proposal.gracePeriod : \"-\"} period\n                            {this.state.proposal.gracePeriod === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                </Grid>\n                <Grid columns={16} className=\"member_list\">\n                  <Grid.Row>\n                    <Grid.Column mobile={16} tablet={16} computer={16} className=\"pill_column\">\n                      {this.state.proposal.votes && this.state.proposal.votes.length > 0 ? (\n                        <Grid>\n                          <Grid.Row className=\"members_row\">\n                            {/* centered */}\n                            {this.state.proposal.votes.map((vote, idx) => <MemberAvatar member={vote.member.id} shares={vote.member.shares} key={idx} />)}\n                          </Grid.Row>\n                        </Grid>\n                      ) : null}\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid>\n                  <Grid.Column>\n                    <ProgressBar yes={parseInt(this.state.proposal.yesVotes)} no={parseInt(this.state.proposal.noVotes)} />\n                  </Grid.Column>\n                </Grid>\n                <Grid columns=\"equal\" centered>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleNo}\n                    >\n                      Vote No\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleYes}\n                    >\n                      Vote Yes\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button className=\"btn\" color=\"grey\" onClick={this.handleProcess} disabled={!this.state.proposal.readyForProcessing}>\n                      Process Proposal\n                    </Button>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid>\n          </Segment>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withApollo(ProposalDetail);\n","import React from \"react\";\nimport { Segment, Grid, Button } from \"semantic-ui-react\";\nimport { Route, Switch, Link } from \"react-router-dom\";\n\nimport ProposalDetail from \"./ProposalDetail\";\nimport ProgressBar from \"./ProgressBar\";\nimport { Query, withApollo } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES, GET_CURRENT_PERIOD, GET_TOTAL_SHARES, GET_SHARE_VALUE } from \"../helpers/graphQlQueries\";\nimport { currencyFormatter } from \"../helpers/currency\";\nimport { utils } from \"ethers\";\n\nfunction getProposalCountdownText(proposal) {\n  switch (proposal.status) {\n    case ProposalStatus.InQueue:\n      return (\n        <>\n          <span className=\"subtext\">Voting Begins: </span>\n          <span>\n            {proposal.votingStarts ? proposal.votingStarts : \"-\"} period{proposal.votingStarts === 1 ? null : \"s\"}\n          </span>\n        </>\n      )\n    case ProposalStatus.VotingPeriod:\n      return (\n        <>\n          <span className=\"subtext\">Voting Ends: </span>\n          <span>\n            {proposal.votingEnds ? proposal.votingEnds : \"-\"} period{proposal.votingEnds === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    case ProposalStatus.GracePeriod:\n      return (\n        <>\n          <span className=\"subtext\">Grace Period Ends: </span>\n          <span>\n            {proposal.gracePeriod ? proposal.gracePeriod : \"-\"} period{proposal.gracePeriod === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    default:\n      return <></>;\n  }\n}\n\nconst ProposalCard = ({ proposal, totalShares, shareValue = 0 }) => {\n  let id = proposal.id;\n  return (\n    <Grid.Column mobile={16} tablet={8} computer={5}>\n      <Link to={{ pathname: `/proposals/${id}` }} className=\"uncolored\">\n        <Segment className=\"blurred box\">\n          <p className=\"name\">{proposal.title ? proposal.title : \"N/A\"}</p>\n          <p className=\"subtext description\">{proposal.description ? proposal.description : \"N/A\"}</p>\n          <Grid columns=\"equal\" className=\"value_shares\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n                <p className=\"amount\">{proposal.sharesRequested}</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Total Value</p>\n                <p className=\"amount\">{currencyFormatter.format(utils.bigNumberify(proposal.sharesRequested).mul(shareValue).toString())}</p>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\" className=\"deadlines\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <Segment className=\"voting pill\" textAlign=\"center\">\n                  {getProposalCountdownText(proposal)}\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <ProgressBar totalShares={totalShares} yes={parseInt(proposal.yesVotes)} no={parseInt(proposal.noVotes)} />\n        </Segment>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_LIST = gql`\n  {\n    proposals(orderBy: proposalIndex, orderDirection: desc) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n`;\nclass ProposalList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      proposals: [],\n      loading: true,\n      totalShares: 0\n    };\n  }\n\n  async componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData(props) {\n    const { client } = this.props;\n    this.setState({\n      loading: true\n    });\n    const { data: proposalData } = await client.query({\n      query: GET_PROPOSAL_LIST\n    });\n\n    const { data: currentPeriodData } = await client.query({\n      query: GET_CURRENT_PERIOD\n    });\n\n    const { data: totalSharesData } = await client.query({\n      query: GET_TOTAL_SHARES\n    });\n\n    const { data: shareValueData } = await client.query({\n      query: GET_SHARE_VALUE\n    });\n    try {\n      await this.determineProposalStatuses(client, proposalData.proposals, currentPeriodData.currentPeriod);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.setState({\n        loading: false,\n        totalShares: +totalSharesData.totalShares,\n        shareValue: shareValueData.shareValue\n      });\n    }\n  }\n\n  determineProposalStatuses = async (client, proposals, currentPeriod) => {\n    if (!proposals || proposals.length === 0) {\n      return;\n    }\n\n    const fullProps = [];\n    for (const proposal of proposals) {\n      if (proposal.status === ProposalStatus.Unknown) {\n        const fullProp = await getProposalDetailsFromOnChain(proposal, currentPeriod);\n        const result = await client.mutate({\n          mutation: SET_PROPOSAL_ATTRIBUTES,\n          variables: {\n            id: proposal.id,\n            status: fullProp.status,\n            title: fullProp.title,\n            description: fullProp.description,\n            gracePeriod: fullProp.gracePeriod,\n            votingEnds: `${fullProp.votingEnds}`,\n            votingStarts: `${fullProp.votingStarts}`,\n            readyForProcessing: fullProp.readyForProcessing\n          }\n        });\n        fullProps.push({\n          ...proposal,\n          status: result.data.setAttributes.status,\n          title: result.data.setAttributes.title,\n          description: result.data.setAttributes.description,\n          gracePeriod: result.data.setAttributes.gracePeriod,\n          votingEnds: result.data.setAttributes.votingEnds,\n          votingStarts: result.data.setAttributes.votingStarts,\n          readyForProcessing: result.data.setAttributes.readyForProcessing\n        });\n      } else {\n        fullProps.push(proposal);\n      }\n    }\n\n    this.setState({\n      proposals: fullProps\n    });\n    return;\n  };\n\n  render() {\n    const { isActive } = this.props;\n    const { proposals, totalShares } = this.state;\n    const gracePeriod = proposals.filter(p => p.status === ProposalStatus.GracePeriod);\n    const votingPeriod = proposals.filter(p => p.status === ProposalStatus.VotingPeriod);\n    const inQueue = proposals.filter(p => p.status === ProposalStatus.InQueue);\n    const completed = proposals.filter(\n      p => p.status === ProposalStatus.Aborted || p.status === ProposalStatus.Passed || p.status === ProposalStatus.Failed\n    );\n    return (\n      <div id=\"proposal_list\">\n        <React.Fragment>\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={8} computer={4} textAlign=\"right\" floated=\"right\" className=\"submit_button\">\n              <Link to={isActive ? \"/proposalsubmission\" : \"/proposals\"} className=\"link\">\n                <Button size=\"large\" color=\"red\" disabled={!isActive}>\n                  New Proposal\n                </Button>\n              </Link>\n            </Grid.Column>\n          </Grid>\n          {this.state.loading ? (\n            <>Loading proposals...</>\n          ) : (\n            <>\n              {/* Grace Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {gracePeriod.length} Proposal{gracePeriod.length > 1 || gracePeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Grace Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {gracePeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Voting Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {votingPeriod.length} Proposal{votingPeriod.length > 1 || votingPeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Voting Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {votingPeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* In Queue */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {inQueue.length} Proposal{inQueue.length > 1 || inQueue.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Queue</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {inQueue.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Completed */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {completed.length} Proposal{completed.length > 1 || completed.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">Completed</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {completed.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n            </>\n          )}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\nconst ProposalListHOC = withApollo(ProposalList);\n\nconst ProposalListView = props => {\n  return (\n    <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n      {({ loading, error, data }) => {\n        if (loading) return \"Loading...\";\n        if (error) throw new Error(`Error!: ${error}`);\n        return (\n          <Switch>\n            <Route exact path=\"/proposals\" render={() => <ProposalListHOC isActive={data.member ? data.member.isActive : false} />} />\n            <Route path=\"/proposals/:id\" component={ProposalDetail} />\n          </Switch>\n        );\n      }}\n    </Query>\n  );\n};\n\nexport default ProposalListView;\n","import React from \"react\";\nimport { Divider, Grid, Segment, Image, Icon, Label, Header } from \"semantic-ui-react\";\n\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { Vote } from \"./ProposalDetail\";\nimport { utils } from \"ethers\";\nimport { convertWeiToDollars } from \"../helpers/currency\";\nimport { adopt } from \"react-adopt\";\nimport { GET_SHARE_VALUE, GET_EXCHANGE_RATE } from \"../helpers/graphQlQueries\";\n\nconst GET_MEMBER_DETAIL = gql`\n  query Member($id: String!) {\n    member(id: $id) {\n      id\n      shares\n      tokenTribute\n    }\n  }\n`;\n\nconst Composed = adopt({\n  memberDetail: ({ render, name }) => (\n    <Query query={GET_MEMBER_DETAIL} variables={{ id: name }}>\n      {render}\n    </Query>\n  ),\n  shareValue: ({ render }) => <Query query={GET_SHARE_VALUE}>{render}</Query>,\n  exchangeRate: ({ render }) => <Query query={GET_EXCHANGE_RATE}>{render}</Query>\n});\n\nconst MemberDetail = ({ name, loggedInUser }) => (\n  <Composed name={name}>\n    {({ memberDetail, shareValue, exchangeRate }) => {\n      if (memberDetail.loading || shareValue.loading || exchangeRate.loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (memberDetail.error) throw new Error(`Error!: ${memberDetail.error}`);\n      if (shareValue.error) throw new Error(`Error!: ${shareValue.error}`);\n      if (exchangeRate.error) throw new Error(`Error!: ${exchangeRate.error}`);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\">\n            <Grid.Column>\n              <p className=\"subtext\">Shares</p>\n              <p className=\"amount\">{memberDetail.data.member.shares}</p>\n            </Grid.Column>\n            <Grid.Column textAlign=\"right\">\n              <p className=\"subtext\">Total Value</p>\n              <p className=\"amount\">\n                {convertWeiToDollars(\n                  utils\n                    .bigNumberify(memberDetail.data.member.shares)\n                    .mul(shareValue.data.shareValue)\n                    .toString(),\n                  exchangeRate.data.exchangeRate\n                )}\n              </p>\n            </Grid.Column>\n          </Grid>\n          <Grid>\n            <Grid.Column textAlign=\"center\" className=\"avatar\">\n              <Image centered src={loggedInUser === name ? bull : hood} size=\"tiny\" />\n            </Grid.Column>\n          </Grid>\n          <p className=\"subtext\">Tribute</p>\n          <Grid columns=\"equal\">\n            <Grid.Row>\n              <Grid.Column>\n                <Segment className=\"pill\" textAlign=\"center\">\n                  <Icon name=\"ethereum\" />\n                  {utils.formatEther(memberDetail.data.member.tokenTribute)} ETH\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Composed>\n);\n\nconst GET_PROPOSAL_HISTORY = gql`\n  query Proposals($id: String!) {\n    proposals {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      votes(where: { memberAddress: $id }) {\n        id\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nconst ProposalDetail = ({ name }) => (\n  <Query query={GET_PROPOSAL_HISTORY} variables={{ id: name }}>\n    {({ loading, error, data }) => {\n      if (loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (error) throw new Error(`Error!: ${error}`);\n      console.log(\"data: \", data);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\" textAlign=\"center\">\n            <Grid.Row className=\"subtext\" style={{ fontSize: 20 }}>\n              History\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\">\n            <Grid.Row className=\"header\">\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Proposal Title</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Date</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Tribute Offered</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Vote</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Status</p>\n              </Grid.Column>\n            </Grid.Row>\n            {data.proposals && data.proposals.length > 0 ? (\n              data.proposals.map((p, idx) => {\n                return (\n                  <React.Fragment key={idx}>\n                    <Grid.Row verticalAlign=\"middle\">\n                      <Grid.Column textAlign=\"center\">\n                        {p.votes.uintVote === Vote.Yes && <Label className=\"dot\" circular color=\"green\" empty />}\n                        {/* TODO: is this right? */}\n                        {(p.votes.uintVote === Vote.No || p.votes.uintVote === Vote.Null) && <Label className=\"dot\" circular color=\"red\" empty />}\n                        {p.title}\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{new Date(p.timestamp * 1000).toISOString().slice(0, 10)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.sharesRequested}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{utils.formatEther(p.tokenTribute)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <Header as=\"p\" color={p.vote === 2 ? \"green\" : p.vote === 1 ? \"red\" : null}>\n                          {p.vote === 2 ? \"Y\" : p.vote === 1 ? \"N\" : \"\"}\n                        </Header>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.aborted ? \"Aborted\" : p.processed ? (p.didPass ? \"Passed\" : \"Failed\") : \"Pending\"}</p>\n                      </Grid.Column>\n                    </Grid.Row>\n                    <Divider />\n                  </React.Fragment>\n                );\n              })\n            ) : (\n              <>This member hasn't voted on any proposals yet.</>\n            )}\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Query>\n);\n\nconst MemberDetailView = props => (\n  <div id=\"member_detail\">\n    <p className=\"title\"> {props.match.params.name} </p>\n    <Divider />\n    <Grid columns={16}>\n      <Grid.Row className=\"details\">\n        <Grid.Column mobile={16} tablet={16} computer={6} className=\"user\">\n          <MemberDetail name={props.match.params.name} loggedInUser={props.loggedInUser} />\n        </Grid.Column>\n        <Grid.Column mobile={16} tablet={16} computer={10} className=\"proposals\">\n          <ProposalDetail name={props.match.params.name} />\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  </div>\n);\n\nexport default MemberDetailView;\n","import React from \"react\";\nimport { Grid, Image, Divider } from \"semantic-ui-react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport MemberDetail from \"./MemberDetail\";\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { GET_LOGGED_IN_USER, GET_MEMBERS } from \"../helpers/graphQlQueries\";\n\nconst MemberAvatar = ({ address, shares }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={address}>\n    <Link to={`/members/${address}`} className=\"uncolored\">\n      <Image src={hood} centered size=\"tiny\" />\n      <p className=\"name\">{!address ? \"\" : address.length > 10 ? address.substring(0, 10) + \"...\" : address}</p>\n      <p className=\"subtext\">{shares} shares</p>\n    </Link>\n  </Grid.Column>\n);\n\nconst LoggedInUser = props => (\n  <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.member && data.member.isActive ? (\n        <Link to={`/members/${data.member.id}`} className=\"uncolored\">\n          <Image centered src={bull} size=\"tiny\" />\n          <p className=\"name\">{!data.member.id ? \"\" : data.member.id.length > 10 ? data.member.id.substring(0, 10) + \"...\" : data.member.id}</p>\n          <p className=\"subtext\">{data.member.shares ? data.member.shares : 0} shares</p>\n        </Link>\n      ) : (\n        <div />\n      );\n    }}\n  </Query>\n);\n\nconst GET_ELDERS = gql`\n  {\n    members(where: { shares_gte: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Elders = () => (\n  <Query query={GET_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((elder, idx) => <MemberAvatar address={elder.id} shares={elder.shares} key={idx} />)\n      ) : (\n        <>No elders to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst GET_NON_ELDERS = gql`\n  {\n    members(where: { shares_gt: 0, shares_lt: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Contributors = () => (\n  <Query query={GET_NON_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((contributor, idx) => <MemberAvatar address={contributor.id} shares={contributor.shares} key={idx} />)\n      ) : (\n        <>No contributors to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst MemberList = props => (\n  <Query query={GET_MEMBERS}>\n    {({ loading, error, data }) => {\n      let members;\n      if (error) {\n        members = \"NA\";\n        console.error(`Could not load members: ${error}`);\n      } else if (loading) {\n        members = \"-\";\n      } else {\n        members = data.members.length;\n      }\n      return (\n        <div id=\"member_list\">\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={6} computer={6} textAlign=\"left\" className=\"member_list_header\">\n              <p className=\"subtext\">{members} Members</p>\n            </Grid.Column>\n\n            {/* <Grid.Column mobile={16} tablet={10} computer={10} textAlign=\"right\" className=\"submit_button\">\n              <Link to='/membershipproposalsubmission' className=\"link\">\n                <Button size='large' color='red' disabled={(props.user.status === 'founder') ? true : false}>Membership Proposal</Button>\n              </Link>\n            </Grid.Column> */}\n          </Grid>\n\n          <Grid>\n            <Grid.Column textAlign=\"center\">\n              <LoggedInUser {...props} />\n            </Grid.Column>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Elders (100+ shares)</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Elders />\n            </Grid.Row>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Contributors</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Contributors />\n            </Grid.Row>\n          </Grid>\n        </div>\n      );\n    }}\n  </Query>\n);\n\nconst MemberListView = higherProps => (\n  <Switch>\n    <Route exact path=\"/members\" render={props => <MemberList {...props} loggedInUser={higherProps.loggedInUser} />} />\n    <Route path=\"/members/:name\" render={props => <MemberDetail {...props} loggedInUser={higherProps.loggedInUser} />} />\n  </Switch>\n);\n\nexport default MemberListView;\n","import React, { Component } from \"react\";\nimport { Grid, Button } from \"semantic-ui-react\";\n\nimport { initMetmask, initGnosisSafe } from \"../web3\";\nimport { ApolloConsumer } from \"react-apollo\";\n\nlet coinbase;\n\nexport default class Login extends Component {\n  // bypass auth for now\n  loginWithMetamask = async client => {\n    const web3 = await initMetmask();\n    if (!web3) {\n      return\n    }\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  loginWithGnosisSafe = async client => {\n    const web3 = initGnosisSafe();\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  doLoginBypassAuth = async (client, web3) => {\n    coinbase = (await web3.listAccounts())[0];\n\n    if (!coinbase) {\n      alert(\"Could not retrieve address from Gnosis Safe/MetaMask, is it configured and this domain whitelisted?\");\n    } else {\n      // Try getting a user by their public address.\n      client.writeData({\n        data: {\n          loggedInUser: coinbase.toLowerCase()\n        }\n      });\n      this.props.loginComplete()\n      this.props.history.push(\"/\");\n    }\n  };\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <div id=\"login\">\n            <Grid columns={1} centered>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithMetamask(client)}>\n                  Connect With Web3\n                </Button>\n              </Grid.Row>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithGnosisSafe(client)}>\n                  Connect With Web3 (Gnosis Safe)\n                </Button>\n              </Grid.Row>\n            </Grid>\n          </div>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Button, Divider, Form, Grid, Input, Segment, GridColumn } from \"semantic-ui-react\";\nimport { getMoloch } from \"../web3\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nclass AssetsFields extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAsset = this.handleAsset.bind(this);\n    this.deleteAsset = this.deleteAsset.bind(this);\n  }\n\n  handleAsset(event, { value, name }) {\n    this.props.onHandleAsset({ value, name, assetIndex: this.props.assetIndex });\n  }\n\n  deleteAsset() {\n    this.props.onHandleDeleteAsset({ assetIndex: this.props.assetIndex });\n  }\n\n  render() {\n    return (\n      <Grid.Row className=\"asset_field_row\">\n        {/* <Grid.Column mobile={14} tablet={5} computer={7} className=\"asset_field_grid membership\"> */}\n        <Grid.Column width={2} textAlign=\"left\" className=\"asset_field_grid membership\">\n          {/* <Input name=\"asset\" className=\"asset icon_asset\" icon=\"ethereum\" iconPosition=\"left\" placeholder=\"ETH, BTC, Token address\" onChange={this.handleAsset} type=\"text\" /> */}\n          {/* <Input icon=\"ethereum\" iconPosition=\"left\" name=\"asset\" className=\"asset icon_asset\" type=\"text\" value={this.props.assets.symbol} disabled={true} /> */}\n          <div className=\"subtext\" style={{ paddingTop: 10, paddingRight: 10 }}>\n            {this.props.assets.symbol}\n          </div>\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid mobile_delete_icon\" textAlign=\"right\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n        <Grid.Column mobile={14} tablet={10} computer={7} className=\"asset_field_grid\">\n          <Input name=\"amount\" className=\"asset_amount\" placeholder=\"Enter Amount\" type=\"number\" onChange={this.handleAsset} />\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid computer_delete_icon\" textAlign=\"center\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n      </Grid.Row>\n    );\n  }\n}\n\nexport default class ProposalSubmission extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      address: props.loggedInUser,\n      title: \"\",\n      description: \"\",\n      shares: 0,\n      tribute: 0, // TODO: this will be calculated with the blockchain\n      assets: [\n        {\n          asset: \"ETH\",\n          symbol: \"ETH\",\n          amount: 0,\n          logo: \"https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png\"\n        }\n      ],\n      formErrors: { title: \"\", description: \"\", assets: \"\", shares: \"\" },\n      titleValid: false,\n      descriptionValid: false,\n      assetsValid: false,\n      sharesValid: false,\n      formValid: false\n    };\n\n    this.addAsset = this.addAsset.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleAsset = this.handleAsset.bind(this);\n    this.handleDeleteAsset = this.handleDeleteAsset.bind(this);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let titleValid = this.state.titleValid;\n    let descriptionValid = this.state.descriptionValid;\n    let assetsValid = this.state.assetsValid;\n    let sharesValid = this.state.sharesValid;\n\n    switch (fieldName) {\n      case \"title\":\n        titleValid = value !== \"\";\n        fieldValidationErrors.title = titleValid ? \"\" : \"Title field is invalid\";\n        break;\n      case \"description\":\n        descriptionValid = value !== \"\";\n        fieldValidationErrors.description = descriptionValid ? \"\" : \"Description field is invalid\";\n        break;\n      case \"assets\":\n        Object.keys(value).map(key => {\n          for (var i in value[key]) {\n            if (Object.keys(value[key]).length <= 1) {\n              assetsValid = false;\n              return false;\n            } else {\n              if (value[key][i] === null || value[key][i] === \"\") {\n                assetsValid = false;\n                return false;\n              }\n            }\n          }\n          assetsValid = true;\n          return true;\n        });\n        fieldValidationErrors.assets = assetsValid ? \"\" : \"Asset is invalid\";\n        break;\n      case \"shares\":\n        sharesValid = value > 0;\n        fieldValidationErrors.shares = sharesValid ? \"\" : \"Shares field is invalid\";\n        break;\n      default:\n        break;\n    }\n    this.setState(\n      {\n        formErrors: fieldValidationErrors,\n        titleValid: titleValid,\n        descriptionValid: descriptionValid,\n        assetsValid: assetsValid,\n        sharesValid: sharesValid\n      },\n      this.validateForm\n    );\n  }\n\n  validateForm() {\n    this.setState({ formValid: this.state.titleValid && this.state.descriptionValid && this.state.assetsValid && this.state.sharesValid });\n  }\n\n  addAsset() {\n    let assets = this.state.assets ? this.state.assets : [];\n    assets.push({});\n\n    this.setState({ assets });\n  }\n\n  handleInput(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    if (name === \"shares\") {\n      this.setState({ [name]: parseInt(value) }, () => {\n        this.validateField(name, value);\n      });\n    } else {\n      this.setState({ [event.target.name]: event.target.value }, () => {\n        this.validateField(name, value);\n      });\n    }\n  }\n\n  handleAsset(event) {\n    let assets = this.state.assets;\n    assets[event.assetIndex][event.name] = event.value;\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n    this.setState({ tribute: 0 * event.value });\n  }\n\n  handleDeleteAsset(event) {\n    let assets = this.state.assets;\n    assets.splice(event.assetIndex, 1);\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n  }\n\n  async handleSubmit() {\n    const { moloch, formValid, address, title, description, shares, tribute } = this.state\n\n    if (formValid) {\n      try {\n        await moloch.methods.submitProposal(address, tribute, shares, JSON.stringify({ title, description })).send({ from: address })\n      } catch (e) {\n        console.error(e);\n        alert(\"Error processing proposal\");\n      }\n    } else {\n      alert(\"Please fill any missing fields.\");\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_submission\">\n        <Form>\n          <Grid centered columns={16}>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Input\n                  name=\"title\"\n                  transparent\n                  size=\"big\"\n                  inverted\n                  placeholder=\"Proposal Title\"\n                  onChange={this.handleInput}\n                  value={this.state.title}\n                />\n                <Divider />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Segment className=\"blurred box\">\n                  <Form.Input\n                    name=\"shares\"\n                    label=\"Request voting shares\"\n                    placeholder=\"Shares\"\n                    fluid\n                    type=\"number\"\n                    onChange={this.handleInput}\n                    value={this.state.shares}\n                  />\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <Segment className=\"blurred box\">\n                      <Form.TextArea\n                        name=\"description\"\n                        label=\"Description\"\n                        placeholder=\"Type here\"\n                        rows={15}\n                        onChange={this.handleInput}\n                        value={this.state.description}\n                      />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={16} computer={8}>\n                    <Segment className=\"blurred box\">\n                      <Grid columns={16}>\n                        <Grid.Column width={14}>\n                          <div className=\"subtext\">Request Amount</div>\n                        </Grid.Column>\n                        {/* <Grid.Column width={2}>\n                                                    <div className=\"subtext\">\n                                                        <Icon name='add' className=\"add_icon\" link onClick={this.addAsset} />\n                                                    </div>\n                                                </Grid.Column> */}\n                      </Grid>\n                      <Grid columns={3} className=\"assets_field\">\n                        {this.state.assets.map((row, i) => (\n                          <AssetsFields\n                            key={i}\n                            assetIndex={i}\n                            assets={row}\n                            onHandleAsset={this.handleAsset}\n                            onHandleDeleteAsset={this.handleDeleteAsset}\n                          />\n                        ))}\n                      </Grid>\n                      <Divider />\n                      <Grid columns=\"equal\" className=\"value_shares\">\n                        <Grid.Row>\n                          <Grid.Column textAlign=\"center\">\n                            <p className=\"subtext\">Tribute Value</p>\n                            <p className=\"amount\">{formatter.format(this.state.tribute)}</p>\n                          </Grid.Column>\n                        </Grid.Row>\n                      </Grid>\n                    </Segment>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <GridColumn mobile={16} tablet={8} computer={8} className=\"submit_button\">\n                <Button size=\"large\" color=\"red\" onClick={this.handleSubmit}>\n                  Submit Proposal\n                </Button>\n              </GridColumn>\n            </Grid.Row>\n          </Grid>\n        </Form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Grid, Image, Divider, Button } from \"semantic-ui-react\";\nimport ethereumIcon from \"assets/ethereumIcon.png\";\nimport { Query } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst currencies = [\n  {\n    name: \"ETH\",\n    shares: 508,\n    value: 32000,\n    icon: ethereumIcon\n  }\n];\n\nconst CurrencyElement = ({ name, shares, icon, value }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"currency_element\">\n    <Image src={icon} centered size=\"tiny\" circular />\n    <p className=\"name\">{name}</p>\n    <p className=\"shares\">{shares}</p>\n    <p className=\"subtext\">{\"$\" + value}</p>\n  </Grid.Column>\n);\n\nexport default class GuildBank extends React.Component {\n  state = {\n    isActive: true\n  };\n\n  redeemToken() {}\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"guild_bank\">\n              <Grid>\n                <Grid.Column textAlign=\"center\" className=\"guild_value\">\n                  <p className=\"subtext\">Guild Bank Value</p>\n                  <p className=\"amount\">$53,640,918</p>\n                  <Button size=\"large\" color=\"grey\" disabled={data.member.isActive && this.state.isActive ? false : true} onClick={this.redeemToken}>\n                    Redeem Loot Token\n                  </Button>\n                </Grid.Column>\n              </Grid>\n\n              <Grid>\n                <Grid.Row />\n                <Divider />\n                <Grid.Row centered>\n                  {currencies.map((elder, idx) => (\n                    <CurrencyElement {...elder} key={idx} />\n                  ))}\n                </Grid.Row>\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import { ProposalStatus } from \"./helpers/proposals\";\nimport gql from \"graphql-tag\";\n\nexport const resolvers = {\n  Proposal: {\n    status: () => ProposalStatus.Unknown,\n    title: () => \"\",\n    description: () => \"\",\n    gracePeriod: () => 0,\n    votingEnds: () => 0,\n    votingStarts: () => 0,\n    readyForProcessing: () => false\n  },\n  Mutation: {\n    setAttributes: (_, variables, { cache }) => {\n      const id = `Proposal:${variables.id}`;\n      console.log('variables: ', variables);\n      const fragment = gql`\n        fragment getMeta on Proposal {\n          status\n          title\n          description\n          gracePeriod\n          votingEnds\n          votingStarts\n          readyForProcessing\n        }\n      `;\n      const proposal = cache.readFragment({ fragment, id });\n      const data = {\n        ...proposal,\n        status: variables.status,\n        title: variables.title,\n        description: variables.description,\n        gracePeriod: variables.gracePeriod,\n        votingEnds: variables.votingEnds,\n        votingStarts: variables.votingStarts,\n        readyForProcessing: variables.readyForProcessing\n      };\n      cache.writeData({ id, data });\n      return data;\n    }\n  }\n};\n","import gql from \"graphql-tag\";\n\nexport const typeDefs = gql`\n  extend type Proposal {\n    status: String\n    title: String\n    description: String\n    gracePeriod: Number\n    votingEnds: Number\n    votingStarts: Number\n    readyForProcessing: Bool\n  }\n\n  extend type Query {\n    proposalsWithStatus: [Proposal]\n  }\n`;","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport Background from \"./components/Background\";\nimport Header from \"./components/Header\";\nimport Wrapper from \"./components/Wrapper\";\nimport Home from \"./components/Home\";\nimport ProposalList from \"./components/ProposalList\";\nimport MemberList from \"./components/MemberList\";\nimport ProposalSubmission from \"./components/ProposalSubmission\";\nimport GuildBank from \"./components/GuildBank\";\nimport Login from \"./components/Login\";\nimport { ApolloProvider, Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { resolvers } from \"./resolvers\";\nimport { typeDefs } from \"./schema\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { GET_METADATA } from \"./helpers/graphQlQueries\";\nimport { getMedianizer, getMoloch, getToken } from \"./web3\";\nimport { utils } from \"ethers\";\nimport { adopt } from 'react-adopt'\n\nconsole.log(process.env);\n\nconst cache = new InMemoryCache();\n\nconst client = new ApolloClient({\n  cache,\n  link: new HttpLink({\n    uri: process.env.REACT_APP_GRAPH_NODE_URI\n  }),\n  resolvers,\n  typeDefs\n});\n\ncache.writeData({\n  data: {\n    loggedInUser: \"\",\n    guildBankValue: \"\",\n    shareValue: \"\",\n    totalShares: \"\",\n    currentPeriod: \"\",\n    exchangeRate: \"\"\n  }\n})\n\nconst IS_LOGGED_IN = gql`\n  query IsUserLoggedIn {\n    loggedInUser @client\n  }\n`;\n\nconst Composed = adopt({\n  loggedInUserData: ({ render }) => <Query query={IS_LOGGED_IN}>{ render }</Query>,\n  metadata: ({ render }) => <Query query={GET_METADATA}>{ render }</Query>,\n})\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restored: false,\n      exchangeRate: \"0\",\n      totalShares: \"0\",\n      guildBankValue: \"0\",\n    };\n  }\n\n  async componentDidMount() {\n    // await persistor.restore();\n    await this.populateData(true)\n    this.setState({ restored: true });\n  }\n\n  async populateData(refetch) {\n    let { data: { loggedInUser } } = await client.query({\n      query: IS_LOGGED_IN\n    });\n\n    if (!loggedInUser) {\n      console.log(`User not logged in, cannot fetch`)\n      return\n    }\n\n    let { data: { exchangeRate, totalShares, currentPeriod, guildBankValue, shareValue } } = await client.query({\n      query: GET_METADATA\n    });\n\n    if (!exchangeRate || refetch) {\n      const medianizer = await getMedianizer();\n      exchangeRate = (await medianizer.compute())[0];\n      exchangeRate = utils.bigNumberify(exchangeRate)\n    }\n\n    if (!totalShares || !currentPeriod || refetch) {\n      const moloch = await getMoloch();\n      totalShares = await moloch.totalShares();\n      currentPeriod = await moloch.getCurrentPeriod();\n    }\n\n    const token = await getToken();\n    if (!guildBankValue || refetch) {\n      guildBankValue = await token.balanceOf(process.env.REACT_APP_GUILD_BANK_ADDRESS);\n    }\n\n    if (guildBankValue && totalShares) {\n      const ethPerShare = guildBankValue.gt(0) ? totalShares.toNumber() / parseFloat(utils.formatEther(guildBankValue)) : 0 // in eth\n      shareValue = utils.parseEther(ethPerShare.toString()) // in wei\n    }\n\n    const dataToWrite = {\n      guildBankValue: guildBankValue.toString(),\n      shareValue: shareValue.toString(),\n      totalShares: totalShares.toString(),\n      currentPeriod: currentPeriod.toString(),\n      exchangeRate: exchangeRate.toString()\n    }\n    console.log('dataToWrite: ', dataToWrite);\n\n    client.writeData({\n      data: dataToWrite\n    });\n  }\n\n  render() {\n    return this.state.restored ? (\n      <ApolloProvider client={client}>\n        <Router>\n          <Composed>\n            {({ loggedInUserData, metadata }) => {\n              return (\n                <>\n                  <Background />\n                  <Header loggedInUser={loggedInUserData.data.loggedInUser} />\n                  <Wrapper>\n                    <Switch>\n                      <Route\n                        exact\n                        path=\"/\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <Home {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposals\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <ProposalList {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/members\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <MemberList {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposalsubmission\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? (\n                            <ProposalSubmission {...props} loggedInUser={loggedInUserData.data.loggedInUser} />\n                          ) : (\n                            <Redirect to={{ pathname: \"/login\" }} />\n                          )\n                        }\n                      />\n                      <Route\n                        path=\"/guildbank\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <GuildBank {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route path=\"/login\" render={props => <Login {...props} loginComplete={() => this.populateData(true)} />} />\n                      <Route render={props =>\n                          loggedInUserData.data.loggedInUser ? <Home {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                    </Switch>\n                  </Wrapper>\n                </>\n              );\n            }}\n          </Composed>\n        </Router>\n      </ApolloProvider>\n    ) : (\n      <div>Loading!!!</div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport './index.scss';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/hood.ba69d28c.png\";"],"sourceRoot":""}