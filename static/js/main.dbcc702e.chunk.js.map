{"version":3,"sources":["assets/bull.png","assets/ethereumIcon.png","components/Background.js","helpers/graphQlQueries.js","web3.js","components/Header.js","components/Wrapper.js","helpers/currency.js","components/Home.js","components/ProgressBar.js","helpers/proposals.js","components/ProposalDetail.js","components/ProposalList.js","components/MemberDetail.js","components/MemberList.js","components/Login.js","components/ProposalSubmission.js","components/GuildBank.js","resolvers.js","schema.js","App.js","index.js","assets/hood.png"],"names":["module","exports","__webpack_require__","p","Background","react_default","a","createElement","id","className","moloch","token","medianizer","eth","GET_EXCHANGE_RATE","gql","_templateObject","GET_TOTAL_SHARES","_templateObject2","GET_SHARE_VALUE","_templateObject3","_templateObject4","GET_CURRENT_PERIOD","_templateObject5","GET_METADATA","_templateObject6","GET_LOGGED_IN_USER","_templateObject7","GET_MEMBERS","_templateObject8","SET_PROPOSAL_ATTRIBUTES","_templateObject9","MainMenuWrapped","withApollo","props","member","isActive","Fragment","Dropdown","Item","onClick","_handleCloseDropdown","Link","to","concat","Icon","name","Divider","icon","content","_handleOpenDropdown","onLoadChangeDelegateKey","onLoadWithdrawLootToken","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","client","resetStore","stop","this","ChangeDelegateKeyMenu","Header_this","onLoadMain","Form","Input","placeholder","Button","WithdrawLootTokenMenu","Header","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","visibleMenu","visibleRightMenu","setState","topRightMenuContent","_this3","Header_ChangeDelegateKeyMenu","Header_WithdrawLootTokenMenu","_this4","react_apollo_browser_umd","query","variables","address","loggedInUser","_ref2","loading","error","data","Error","Grid","columns","verticalAlign","Column","textAlign","open","onBlur","onFocus","text","substring","Menu","direction","getTopRightMenuContent","Component","Wrapper","_ref","children","molochAbi","require","erc20Abi","medianizerAbi","initMetmask","_initMetmask","apply","arguments","web3Provider","window","ethereum","web3","alert","enable","currentProvider","ethers","providers","Web3Provider","localStorage","setItem","t0","abrupt","initGnosisSafe","provider","SafeProvider","rpcUrl","process","initMoloch","_initMoloch","_callee2","_context2","getItem","sent","Contract","initToken","_initToken","_callee3","_context3","initMedianizer","_initMedianizer","_callee4","_context4","getDefaultProvider","getMoloch","_getMoloch","_callee6","_context6","getToken","_getToken","_callee7","_context7","getMedianizer","_getMedianizer","_callee8","_context8","currencyFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","convertWeiToDollars","weiAmount","exchangeRate","weitoEth","utils","formatEther","exchWeiToEth","format","parseFloat","Home_templateObject","NumMembers","members","console","length","size","color","GET_PROPOSALS","Home_templateObject2","NumProposals","proposals","HomePage","approval","userAddress","handleChange","e","_this","target","value","handleSubmit","_this$state","methods","approve","send","from","_ref3","guildBankValue","totalShares","shareValue","mobile","tablet","computer","Home_NumMembers","Home_NumProposals","Modal","basic","trigger","Content","onSubmit","Field","onChange","type","width","Segment","React","ProgressBar","yes","no","total","percentYes","Math","round","percentNo","position","Progress","percent","top","floated","VOTING_PERIOD_LENGTH","GRACE_PERIOD_LENGTH","ProposalStatus","Unknown","InQueue","VotingPeriod","GracePeriod","Aborted","Passed","Failed","ReadyForProcessing","getProposalDetailsFromOnChain","_x","_x2","_getProposalDetailsFromOnChain","proposal","currentPeriod","inQueue","inGracePeriod","inVotingPeriod","enoughPassingVotes","passedVotingAndGrace","passedVoting","lastProposalProcessed","proposalFromChain","details","parseInt","log","startingPeriod","yesVotes","noVotes","lastProposalFromChain","proposalIndex","proposalQueue","processed","_x3","votingEnds","gracePeriod","aborted","status","didPass","votingStarts","votingEnded","graceEnded","readyForProcessing","title","description","JSON","parse","stringify","formatter","Vote","Null","Yes","No","MemberAvatar","shares","Image","src","hood","centered","GET_PROPOSAL_DETAIL","ProposalDetail_templateObject","ProposalDetail","handleNo","user","submitVote","userHasVoted","handleYes","_this$state2","handleProcess","_this$state3","processProposal","tokenTribute","sharesRequested","fetchData","match","params","proposalResult","userResult","onChain","mutate","mutation","result","objectSpread","setAttributes","responseJson","items","proposal_detail","isAccepted","voters","find","voter","loggedUser","calculateVote","Row","vertical","votes","map","vote","idx","ProposalDetail_MemberAvatar","key","components_ProgressBar","disabled","ProposalCard","_ref$shareValue","pathname","bigNumberify","mul","toString","getProposalCountdownText","GET_PROPOSAL_LIST","ProposalList_templateObject","ProposalList","determineProposalStatuses","fullProps","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","fullProp","undefined","Symbol","iterator","done","push","return","finish","proposalData","currentPeriodData","totalSharesData","shareValueData","filter","votingPeriod","completed","index","ProposalList_ProposalCard","ProposalListHOC","ProposalListView","_ref7","Switch","Route","exact","path","render","component","GET_MEMBER_DETAIL","MemberDetail_templateObject","Composed","adopt","memberDetail","MemberDetail","_ref4","_ref5","bull","GET_PROPOSAL_HISTORY","MemberDetail_templateObject2","_ref6","fontSize","uintVote","Label","circular","empty","Date","timestamp","toISOString","slice","elements_Header_Header","as","MemberDetailView","MemberDetail_MemberDetail","MemberDetail_ProposalDetail","coinbase","LoggedInUser","GET_ELDERS","MemberList_templateObject","Elders","elder","MemberList_MemberAvatar","GET_NON_ELDERS","MemberList_templateObject2","Contributors","contributor","MemberList","MemberList_LoggedInUser","paddingLeft","MemberList_Elders","MemberList_Contributors","MemberListView","higherProps","MemberList_MemberList","assign","components_MemberDetail","AssetsFields","handleAsset","bind","assertThisInitialized","deleteAsset","event","onHandleAsset","assetIndex","onHandleDeleteAsset","paddingTop","paddingRight","assets","symbol","ProposalSubmission","tribute","asset","amount","logo","formErrors","titleValid","descriptionValid","assetsValid","sharesValid","formValid","addAsset","handleInput","handleDeleteAsset","fieldName","fieldValidationErrors","keys","i","validateForm","defineProperty","validateField","_this5","splice","submitProposal","_this6","stretched","transparent","inverted","label","fluid","TextArea","rows","row","ProposalSubmission_AssetsFields","GridColumn","currencies","ethereumIcon","CurrencyElement","GuildBank","redeemToken","GuildBank_CurrencyElement","Login","loginWithMetamask","doLoginBypassAuth","loginWithGnosisSafe","listAccounts","writeData","toLowerCase","loginComplete","history","resolvers","Proposal","Mutation","_","cache","getCacheKey","__typename","fragment","resolvers_templateObject","readFragment","typeDefs","schema_templateObject","InMemoryCache","stateLink","withClientState","defaults","httpLink","CachePersistor","storage","maxSize","debug","HttpLink","uri","ApolloClient","link","ApolloLink","onError","graphQLErrors","networkError","message","locations","IS_LOGGED_IN","App_templateObject","loggedInUserData","metadata","App","restored","populateData","refetch","compute","getCurrentPeriod","balanceOf","ethPerShare","gt","toNumber","parseEther","dataToWrite","BrowserRouter","App_Composed","Header_Header","Home","Redirect","components_ProposalList","components_MemberList","ProposalSubmission_ProposalSubmission","GuildBank_GuildBank","Login_Login","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.dbcc702e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bull.204229a6.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react';\n\n\nexport default () => (\n  <div id=\"background\">\n    <div className=\"blurred_image\" />\n    <div className=\"dark_overlay\" />\n  </div>\n)\n","import gql from \"graphql-tag\";\n\nexport const GET_EXCHANGE_RATE = gql`\n  query ExchangeRate {\n    exchangeRate @client\n  }\n`\n\nexport const GET_TOTAL_SHARES = gql`\n  query TotalShares {\n    totalShares @client\n  }\n`\n\nexport const GET_GUILD_BANK_VALUE = gql`\n  query GuildBankValue {\n    guildBankValue @client\n  }\n`\n\nexport const GET_SHARE_VALUE = gql`\n  query ShareValue {\n    shareValue @client\n  }\n`\n\nexport const GET_CURRENT_PERIOD = gql`\n  query CurrentPeriod {\n    currentPeriod @client\n  }\n`\n\nexport const GET_METADATA = gql`\n  query GetMetadata {\n    exchangeRate @client\n    totalShares @client\n    guildBankValue @client\n    shareValue @client\n    currentPeriod @client\n  }\n`\n\nexport const GET_LOGGED_IN_USER = gql`\n  query User($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n    }\n  }\n`;\n\nexport const GET_MEMBERS = gql`\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n`;\n\nexport const SET_PROPOSAL_ATTRIBUTES = gql`\n  mutation SetAttributes($status: String!, $title: String!, $description: String!) {\n    setAttributes(status: $status, title: $title, description: $description) @client {\n      status\n      title\n      description\n    }\n  }\n`;","import SafeProvider from \"safe-web3-provider\"\nimport { ethers } from 'ethers';\n\nconst molochAbi = require('./abi/Moloch.abi.json')\nconst erc20Abi = require('./abi/ERC20.abi.json')\nconst medianizerAbi = require('./abi/Medianizer.abi.json')\n\nlet moloch\nlet token\nlet medianizer\nlet eth\n\nexport async function initMetmask() {\n  if (!window.ethereum && !window.web3) {\n    // Non-DApp browsers won't work.\n    alert(\"This page must be viewed on a Web3 enabled browser.\");\n  }\n  if (window.ethereum) {\n    // Modern DApp browsers need to enable Metamask access.\n    try {\n      await window.ethereum.enable()\n      let web3Provider = window['ethereum'] || window.web3.currentProvider\n      eth = new ethers.providers.Web3Provider(web3Provider);\n      localStorage.setItem(\"loginType\", \"metamask\");\n    } catch (error) {\n      alert(\"Metamask needs to be enabled.\")\n    }\n  }\n  return eth\n}\n\nexport function initGnosisSafe() {\n  /**\n   *  Create Safe Provider\n   */\n  const provider = new SafeProvider({\n    // TODO: CHANGE THIS TO INFURA/ALCHEMY\n    rpcUrl: process.env.REACT_APP_ETH_URL\n  });\n\n  /**\n   *  Create Web3\n   */\n  eth = new ethers.providers.Web3Provider(provider);\n  localStorage.setItem(\"loginType\", \"gnosis\");\n  return eth\n}\n\nexport async function initMoloch() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  moloch = new ethers.Contract(process.env.REACT_APP_MOLOCH_ADDRESS, molochAbi, eth)\n  // moloch = new web3.eth.Contract(molochAbi, process.env.REACT_APP_MOLOCH_ADDRESS)\n  return moloch\n}\n\nexport async function initToken() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  // token = new web3.eth.Contract(erc20Abi, process.env.REACT_APP_TOKEN_ADDRESS)\n  token = new ethers.Contract(process.env.REACT_APP_TOKEN_ADDRESS, erc20Abi, eth)\n  return token\n}\n\nexport async function initMedianizer() {\n  // pull from mainnet\n  let provider = ethers.getDefaultProvider();\n  medianizer = new ethers.Contract(process.env.REACT_APP_MEDIANIZER_ADDRESS, medianizerAbi, provider)\n  return medianizer\n}\n\nexport async function getWeb3() {\n  if (!eth) {\n    if (localStorage.getItem(\"loginType\") === \"metamask\") {\n      eth = await initMetmask()\n    } else if (localStorage.getItem(\"loginType\") === \"gnosis\") {\n      eth = await initGnosisSafe()\n    } else {\n      throw new Error(\"Not logged in with web3.\")\n    }\n  }\n  return eth\n}\n\nexport async function getMoloch() {\n  if (!moloch) {\n    await initMoloch()\n  }\n  return moloch\n}\n\nexport async function getToken() {\n  if (!token) {\n    await initToken()\n  }\n  return token\n}\n\nexport async function getMedianizer() {\n  if (!medianizer) {\n    await initMedianizer()\n  }\n  return medianizer\n}","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Grid, Icon, Dropdown, Form, Button } from \"semantic-ui-react\";\nimport { Query, withApollo } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst MainMenu = props => (\n  <div className=\"dropdownItems\">\n    {props.member && props.member.isActive ? (\n      <>\n        <Dropdown.Item className=\"item\" onClick={() => props._handleCloseDropdown()}>\n          <Link to={`/members/${props.member.id}`} className=\"link\">\n            <p>\n              <Icon name=\"user\" />\n              View Profile\n            </p>\n          </Link>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"key\"\n          className=\"item\"\n          content=\"Change Delegate Key\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadChangeDelegateKey();\n          }}\n        />\n        <Dropdown.Divider />\n        <Dropdown.Item\n          icon=\"dollar\"\n          className=\"item\"\n          content=\"Rage Quit\"\n          onClick={() => {\n            props._handleOpenDropdown();\n            props.onLoadWithdrawLootToken();\n          }}\n        />\n        <Dropdown.Divider />\n      </>\n    ) : null}\n    <Dropdown.Item className=\"item\">\n      <Link\n        to=\"/login\"\n        className=\"link\"\n        onClick={async () => {\n          props._handleCloseDropdown();\n          await props.client.resetStore();\n        }}\n      >\n        <p>\n          <Icon name=\"power off\" />\n          Sign Out\n        </p>\n      </Link>\n    </Dropdown.Item>\n  </div>\n);\nconst MainMenuWrapped = withApollo(MainMenu);\n\nconst ChangeDelegateKeyMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"key\" />\n        Change Delegate Key\n      </p>\n      <Form.Input placeholder=\"Enter new key address\" />\n      <Button>Save</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nconst WithdrawLootTokenMenu = () => (\n  <div>\n    <Dropdown.Item icon=\"arrow left\" className=\"item\" content=\"Back to Menu\" onClick={() => this.props.onLoadMain()} />\n    <Dropdown.Divider />\n    <Dropdown.Item className=\"item submenu\">\n      <p>\n        <Icon name=\"dollar\" />\n        Rage Quit\n      </p>\n      <Form.Input placeholder=\"Enter withdrawal address\" />\n      <Form.Input placeholder=\"0\" />\n      <Button>Withdraw</Button>\n    </Dropdown.Item>\n  </div>\n);\n\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visibleMenu: \"main\",\n      visibleRightMenu: false\n    };\n  }\n\n  _handleOpenDropdown() {\n    this.setState({ visibleRightMenu: true });\n  }\n\n  _handleCloseDropdown() {\n    this.setState({ visibleRightMenu: false });\n  }\n\n  getTopRightMenuContent(member) {\n    let topRightMenuContent;\n    switch (this.state.visibleMenu) {\n      case \"main\":\n        topRightMenuContent = (\n          <MainMenuWrapped\n            member={member}\n            _handleOpenDropdown={() => this._handleOpenDropdown()}\n            _handleCloseDropdown={() => this._handleCloseDropdown()}\n            onLoadChangeDelegateKey={() => this.setState({ visibleMenu: \"changeDelegateKey\" })}\n            onLoadWithdrawLootToken={() => this.setState({ visibleMenu: \"withdrawLootToken\" })}\n          />\n        );\n        break;\n      case \"changeDelegateKey\":\n        topRightMenuContent = (\n          <ChangeDelegateKeyMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      case \"withdrawLootToken\":\n        topRightMenuContent = (\n          <WithdrawLootTokenMenu\n            onLoadMain={() => {\n              this._handleOpenDropdown();\n              this.setState({ visibleMenu: \"main\" });\n            }}\n          />\n        );\n        break;\n      default:\n        break;\n    }\n    return topRightMenuContent;\n  }\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"header\">\n              <Grid columns=\"equal\" verticalAlign=\"middle\">\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"left\" className=\"menu\">\n                    {/* <Dropdown icon=\"bars\">\n                <Dropdown.Menu className=\"menu blurred\" direction=\"right\">\n                  <Link to=\"guildbank\" className=\"item\">\n                    <p>Guild Bank</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/members\" className=\"item\">\n                    <p>Members</p>\n                  </Link>\n                  <Dropdown.Divider />\n                  <Link to=\"/proposals\" className=\"item\">\n                    <p>Proposals</p>\n                  </Link>\n                </Dropdown.Menu>\n              </Dropdown> */}\n                  </Grid.Column>\n                ) : null}\n                <Grid.Column textAlign=\"center\" className=\"logo\">\n                  <Link to=\"/\">MOLOCH</Link>\n                </Grid.Column>\n                {this.props.loggedInUser ? (\n                  <Grid.Column textAlign=\"right\" className=\"dropdown\">\n                    <Dropdown\n                      className=\"right_dropdown\"\n                      open={this.state.visibleRightMenu}\n                      onBlur={() => this._handleCloseDropdown()}\n                      onFocus={() => this._handleOpenDropdown()}\n                      text={`${this.props.loggedInUser.substring(0,6)}...`}\n                    >\n                      <Dropdown.Menu className=\"menu blurred\" direction=\"left\">\n                        {this.getTopRightMenuContent(data.member)}\n                      </Dropdown.Menu>\n                    </Dropdown>\n                  </Grid.Column>\n                ) : null}\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import React from 'react';\n\n\nexport default ({ children }) => (\n  <div id=\"wrapper\">\n    { children }\n  </div>\n)","import { utils } from \"ethers\";\n\nexport const currencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\n/**\n * Converts Wei amount to Dollars\n * @param {*} weiAmount \n * @param {*} exchangeRate in Wei units\n */\nexport function convertWeiToDollars(weiAmount, exchangeRate) {\n  const weitoEth = utils.formatEther(weiAmount)\n  const exchWeiToEth = utils.formatEther(exchangeRate)\n  \n  return currencyFormatter.format(parseFloat(weitoEth * exchWeiToEth))\n}","import React from \"react\";\nimport { Grid, Button, Segment, Modal, Form } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport gql from \"graphql-tag\";\nimport { Query, withApollo } from \"react-apollo\";\nimport { getToken } from \"../web3\";\nimport { utils } from \"ethers\";\nimport { GET_METADATA } from \"../helpers/graphQlQueries\";\nimport { convertWeiToDollars } from \"../helpers/currency\";\n\nconst GET_MEMBERS = gql`\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n`;\nconst NumMembers = () => (\n  <Query query={GET_MEMBERS}>\n    {({ loading, error, data }) => {\n      let members;\n      if (error) {\n        members = \"NA\";\n        console.error(`Could not load members: ${error}`);\n      } else if (loading) {\n        members = \"-\";\n      } else {\n        members = data.members.length;\n      }\n      return (\n        <Link to=\"/members\" className=\"link\">\n          <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n            {members} Members\n          </Button>\n        </Link>\n      );\n    }}\n  </Query>\n);\n\n// TODO filter this to get current proposals?\nconst GET_PROPOSALS = gql`\n  {\n    proposals {\n      id\n    }\n  }\n`;\nconst NumProposals = () => (\n  <Query query={GET_PROPOSALS}>\n    {({ loading, error, data }) => {\n      let proposals;\n      if (error) {\n        proposals = \"NA\";\n        console.error(`Could not load proposals: ${error}`);\n      } else if (loading) {\n        proposals = \"-\";\n      } else {\n        proposals = data.proposals.length;\n      }\n      return (\n        <Link to=\"/proposals\" className=\"link\">\n          <Button size=\"large\" color=\"grey\" className=\"btn_link\">\n            {proposals} Proposals\n          </Button>\n        </Link>\n      );\n    }}\n  </Query>\n);\n\nclass HomePage extends React.Component {\n  state = {\n    approval: \"\",\n    token: null,\n    userAddress: null\n  };\n\n  async componentDidMount() {\n    const token = await getToken();\n\n    this.setState({\n      token\n    });\n  }\n\n  handleChange = e => this.setState({ approval: e.target.value });\n\n  handleSubmit = () => {\n    const { loggedInUser } = this.props;\n    const { approval, token } = this.state;\n    token.methods.approve(process.env.REACT_APP_MOLOCH_ADDRESS, approval).send({ from: loggedInUser });\n  };\n\n  render() {\n    const { approval } = this.state;\n    return (\n      <Query query={GET_METADATA}>\n        {({ loading, error, data }) => {\n          if (error) {\n            console.error(`Could not load page: ${error}`);\n          } else if (loading) {\n            return \"Loading...\";\n          } else {\n            const { guildBankValue, exchangeRate, totalShares, shareValue } = data\n            return (\n              <div id=\"homepage\">\n                <Grid columns={16} verticalAlign=\"middle\">\n                  <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                    <Link to=\"/guildbank\" className=\"text_link\">\n                      <p className=\"subtext\">Guild Bank Value</p>\n                      <p className=\"amount\">{convertWeiToDollars(guildBankValue, exchangeRate)}</p>\n                    </Link>\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={10} computer={8} textAlign=\"center\" className=\"browse_buttons\">\n                    <NumMembers />\n                    <NumProposals />\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={6} computer={4} className=\"guild_value\">\n                    <Modal\n                      basic\n                      size=\"small\"\n                      trigger={\n                        <Button size=\"large\" color=\"grey\" className=\"browse_buttons\">\n                          Approve wETH\n                        </Button>\n                      }\n                    >\n                      <Modal.Header>Approve wETH</Modal.Header>\n                      <Modal.Content>\n                        <Form onSubmit={this.handleSubmit}>\n                          <Form.Field>\n                            <label>Amount to Approve</label>\n                            <input placeholder=\"Amount in Wei\" name=\"amount\" value={approval} onChange={this.handleChange} className=\"asset_amount\" />\n                          </Form.Field>\n                          <Button type=\"submit\" color=\"grey\" className=\"btn_link\">\n                            Submit\n                          </Button>\n                        </Form>\n                      </Modal.Content>\n                    </Modal>\n                  </Grid.Column>\n\n                  <Grid.Column width={16}>\n                    <Segment className=\"blurred box\">\n                      <Grid columns=\"equal\" className=\"graph_values\">\n                        <Grid.Column textAlign=\"left\">\n                          <p className=\"subtext\">Total Shares</p>\n                          <p className=\"amount\">{totalShares}</p>\n                        </Grid.Column>\n                        <Grid.Column textAlign=\"center\">\n                          <p className=\"subtext\">Total ETH</p>\n                          <p className=\"amount\">{utils.formatEther(guildBankValue)}</p>\n                        </Grid.Column>\n                        <Grid.Column textAlign=\"right\">\n                          <p className=\"subtext\">Share Value</p>\n                          <p className=\"amount\">\n                            {convertWeiToDollars(shareValue, exchangeRate)}\n                          </p>\n                        </Grid.Column>\n                      </Grid>\n                    </Segment>\n                  </Grid.Column>\n                </Grid>\n              </div>\n            );\n          }\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default withApollo(HomePage);\n","import React from 'react';\nimport { Progress, Grid } from 'semantic-ui-react';\n\n\nconst ProgressBar = ({ yes, no, totalShares }) => {\n  const total = yes + no\n  const percentYes = yes === 0 ? 0 : Math.round((yes / total) * 100)\n  const percentNo = no === 0 ? 0 : Math.round((no / total) * 100)\n  return (\n  <>\n    <div style={{ position: \"relative\" }}>\n      <Progress\n        percent={percentYes + percentNo}\n        color=\"red\"\n        size=\"small\"\n        style={{\n          position: \"absolute\",\n          top: \"0\",\n          width: \"100%\"\n        }}\n      />\n      <Progress percent={percentYes} color=\"green\" size=\"small\" />\n    </div>\n    <Grid columns=\"equal\">\n      <Grid.Column floated=\"left\">{yes} Yes Votes</Grid.Column>\n      <Grid.Column floated=\"right\" textAlign=\"right\">\n        {no} No Votes\n      </Grid.Column>\n    </Grid>\n  </>\n)};\n\nexport default ProgressBar","import { getMoloch } from \"../web3\";\n\nconst VOTING_PERIOD_LENGTH = 35;\nconst GRACE_PERIOD_LENGTH = 35;\n\nexport const ProposalStatus = {\n  Unknown: \"Unknown\",\n  InQueue: \"InQueue\",\n  VotingPeriod: \"VotingPeriod\",\n  GracePeriod: \"GracePeriod\",\n  Aborted: \"Aborted\",\n  Passed: \"Passed\",\n  Failed: \"Failed\",\n  ReadyForProcessing: \"ReadyForProcessing\"\n};\n\n// fill in missing data from onchain\nexport async function getProposalDetailsFromOnChain(proposal, currentPeriod) {\n  const moloch = await getMoloch()\n  currentPeriod = parseInt(currentPeriod)\n  console.log('currentPeriod: ', currentPeriod);\n  \n  const inQueue = proposal => currentPeriod < proposal.startingPeriod;\n\n  const inGracePeriod = proposal =>\n    currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH &&\n    currentPeriod < proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH;\n\n  const inVotingPeriod = proposal => currentPeriod >= proposal.startingPeriod && currentPeriod <= proposal.startingPeriod + VOTING_PERIOD_LENGTH;\n\n  const enoughPassingVotes = proposal => Math.round((parseInt(proposal.yesVotes) / (parseInt(proposal.yesVotes) + parseInt(proposal.noVotes))) * 100) > 50\n\n  const passedVotingAndGrace = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH\n\n  const passedVoting = proposal => currentPeriod > proposal.startingPeriod + VOTING_PERIOD_LENGTH\n\n  const lastProposalProcessed = async proposal => {\n    if (proposal.proposalIndex === 0) {\n      return true\n    }\n    const lastProposalFromChain = await moloch.proposalQueue(proposal.proposalIndex - 1);\n    return lastProposalFromChain.processed\n  }\n\n  proposal.proposalIndex = parseInt(proposal.proposalIndex);\n\n  const proposalFromChain = await moloch.proposalQueue(proposal.proposalIndex);\n  console.log('proposalFromChain: ', proposalFromChain);\n  proposal.startingPeriod = parseInt(proposalFromChain.startingPeriod);\n\n  proposal.votingEnds = 0;\n  proposal.gracePeriod = 0;\n\n  proposal.lastProposalProcessed = await lastProposalProcessed(proposal)\n  if (proposal.aborted) {\n    proposal.status = ProposalStatus.Aborted;\n  } else if (proposal.processed && proposal.didPass) {\n    proposal.status = ProposalStatus.Passed;\n  } else if (proposal.processed && !proposal.didPass) {\n    proposal.status = ProposalStatus.Failed;\n  } else if (inGracePeriod(proposal)) {\n    proposal.status = ProposalStatus.GracePeriod;\n    proposal.gracePeriod = proposal.startingPeriod + VOTING_PERIOD_LENGTH + GRACE_PERIOD_LENGTH - currentPeriod;\n  } else if (inVotingPeriod(proposal)) {\n    proposal.status = ProposalStatus.VotingPeriod;\n    proposal.votingEnds = proposal.startingPeriod + VOTING_PERIOD_LENGTH - currentPeriod;\n  } else if (inQueue(proposal)) {\n    proposal.status = ProposalStatus.InQueue;\n    proposal.votingStarts = proposal.startingPeriod - currentPeriod\n  } else if (passedVotingAndGrace(proposal)) {\n    proposal.status = ProposalStatus.ReadyForProcessing\n  } else {\n    proposal.status = ProposalStatus.Unknown\n  }\n\n  proposal.votingEnded = passedVoting(proposal);\n  proposal.graceEnded = passedVotingAndGrace(proposal);\n\n  proposal.readyForProcessing = false;\n  if (\n    proposal.status === ProposalStatus.InQueue &&\n    passedVotingAndGrace(proposal) &&\n    enoughPassingVotes(proposal) &&\n    proposal.lastProposalProcessed\n  ) {\n    proposal.readyForProcessing = true;\n  }\n\n  let details = {\n    title: \"\",\n    description: \"\"\n  };\n  try {\n    details = JSON.parse(proposalFromChain.details);\n  } catch (e) {\n    console.log(\n      `Could not parse details from proposal.proposalIndex: ${proposal.proposalIndex} proposalFromChain: ${JSON.stringify(\n        proposalFromChain,\n        null,\n        2\n      )}`\n    );\n    details.title = proposalFromChain.details\n  }\n\n  proposal.title = details.title;\n  proposal.description = details.description;\n\n  return proposal;\n}\n","import React, { Component } from \"react\";\nimport { Divider, Grid, Icon, Segment, Button, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport hood from \"assets/hood.png\";\n\nimport ProgressBar from \"./ProgressBar\";\n\nimport gql from \"graphql-tag\";\nimport { withApollo } from \"react-apollo\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { getMoloch } from \"../web3\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES } from \"../helpers/graphQlQueries\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nexport const Vote = {\n  Null: 0, // default value, counted as abstention\n  Yes: 1,\n  No: 2\n}\n\nconst MemberAvatar = ({ member, shares }) => {\n  return (\n    <Grid.Column mobile={4} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={member}>\n      <Link to={`/members/${member}`} className=\"uncolored\">\n        <Image src={hood} centered />\n        <p className=\"name\">{!member ? \"\" : member.length > 10 ? member.substring(0, 10) + \"...\" : member}</p>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_DETAIL = gql`\n  query Proposal($id: String!) {\n    proposal(id: $id) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes {\n        member {\n          id\n          shares\n        }\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nclass ProposalDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      proposal: {\n        tokenTribute: 0,\n        sharesRequested: 0,\n        votingEnded: true,\n        graceEnded: true,\n        yesVotes: 0,\n        noVotes: 0,\n        status: ProposalStatus.InQueue\n      },\n      user: {\n        id: 0,\n        shares: 0,\n        isActive: false\n      },\n      moloch: null\n    };\n\n    this.fetchData(props);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  async fetchData(props) {\n    const { client, loggedInUser } = props;\n    const proposalResult = await client.query({\n      query: GET_PROPOSAL_DETAIL,\n      variables: { id: this.props.match.params.id }\n    });\n\n    const userResult = await client.query({\n      query: GET_LOGGED_IN_USER,\n      variables: { address: loggedInUser }\n    });\n    this.setState({\n      user: userResult.data.member\n    });\n\n    let proposal = proposalResult.data.proposal\n    if (proposalResult.data.proposal.status === ProposalStatus.Unknown) {\n      const onChain = await getProposalDetailsFromOnChain(proposalResult.data.proposal);\n      const result = await client.mutate({\n        mutation: SET_PROPOSAL_ATTRIBUTES,\n        variables: {\n          id: proposalResult.data.proposal.id,\n          status: onChain.status,\n          title: onChain.title,\n          description: onChain.description || \"\"\n        }\n      });\n      proposal = {\n        ...proposalResult.data.proposal,\n        status: result.data.setAttributes.status,\n        title: result.data.setAttributes.title,\n        description: result.data.setAttributes.description\n      }\n    }\n    this.setState({\n      proposal\n    });\n  }\n\n  loadData(responseJson) {\n    let proposal = responseJson.items.member ? responseJson.items.member : responseJson.items;\n    this.setState({ proposal_detail: proposal, isAccepted: proposal.status === \"accepted\" || proposal.status === \"active\" ? true : false });\n    let voters = this.state.proposal_detail.voters ? this.state.proposal_detail.voters : [];\n    let userHasVoted = voters.find(voter => voter.member === this.state.loggedUser) ? true : false;\n    this.setState({ userHasVoted });\n    this.calculateVote(voters);\n  }\n\n  handleNo = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.No).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleYes = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.submitVote(proposal.proposalIndex, Vote.Yes).send({ from: user.id })\n    this.setState({\n      userHasVoted: true\n    })\n  }\n\n  handleProcess = () => {\n    const { proposal, moloch, user } = this.state\n    moloch.methods.processProposal(proposal.proposalIndex).send({ from: user.id })\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_detail\">\n        <Grid centered columns={16}>\n          <Segment className=\"transparent box segment\" textAlign=\"center\">\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <span className=\"title\">{this.state.proposal.title ? this.state.proposal.title : \"N/A\"}</span>\n              </Grid.Column>\n            </Grid>\n            <Grid centered columns={14}>\n              <Grid.Column mobile={16} tablet={16} computer={4}>\n                <div className=\"subtext description\">{this.state.proposal.description ? this.state.proposal.description : \"N/A\"}</div>\n                <Grid columns=\"equal\" className=\"tokens\">\n                  <Grid.Row>\n                    <Grid.Column className=\"tributes\">\n                      <Segment className=\"pill\" textAlign=\"center\">\n                        <Icon name=\"ethereum\" />\n                        {this.state.proposal.tokenTribute} ETH\n                      </Segment>\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <p className=\"subtext voting\">Shares</p>\n                    <p className=\"amount\">{this.state.proposal.sharesRequested}</p>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\">\n                    <p className=\"subtext\">Total USD Value</p>\n                    <p className=\"amount\">{formatter.format(0)}</p>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={2}>\n                <Divider vertical />\n              </Grid.Column>\n\n              <Grid.Column mobile={16} tablet={16} computer={6}>\n                <Grid columns={16}>\n                  <Grid.Column textAlign=\"left\" mobile={16} tablet={8} computer={8} className=\"pill_column\">\n                    <span className=\"pill\">\n                      {this.state.proposal.votingEnded ? (\n                        <span className=\"subtext\">Voting Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Voting Ends: </span>\n                          <span>\n                            {this.state.proposal.votingEnds ? this.state.proposal.votingEnds : \"-\"} period\n                            {this.state.proposal.votingEnds === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\" className=\"pill_column grace\" mobile={16} tablet={8} computer={8}>\n                    <span className=\"pill\">\n                      {this.state.proposal.graceEnded ? (\n                        <span className=\"subtext\">Grace Ended</span>\n                      ) : (\n                        <>\n                          <span className=\"subtext\">Grace Period Ends: </span>\n                          <span>\n                            {this.state.proposal.gracePeriod ? this.state.proposal.gracePeriod : \"-\"} period\n                            {this.state.proposal.gracePeriod === 1 ? null : \"s\"}\n                          </span>\n                        </>\n                      )}\n                    </span>\n                  </Grid.Column>\n                </Grid>\n                <Grid columns={16} className=\"member_list\">\n                  <Grid.Row>\n                    <Grid.Column mobile={16} tablet={16} computer={16} className=\"pill_column\">\n                      {this.state.proposal.votes && this.state.proposal.votes.length > 0 ? (\n                        <Grid>\n                          <Grid.Row className=\"members_row\">\n                            {/* centered */}\n                            {this.state.proposal.votes.map((vote, idx) => <MemberAvatar member={vote.member.id} shares={vote.member.shares} key={idx} />)}\n                          </Grid.Row>\n                        </Grid>\n                      ) : null}\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n                <Grid>\n                  <Grid.Column>\n                    <ProgressBar yes={parseInt(this.state.proposal.yesVotes)} no={parseInt(this.state.proposal.noVotes)} />\n                  </Grid.Column>\n                </Grid>\n                <Grid columns=\"equal\" centered>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleNo}\n                    >\n                      Vote No\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button\n                      className=\"btn\"\n                      color=\"grey\"\n                      disabled={\n                        this.state.userHasVoted ||\n                        this.state.proposal.status !== ProposalStatus.VotingPeriod ||\n                        (!(this.state.user && this.state.user.shares) || !(this.state.user && this.state.user.isActive))\n                      }\n                      onClick={this.handleYes}\n                    >\n                      Vote Yes\n                    </Button>\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" mobile={16} tablet={5} computer={5}>\n                    <Button className=\"btn\" color=\"grey\" onClick={this.handleProcess} disabled={!this.state.proposal.readyForProcessing}>\n                      Process Proposal\n                    </Button>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid>\n          </Segment>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withApollo(ProposalDetail);\n","import React from \"react\";\nimport { Segment, Grid, Button } from \"semantic-ui-react\";\nimport { Route, Switch, Link } from \"react-router-dom\";\n\nimport ProposalDetail from \"./ProposalDetail\";\nimport ProgressBar from \"./ProgressBar\";\nimport { Query, withApollo } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { getProposalDetailsFromOnChain, ProposalStatus } from \"../helpers/proposals\";\nimport { GET_LOGGED_IN_USER, SET_PROPOSAL_ATTRIBUTES, GET_CURRENT_PERIOD, GET_TOTAL_SHARES, GET_SHARE_VALUE } from \"../helpers/graphQlQueries\";\nimport { currencyFormatter } from \"../helpers/currency\";\nimport { utils } from \"ethers\";\n\nfunction getProposalCountdownText(proposal) {\n  switch (proposal.status) {\n    case ProposalStatus.InQueue:\n      return (\n        <>\n          <span className=\"subtext\">Voting Begins: </span>\n          <span>\n            {proposal.votingStarts ? proposal.votingStarts : \"-\"} period{proposal.votingStarts === 1 ? null : \"s\"}\n          </span>\n        </>\n      )\n    case ProposalStatus.VotingPeriod:\n      return (\n        <>\n          <span className=\"subtext\">Voting Ends: </span>\n          <span>\n            {proposal.votingEnds ? proposal.votingEnds : \"-\"} period{proposal.votingEnds === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    case ProposalStatus.GracePeriod:\n      return (\n        <>\n          <span className=\"subtext\">Grace Period Ends: </span>\n          <span>\n            {proposal.gracePeriod ? proposal.gracePeriod : \"-\"} period{proposal.gracePeriod === 1 ? null : \"s\"}\n          </span>\n        </>\n      );\n    default:\n      return <></>;\n  }\n}\n\nconst ProposalCard = ({ proposal, totalShares, shareValue = 0 }) => {\n  let id = proposal.id;\n  return (\n    <Grid.Column mobile={16} tablet={8} computer={5}>\n      <Link to={{ pathname: `/proposals/${id}` }} className=\"uncolored\">\n        <Segment className=\"blurred box\">\n          <p className=\"name\">{proposal.title ? proposal.title : \"N/A\"}</p>\n          <p className=\"subtext description\">{proposal.description ? proposal.description : \"N/A\"}</p>\n          <Grid columns=\"equal\" className=\"value_shares\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n                <p className=\"amount\">{proposal.sharesRequested}</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Total Value</p>\n                <p className=\"amount\">{currencyFormatter.format(utils.bigNumberify(proposal.sharesRequested).mul(shareValue).toString())}</p>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\" className=\"deadlines\">\n            <Grid.Row>\n              <Grid.Column textAlign=\"center\">\n                <Segment className=\"voting pill\" textAlign=\"center\">\n                  {getProposalCountdownText(proposal)}\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          <ProgressBar totalShares={totalShares} yes={parseInt(proposal.yesVotes)} no={parseInt(proposal.noVotes)} />\n        </Segment>\n      </Link>\n    </Grid.Column>\n  );\n};\n\nconst GET_PROPOSAL_LIST = gql`\n  {\n    proposals(orderBy: proposalIndex, orderDirection: desc) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n`;\nclass ProposalList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      proposals: [],\n      loading: true,\n      totalShares: 0\n    };\n\n    this.fetchData(props);\n  }\n\n  async fetchData(props) {\n    const { client } = props;\n    this.setState({\n      loading: true\n    });\n    const { data: proposalData } = await client.query({\n      query: GET_PROPOSAL_LIST\n    });\n\n    const { data: currentPeriodData } = await client.query({\n      query: GET_CURRENT_PERIOD\n    });\n\n    const { data: totalSharesData } = await client.query({\n      query: GET_TOTAL_SHARES\n    });\n\n    const { data: shareValueData } = await client.query({\n      query: GET_SHARE_VALUE\n    });\n    try {\n      await this.determineProposalStatuses(client, proposalData.proposals, currentPeriodData.currentPeriod);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.setState({\n        loading: false,\n        totalShares: +totalSharesData.totalShares,\n        shareValue: shareValueData.shareValue\n      });\n    }\n  }\n\n  determineProposalStatuses = async (client, proposals, currentPeriod) => {\n    if (!proposals || proposals.length === 0) {\n      return;\n    }\n\n    const fullProps = [];\n    for (const proposal of proposals) {\n      if (proposal.status === ProposalStatus.Unknown) {\n        const fullProp = await getProposalDetailsFromOnChain(proposal, currentPeriod);\n        console.log(\"fullProp: \", fullProp);\n        const result = await client.mutate({\n          mutation: SET_PROPOSAL_ATTRIBUTES,\n          variables: {\n            id: proposal.id,\n            status: fullProp.status,\n            title: fullProp.title || \"\",\n            description: fullProp.description || \"\",\n            gracePeriod: fullProp.gracePeriod || \"\",\n            votingEnds: `${fullProp.votingEnds}` || \"\",\n            votingStarts: `${fullProp.votingStarts}` || \"\",\n            readyForProcessing: fullProp.readyForProcessing || \"\"\n          }\n        });\n        fullProps.push({\n          ...proposal,\n          status: result.data.setAttributes.status,\n          title: result.data.setAttributes.title,\n          description: result.data.setAttributes.description || \"\",\n          gracePeriod: result.data.setAttributes.gracePeriod || \"\",\n          votingEnds: result.data.setAttributes.votingEnds || \"\",\n          votingStarts: result.data.setAttributes.votingStarts || \"\",\n          readyForProcessing: result.data.setAttributes.readyForProcessing || \"\"\n        });\n      } else {\n        fullProps.push(proposal);\n      }\n    }\n\n    this.setState({\n      proposals: fullProps\n    });\n    return;\n  };\n\n  render() {\n    const { isActive } = this.props;\n    const { proposals, totalShares } = this.state;\n    const gracePeriod = proposals.filter(p => p.status === ProposalStatus.GracePeriod);\n    const votingPeriod = proposals.filter(p => p.status === ProposalStatus.VotingPeriod);\n    const inQueue = proposals.filter(p => p.status === ProposalStatus.InQueue);\n    const completed = proposals.filter(\n      p => p.status === ProposalStatus.Aborted || p.status === ProposalStatus.Passed || p.status === ProposalStatus.Failed\n    );\n    return (\n      <div id=\"proposal_list\">\n        <React.Fragment>\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={8} computer={4} textAlign=\"right\" floated=\"right\" className=\"submit_button\">\n              <Link to={isActive ? \"/proposalsubmission\" : \"/proposals\"} className=\"link\">\n                <Button size=\"large\" color=\"red\" disabled={!isActive}>\n                  New Proposal\n                </Button>\n              </Link>\n            </Grid.Column>\n          </Grid>\n          {this.state.loading ? (\n            <>Loading proposals...</>\n          ) : (\n            <>\n              {/* Grace Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {gracePeriod.length} Proposal{gracePeriod.length > 1 || gracePeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Grace Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {gracePeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Voting Period */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {votingPeriod.length} Proposal{votingPeriod.length > 1 || votingPeriod.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Voting Period</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {votingPeriod.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* In Queue */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {inQueue.length} Proposal{inQueue.length > 1 || inQueue.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">In Queue</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {inQueue.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n              {/* Completed */}\n              <Grid columns={16} verticalAlign=\"middle\">\n                <Grid.Column mobile={16} tablet={8} computer={8} textAlign=\"left\">\n                  <p className=\"subtext\">\n                    {completed.length} Proposal{completed.length > 1 || completed.length === 0 ? \"s\" : \"\"}\n                  </p>\n                  <p className=\"title\">Completed</p>\n                </Grid.Column>\n              </Grid>\n              <Grid columns={3}>\n                {completed.map((p, index) => (\n                  <ProposalCard totalShares={totalShares} proposal={p} key={index} />\n                ))}\n              </Grid>\n            </>\n          )}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\nconst ProposalListHOC = withApollo(ProposalList);\n\nconst ProposalListView = props => {\n  return (\n    <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n      {({ loading, error, data }) => {\n        if (loading) return \"Loading...\";\n        if (error) throw new Error(`Error!: ${error}`);\n        return (\n          <Switch>\n            <Route exact path=\"/proposals\" render={() => <ProposalListHOC isActive={data.member ? data.member.isActive : false} />} />\n            <Route path=\"/proposals/:id\" component={ProposalDetail} />\n          </Switch>\n        );\n      }}\n    </Query>\n  );\n};\n\nexport default ProposalListView;\n","import React from \"react\";\nimport { Divider, Grid, Segment, Image, Icon, Label, Header } from \"semantic-ui-react\";\n\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { Vote } from \"./ProposalDetail\";\nimport { utils } from \"ethers\";\nimport { convertWeiToDollars } from \"../helpers/currency\";\nimport { adopt } from \"react-adopt\";\nimport { GET_SHARE_VALUE, GET_EXCHANGE_RATE } from \"../helpers/graphQlQueries\";\n\nconst GET_MEMBER_DETAIL = gql`\n  query Member($id: String!) {\n    member(id: $id) {\n      id\n      shares\n      tokenTribute\n    }\n  }\n`;\n\nconst Composed = adopt({\n  memberDetail: ({ render, name }) => (\n    <Query query={GET_MEMBER_DETAIL} variables={{ id: name }}>\n      {render}\n    </Query>\n  ),\n  shareValue: ({ render }) => <Query query={GET_SHARE_VALUE}>{render}</Query>,\n  exchangeRate: ({ render }) => <Query query={GET_EXCHANGE_RATE}>{render}</Query>\n});\n\nconst MemberDetail = ({ name, loggedInUser }) => (\n  <Composed name={name}>\n    {({ memberDetail, shareValue, exchangeRate }) => {\n      if (memberDetail.loading || shareValue.loading || exchangeRate.loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (memberDetail.error) throw new Error(`Error!: ${memberDetail.error}`);\n      if (shareValue.error) throw new Error(`Error!: ${shareValue.error}`);\n      if (exchangeRate.error) throw new Error(`Error!: ${exchangeRate.error}`);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\">\n            <Grid.Column>\n              <p className=\"subtext\">Shares</p>\n              <p className=\"amount\">{memberDetail.data.member.shares}</p>\n            </Grid.Column>\n            <Grid.Column textAlign=\"right\">\n              <p className=\"subtext\">Total Value</p>\n              <p className=\"amount\">\n                {convertWeiToDollars(\n                  utils\n                    .bigNumberify(memberDetail.data.member.shares)\n                    .mul(shareValue.data.shareValue)\n                    .toString(),\n                  exchangeRate.data.exchangeRate\n                )}\n              </p>\n            </Grid.Column>\n          </Grid>\n          <Grid>\n            <Grid.Column textAlign=\"center\" className=\"avatar\">\n              <Image centered src={loggedInUser === name ? bull : hood} size=\"tiny\" />\n            </Grid.Column>\n          </Grid>\n          <p className=\"subtext\">Tribute</p>\n          <Grid columns=\"equal\">\n            <Grid.Row>\n              <Grid.Column>\n                <Segment className=\"pill\" textAlign=\"center\">\n                  <Icon name=\"ethereum\" />\n                  {utils.formatEther(memberDetail.data.member.tokenTribute)} ETH\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Composed>\n);\n\nconst GET_PROPOSAL_HISTORY = gql`\n  query Proposals($id: String!) {\n    proposals {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      votes(where: { memberAddress: $id }) {\n        id\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n`;\nconst ProposalDetail = ({ name }) => (\n  <Query query={GET_PROPOSAL_HISTORY} variables={{ id: name }}>\n    {({ loading, error, data }) => {\n      if (loading) return <Segment className=\"blurred box\">Loading...</Segment>;\n      if (error) throw new Error(`Error!: ${error}`);\n      console.log(\"data: \", data);\n      return (\n        <Segment className=\"blurred box\">\n          <Grid columns=\"equal\" textAlign=\"center\">\n            <Grid.Row className=\"subtext\" style={{ fontSize: 20 }}>\n              History\n            </Grid.Row>\n          </Grid>\n          <Grid columns=\"equal\">\n            <Grid.Row className=\"header\">\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Proposal Title</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Date</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Shares Requested</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Tribute Offered</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Vote</p>\n              </Grid.Column>\n              <Grid.Column textAlign=\"center\">\n                <p className=\"subtext\">Status</p>\n              </Grid.Column>\n            </Grid.Row>\n            {data.proposals && data.proposals.length > 0 ? (\n              data.proposals.map((p, idx) => {\n                return (\n                  <React.Fragment key={idx}>\n                    <Grid.Row verticalAlign=\"middle\">\n                      <Grid.Column textAlign=\"center\">\n                        {p.votes.uintVote === Vote.Yes && <Label className=\"dot\" circular color=\"green\" empty />}\n                        {/* TODO: is this right? */}\n                        {(p.votes.uintVote === Vote.No || p.votes.uintVote === Vote.Null) && <Label className=\"dot\" circular color=\"red\" empty />}\n                        {p.title}\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{new Date(p.timestamp * 1000).toISOString().slice(0, 10)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.sharesRequested}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{utils.formatEther(p.tokenTribute)}</p>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <Header as=\"p\" color={p.vote === 2 ? \"green\" : p.vote === 1 ? \"red\" : null}>\n                          {p.vote === 2 ? \"Y\" : p.vote === 1 ? \"N\" : \"\"}\n                        </Header>\n                      </Grid.Column>\n                      <Grid.Column textAlign=\"center\">\n                        <p className=\"subtext date\">{p.aborted ? \"Aborted\" : p.processed ? (p.didPass ? \"Passed\" : \"Failed\") : \"Pending\"}</p>\n                      </Grid.Column>\n                    </Grid.Row>\n                    <Divider />\n                  </React.Fragment>\n                );\n              })\n            ) : (\n              <>This member hasn't voted on any proposals yet.</>\n            )}\n          </Grid>\n        </Segment>\n      );\n    }}\n  </Query>\n);\n\nconst MemberDetailView = props => (\n  <div id=\"member_detail\">\n    <p className=\"title\"> {props.match.params.name} </p>\n    <Divider />\n    <Grid columns={16}>\n      <Grid.Row className=\"details\">\n        <Grid.Column mobile={16} tablet={16} computer={6} className=\"user\">\n          <MemberDetail name={props.match.params.name} loggedInUser={props.loggedInUser} />\n        </Grid.Column>\n        <Grid.Column mobile={16} tablet={16} computer={10} className=\"proposals\">\n          <ProposalDetail name={props.match.params.name} />\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  </div>\n);\n\nexport default MemberDetailView;\n","import React from \"react\";\nimport { Grid, Image, Divider } from \"semantic-ui-react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport MemberDetail from \"./MemberDetail\";\nimport bull from \"assets/bull.png\";\nimport hood from \"assets/hood.png\";\n\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { GET_LOGGED_IN_USER, GET_MEMBERS } from \"../helpers/graphQlQueries\";\n\nconst MemberAvatar = ({ address, shares }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"member_avatar\" title={address}>\n    <Link to={`/members/${address}`} className=\"uncolored\">\n      <Image src={hood} centered size=\"tiny\" />\n      <p className=\"name\">{!address ? \"\" : address.length > 10 ? address.substring(0, 10) + \"...\" : address}</p>\n      <p className=\"subtext\">{shares} shares</p>\n    </Link>\n  </Grid.Column>\n);\n\nconst LoggedInUser = props => (\n  <Query query={GET_LOGGED_IN_USER} variables={{ address: props.loggedInUser }}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.member && data.member.isActive ? (\n        <Link to={`/members/${data.member.id}`} className=\"uncolored\">\n          <Image centered src={bull} size=\"tiny\" />\n          <p className=\"name\">{!data.member.id ? \"\" : data.member.id.length > 10 ? data.member.id.substring(0, 10) + \"...\" : data.member.id}</p>\n          <p className=\"subtext\">{data.member.shares ? data.member.shares : 0} shares</p>\n        </Link>\n      ) : (\n        <div />\n      );\n    }}\n  </Query>\n);\n\nconst GET_ELDERS = gql`\n  {\n    members(where: { shares_gte: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Elders = () => (\n  <Query query={GET_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((elder, idx) => <MemberAvatar address={elder.id} shares={elder.shares} key={idx} />)\n      ) : (\n        <>No elders to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst GET_NON_ELDERS = gql`\n  {\n    members(where: { shares_gt: 0, shares_lt: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n`;\nconst Contributors = () => (\n  <Query query={GET_NON_ELDERS}>\n    {({ loading, error, data }) => {\n      if (loading) return \"...\";\n      if (error) throw new Error(`Error!: ${error}`);\n      return data.members.length > 0 ? (\n        data.members.map((contributor, idx) => <MemberAvatar address={contributor.id} shares={contributor.shares} key={idx} />)\n      ) : (\n        <>No contributors to show.</>\n      );\n    }}\n  </Query>\n);\n\nconst MemberList = props => (\n  <Query query={GET_MEMBERS}>\n    {({ loading, error, data }) => {\n      let members;\n      if (error) {\n        members = \"NA\";\n        console.error(`Could not load members: ${error}`);\n      } else if (loading) {\n        members = \"-\";\n      } else {\n        members = data.members.length;\n      }\n      return (\n        <div id=\"member_list\">\n          <Grid columns={16} verticalAlign=\"middle\">\n            <Grid.Column mobile={16} tablet={6} computer={6} textAlign=\"left\" className=\"member_list_header\">\n              <p className=\"subtext\">{members} Members</p>\n            </Grid.Column>\n\n            {/* <Grid.Column mobile={16} tablet={10} computer={10} textAlign=\"right\" className=\"submit_button\">\n              <Link to='/membershipproposalsubmission' className=\"link\">\n                <Button size='large' color='red' disabled={(props.user.status === 'founder') ? true : false}>Membership Proposal</Button>\n              </Link>\n            </Grid.Column> */}\n          </Grid>\n\n          <Grid>\n            <Grid.Column textAlign=\"center\">\n              <LoggedInUser {...props} />\n            </Grid.Column>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Elders (100+ shares)</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Elders />\n            </Grid.Row>\n          </Grid>\n          <Grid className=\"member_item\">\n            <Grid.Row>\n              <p style={{ paddingLeft: \"1rem\" }}>Contributors</p>\n            </Grid.Row>\n            <Divider />\n            <Grid.Row className=\"members_row\" centered>\n              <Contributors />\n            </Grid.Row>\n          </Grid>\n        </div>\n      );\n    }}\n  </Query>\n);\n\nconst MemberListView = higherProps => (\n  <Switch>\n    <Route exact path=\"/members\" render={props => <MemberList {...props} loggedInUser={higherProps.loggedInUser} />} />\n    <Route path=\"/members/:name\" render={props => <MemberDetail {...props} loggedInUser={higherProps.loggedInUser} />} />\n  </Switch>\n);\n\nexport default MemberListView;\n","import React, { Component } from \"react\";\nimport { Grid, Button } from \"semantic-ui-react\";\n\nimport { initMetmask, initGnosisSafe } from \"../web3\";\nimport { ApolloConsumer } from \"react-apollo\";\n\nlet coinbase;\n\nexport default class Login extends Component {\n  // bypass auth for now\n  loginWithMetamask = async client => {\n    const web3 = await initMetmask();\n    if (!web3) {\n      return\n    }\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  loginWithGnosisSafe = async client => {\n    const web3 = initGnosisSafe();\n    await this.doLoginBypassAuth(client, web3);\n  };\n\n  doLoginBypassAuth = async (client, web3) => {\n    coinbase = (await web3.listAccounts())[0];\n\n    if (!coinbase) {\n      alert(\"Could not retrieve address from Gnosis Safe/MetaMask, is it configured and this domain whitelisted?\");\n    } else {\n      // Try getting a user by their public address.\n      client.writeData({\n        data: {\n          loggedInUser: coinbase.toLowerCase()\n        }\n      });\n      this.props.loginComplete()\n      this.props.history.push(\"/\");\n    }\n  };\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <div id=\"login\">\n            <Grid columns={1} centered>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithMetamask(client)}>\n                  Connect With Web3\n                </Button>\n              </Grid.Row>\n              <Grid.Row>\n                <Button size=\"large\" color=\"grey\" onClick={() => this.loginWithGnosisSafe(client)}>\n                  Connect With Web3 (Gnosis Safe)\n                </Button>\n              </Grid.Row>\n            </Grid>\n          </div>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Button, Divider, Form, Grid, Input, Segment, GridColumn } from \"semantic-ui-react\";\nimport { getMoloch } from \"../web3\";\n\nconst formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nclass AssetsFields extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAsset = this.handleAsset.bind(this);\n    this.deleteAsset = this.deleteAsset.bind(this);\n  }\n\n  handleAsset(event, { value, name }) {\n    this.props.onHandleAsset({ value, name, assetIndex: this.props.assetIndex });\n  }\n\n  deleteAsset() {\n    this.props.onHandleDeleteAsset({ assetIndex: this.props.assetIndex });\n  }\n\n  render() {\n    return (\n      <Grid.Row className=\"asset_field_row\">\n        {/* <Grid.Column mobile={14} tablet={5} computer={7} className=\"asset_field_grid membership\"> */}\n        <Grid.Column width={2} textAlign=\"left\" className=\"asset_field_grid membership\">\n          {/* <Input name=\"asset\" className=\"asset icon_asset\" icon=\"ethereum\" iconPosition=\"left\" placeholder=\"ETH, BTC, Token address\" onChange={this.handleAsset} type=\"text\" /> */}\n          {/* <Input icon=\"ethereum\" iconPosition=\"left\" name=\"asset\" className=\"asset icon_asset\" type=\"text\" value={this.props.assets.symbol} disabled={true} /> */}\n          <div className=\"subtext\" style={{ paddingTop: 10, paddingRight: 10 }}>\n            {this.props.assets.symbol}\n          </div>\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid mobile_delete_icon\" textAlign=\"right\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n        <Grid.Column mobile={14} tablet={10} computer={7} className=\"asset_field_grid\">\n          <Input name=\"amount\" className=\"asset_amount\" placeholder=\"Enter Amount\" type=\"number\" onChange={this.handleAsset} />\n        </Grid.Column>\n        {/* <Grid.Column mobile={2} tablet={1} computer={2} className=\"asset_field_grid computer_delete_icon\" textAlign=\"center\">\n                    <div className=\"subtext\">\n                        <Icon name='times' className=\"delete_icon\" link onClick={this.deleteAsset} />\n                    </div>\n                </Grid.Column> */}\n      </Grid.Row>\n    );\n  }\n}\n\nexport default class ProposalSubmission extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      address: props.loggedInUser,\n      title: \"\",\n      description: \"\",\n      shares: 0,\n      tribute: 0, // TODO: this will be calculated with the blockchain\n      assets: [\n        {\n          asset: \"ETH\",\n          symbol: \"ETH\",\n          amount: 0,\n          logo: \"https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png\"\n        }\n      ],\n      formErrors: { title: \"\", description: \"\", assets: \"\", shares: \"\" },\n      titleValid: false,\n      descriptionValid: false,\n      assetsValid: false,\n      sharesValid: false,\n      formValid: false\n    };\n\n    this.addAsset = this.addAsset.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleAsset = this.handleAsset.bind(this);\n    this.handleDeleteAsset = this.handleDeleteAsset.bind(this);\n  }\n\n  async componentDidMount() {\n    const moloch = await getMoloch();\n    this.setState({\n      moloch\n    });\n  }\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let titleValid = this.state.titleValid;\n    let descriptionValid = this.state.descriptionValid;\n    let assetsValid = this.state.assetsValid;\n    let sharesValid = this.state.sharesValid;\n\n    switch (fieldName) {\n      case \"title\":\n        titleValid = value !== \"\";\n        fieldValidationErrors.title = titleValid ? \"\" : \"Title field is invalid\";\n        break;\n      case \"description\":\n        descriptionValid = value !== \"\";\n        fieldValidationErrors.description = descriptionValid ? \"\" : \"Description field is invalid\";\n        break;\n      case \"assets\":\n        Object.keys(value).map(key => {\n          for (var i in value[key]) {\n            if (Object.keys(value[key]).length <= 1) {\n              assetsValid = false;\n              return false;\n            } else {\n              if (value[key][i] === null || value[key][i] === \"\") {\n                assetsValid = false;\n                return false;\n              }\n            }\n          }\n          assetsValid = true;\n          return true;\n        });\n        fieldValidationErrors.assets = assetsValid ? \"\" : \"Asset is invalid\";\n        break;\n      case \"shares\":\n        sharesValid = value > 0;\n        fieldValidationErrors.shares = sharesValid ? \"\" : \"Shares field is invalid\";\n        break;\n      default:\n        break;\n    }\n    this.setState(\n      {\n        formErrors: fieldValidationErrors,\n        titleValid: titleValid,\n        descriptionValid: descriptionValid,\n        assetsValid: assetsValid,\n        sharesValid: sharesValid\n      },\n      this.validateForm\n    );\n  }\n\n  validateForm() {\n    this.setState({ formValid: this.state.titleValid && this.state.descriptionValid && this.state.assetsValid && this.state.sharesValid });\n  }\n\n  addAsset() {\n    let assets = this.state.assets ? this.state.assets : [];\n    assets.push({});\n\n    this.setState({ assets });\n  }\n\n  handleInput(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    if (name === \"shares\") {\n      this.setState({ [name]: parseInt(value) }, () => {\n        this.validateField(name, value);\n      });\n    } else {\n      this.setState({ [event.target.name]: event.target.value }, () => {\n        this.validateField(name, value);\n      });\n    }\n  }\n\n  handleAsset(event) {\n    let assets = this.state.assets;\n    assets[event.assetIndex][event.name] = event.value;\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n    this.setState({ tribute: 0 * event.value });\n  }\n\n  handleDeleteAsset(event) {\n    let assets = this.state.assets;\n    assets.splice(event.assetIndex, 1);\n    this.setState({ assets }, () => {\n      this.validateField(\"assets\", assets);\n    });\n  }\n\n  async handleSubmit() {\n    const { moloch, formValid, address, title, description, shares, tribute } = this.state\n\n    if (formValid) {\n      try {\n        await moloch.methods.submitProposal(address, tribute, shares, JSON.stringify({ title, description })).send({ from: address })\n      } catch (e) {\n        console.error(e);\n        alert(\"Error processing proposal\");\n      }\n    } else {\n      alert(\"Please fill any missing fields.\");\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"proposal_submission\">\n        <Form>\n          <Grid centered columns={16}>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Input\n                  name=\"title\"\n                  transparent\n                  size=\"big\"\n                  inverted\n                  placeholder=\"Proposal Title\"\n                  onChange={this.handleInput}\n                  value={this.state.title}\n                />\n                <Divider />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row stretched>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Segment className=\"blurred box\">\n                  <Form.Input\n                    name=\"shares\"\n                    label=\"Request voting shares\"\n                    placeholder=\"Shares\"\n                    fluid\n                    type=\"number\"\n                    onChange={this.handleInput}\n                    value={this.state.shares}\n                  />\n                </Segment>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column mobile={16} tablet={16} computer={12}>\n                <Grid columns=\"equal\">\n                  <Grid.Column>\n                    <Segment className=\"blurred box\">\n                      <Form.TextArea\n                        name=\"description\"\n                        label=\"Description\"\n                        placeholder=\"Type here\"\n                        rows={15}\n                        onChange={this.handleInput}\n                        value={this.state.description}\n                      />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column mobile={16} tablet={16} computer={8}>\n                    <Segment className=\"blurred box\">\n                      <Grid columns={16}>\n                        <Grid.Column width={14}>\n                          <div className=\"subtext\">Request Amount</div>\n                        </Grid.Column>\n                        {/* <Grid.Column width={2}>\n                                                    <div className=\"subtext\">\n                                                        <Icon name='add' className=\"add_icon\" link onClick={this.addAsset} />\n                                                    </div>\n                                                </Grid.Column> */}\n                      </Grid>\n                      <Grid columns={3} className=\"assets_field\">\n                        {this.state.assets.map((row, i) => (\n                          <AssetsFields\n                            key={i}\n                            assetIndex={i}\n                            assets={row}\n                            onHandleAsset={this.handleAsset}\n                            onHandleDeleteAsset={this.handleDeleteAsset}\n                          />\n                        ))}\n                      </Grid>\n                      <Divider />\n                      <Grid columns=\"equal\" className=\"value_shares\">\n                        <Grid.Row>\n                          <Grid.Column textAlign=\"center\">\n                            <p className=\"subtext\">Tribute Value</p>\n                            <p className=\"amount\">{formatter.format(this.state.tribute)}</p>\n                          </Grid.Column>\n                        </Grid.Row>\n                      </Grid>\n                    </Segment>\n                  </Grid.Column>\n                </Grid>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <GridColumn mobile={16} tablet={8} computer={8} className=\"submit_button\">\n                <Button size=\"large\" color=\"red\" onClick={this.handleSubmit}>\n                  Submit Proposal\n                </Button>\n              </GridColumn>\n            </Grid.Row>\n          </Grid>\n        </Form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Grid, Image, Divider, Button } from \"semantic-ui-react\";\nimport ethereumIcon from \"assets/ethereumIcon.png\";\nimport { Query } from \"react-apollo\";\nimport { GET_LOGGED_IN_USER } from \"../helpers/graphQlQueries\";\n\nconst currencies = [\n  {\n    name: \"ETH\",\n    shares: 508,\n    value: 32000,\n    icon: ethereumIcon\n  }\n];\n\nconst CurrencyElement = ({ name, shares, icon, value }) => (\n  <Grid.Column mobile={5} tablet={3} computer={3} textAlign=\"center\" className=\"currency_element\">\n    <Image src={icon} centered size=\"tiny\" circular />\n    <p className=\"name\">{name}</p>\n    <p className=\"shares\">{shares}</p>\n    <p className=\"subtext\">{\"$\" + value}</p>\n  </Grid.Column>\n);\n\nexport default class GuildBank extends React.Component {\n  state = {\n    isActive: true\n  };\n\n  redeemToken() {}\n\n  render() {\n    return (\n      <Query query={GET_LOGGED_IN_USER} variables={{ address: this.props.loggedInUser }}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) throw new Error(`Error!: ${error}`);\n          return (\n            <div id=\"guild_bank\">\n              <Grid>\n                <Grid.Column textAlign=\"center\" className=\"guild_value\">\n                  <p className=\"subtext\">Guild Bank Value</p>\n                  <p className=\"amount\">$53,640,918</p>\n                  <Button size=\"large\" color=\"grey\" disabled={data.member.isActive && this.state.isActive ? false : true} onClick={this.redeemToken}>\n                    Redeem Loot Token\n                  </Button>\n                </Grid.Column>\n              </Grid>\n\n              <Grid>\n                <Grid.Row />\n                <Divider />\n                <Grid.Row centered>\n                  {currencies.map((elder, idx) => (\n                    <CurrencyElement {...elder} key={idx} />\n                  ))}\n                </Grid.Row>\n              </Grid>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n","import { ProposalStatus } from \"./helpers/proposals\";\nimport gql from \"graphql-tag\";\n\nexport const defaults = {\n  loggedInUser: \"\",\n  exchangeRate: \"\",\n  totalShares: \"\",\n  guildBankValue: \"\",\n  shareValue: \"\",\n  currentPeriod: \"\"\n};\n\nexport const resolvers = {\n  Proposal: {\n    status: () => ProposalStatus.Unknown,\n    title: () => \"\",\n    description: () => \"\",\n    gracePeriod: () => \"\",\n    votingEnds: () => \"\",\n    votingStarts: () => \"\",\n    readyForProcessing: () => false\n  },\n  Mutation: {\n    setAttributes: (_, variables, { cache, getCacheKey }) => {\n      const id = getCacheKey({ __typename: \"Proposal\", id: variables.id });\n      console.log('variables: ', variables);\n      const fragment = gql`\n        fragment getStatus on Proposal {\n          status\n        }\n      `;\n      const proposal = cache.readFragment({ fragment, id });\n      const data = {\n        ...proposal,\n        status: variables.status,\n        title: variables.title,\n        description: variables.description,\n        gracePeriod: variables.gracePeriod,\n        votingEnds: variables.votingEnds,\n        votingStarts: variables.votingStarts,\n        readyForProcessing: variables.readyForProcessing\n      };\n      cache.writeData({ id, data });\n      return data;\n    }\n  }\n};\n","import gql from \"graphql-tag\";\n\nexport const typeDefs = gql`\n  extend type Proposal {\n    status: String,\n    title: String,\n    description: String,\n    gracePeriod: String,\n    votingEnds: String,\n    votingStarts: String,\n    readyForProcessing: Bool\n  }\n\n  extend type Query {\n    proposalsWithStatus: [Proposal]\n  }\n`;","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport Background from \"./components/Background\";\nimport Header from \"./components/Header\";\nimport Wrapper from \"./components/Wrapper\";\nimport Home from \"./components/Home\";\nimport ProposalList from \"./components/ProposalList\";\nimport MemberList from \"./components/MemberList\";\nimport ProposalSubmission from \"./components/ProposalSubmission\";\nimport GuildBank from \"./components/GuildBank\";\nimport Login from \"./components/Login\";\nimport NotFound from \"./components/NotFound\";\nimport { ApolloProvider, Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { defaults, resolvers } from \"./resolvers\";\nimport { typeDefs } from \"./schema\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { onError } from \"apollo-link-error\";\nimport { ApolloLink } from \"apollo-link\";\nimport { withClientState } from \"apollo-link-state\";\nimport { CachePersistor } from \"apollo-cache-persist\";\nimport { GET_METADATA } from \"./helpers/graphQlQueries\";\nimport { getMedianizer, getMoloch, getToken } from \"./web3\";\nimport { utils } from \"ethers\";\nimport { adopt } from 'react-adopt'\n\nconsole.log(process.env);\n\nconst cache = new InMemoryCache();\n\nconst stateLink = withClientState({\n  cache,\n  defaults,\n  resolvers,\n  typeDefs\n});\n\nconst persistor = new CachePersistor({\n  cache,\n  storage: window.localStorage,\n  maxSize: false,\n  debug: true\n});\n\nconst httpLink = new HttpLink({\n  uri: process.env.REACT_APP_GRAPH_NODE_URI\n});\n\nconst client = new ApolloClient({\n  cache,\n  link: ApolloLink.from([\n    onError(({ graphQLErrors, networkError }) => {\n      if (graphQLErrors)\n        graphQLErrors.map(({ message, locations, path }) =>\n          console.log(`[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`)\n        );\n      if (networkError) console.log(`[Network error]: ${networkError}`);\n    }),\n    stateLink,\n    httpLink\n  ])\n});\n\nconst IS_LOGGED_IN = gql`\n  query IsUserLoggedIn {\n    loggedInUser @client\n  }\n`;\n\nconst Composed = adopt({\n  loggedInUserData: ({ render }) => <Query query={IS_LOGGED_IN}>{ render }</Query>,\n  metadata: ({ render }) => <Query query={GET_METADATA}>{ render }</Query>,\n})\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restored: false,\n      exchangeRate: \"0\",\n      totalShares: \"0\",\n      guildBankValue: \"0\",\n    };\n  }\n\n  async componentDidMount() {\n    // await persistor.restore();\n\n    await this.populateData(true)\n\n    this.setState({ restored: true });\n  }\n\n  async populateData(refetch) {\n    let { data: loggedInUserData } = await client.query({\n      query: IS_LOGGED_IN\n    });\n    const loggedInUser = loggedInUserData.loggedInUser\n    if (!loggedInUser) {\n      console.log(`User not logged in, cannot fetch`)\n      return\n    }\n\n    let { data } = await client.query({\n      query: GET_METADATA\n    });\n    console.log('data: ', data);\n    let { exchangeRate, totalShares, currentPeriod, guildBankValue, shareValue } = data;\n\n    if (!exchangeRate || refetch) {\n      const medianizer = await getMedianizer();\n      exchangeRate = (await medianizer.compute())[0];\n      exchangeRate = utils.bigNumberify(exchangeRate)\n    }\n\n    if (!totalShares || !currentPeriod || refetch) {\n      const moloch = await getMoloch();\n      totalShares = await moloch.totalShares();\n      currentPeriod = await moloch.getCurrentPeriod();\n    }\n\n    const token = await getToken();\n    if (!guildBankValue || refetch) {\n      guildBankValue = await token.balanceOf(process.env.REACT_APP_GUILD_BANK_ADDRESS);\n    }\n\n    if (guildBankValue && totalShares) {\n      const ethPerShare = guildBankValue.gt(0) ? totalShares.toNumber() / parseFloat(utils.formatEther(guildBankValue)) : 0 // in eth\n      shareValue = utils.parseEther(ethPerShare.toString()) // in wei\n    }\n\n    const dataToWrite = {\n      guildBankValue: guildBankValue.toString(),\n      shareValue: shareValue.toString(),\n      totalShares: totalShares.toString(),\n      currentPeriod: currentPeriod.toString(),\n      exchangeRate: exchangeRate.toString()\n    }\n\n    client.writeData({\n      data: dataToWrite\n    });\n  }\n\n  render() {\n    return this.state.restored ? (\n      <ApolloProvider client={client}>\n        <Router>\n          <Composed>\n            {({ loggedInUserData, metadata }) => {\n              return (\n                <>\n                  <Background />\n                  <Header loggedInUser={loggedInUserData.data.loggedInUser} />\n                  <Wrapper>\n                    <Switch>\n                      <Route\n                        exact\n                        path=\"/\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <Home {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposals\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <ProposalList {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/members\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <MemberList {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route\n                        path=\"/proposalsubmission\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? (\n                            <ProposalSubmission {...props} loggedInUser={loggedInUserData.data.loggedInUser} />\n                          ) : (\n                            <Redirect to={{ pathname: \"/login\" }} />\n                          )\n                        }\n                      />\n                      <Route\n                        path=\"/guildbank\"\n                        render={props =>\n                          loggedInUserData.data.loggedInUser ? <GuildBank {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                      <Route path=\"/login\" render={props => <Login {...props} loginComplete={() => this.populateData(true)} />} />\n                      <Route render={props =>\n                          loggedInUserData.data.loggedInUser ? <Home {...props} loggedInUser={loggedInUserData.data.loggedInUser} /> : <Redirect to={{ pathname: \"/login\" }} />\n                        }\n                      />\n                    </Switch>\n                  </Wrapper>\n                </>\n              );\n            }}\n          </Composed>\n        </Router>\n      </ApolloProvider>\n    ) : (\n      <div>Loading!!!</div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport './index.scss';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/hood.ba69d28c.png\";"],"sourceRoot":""}