(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){e.exports=a.p+"static/media/bull.204229a6.png"},330:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAHr0lEQVR42u1cXUxb5xl+vmPA1EWJgpV5CotWpa0SqbtoWkWWomRNd9HlrrtplEhdF7GrXCQiUm7SKV2zZlJK2t6HhHRrBGTS1kFoaGxgkGBiCCJyYASvLk6MS2Zsfgwyh3N8ft5drOfEBEqA+pxjg7+bj6Nj+3zf8z7v8/6cc2BERCiMFQ1WAKsAVgGsAlgFsApgFcDKBIuIwBjDDx1veLBUVbWMWYwxZBI7W8dPz886v+LZSrAsZckaDMEURaFsWXDdz4qiUL5b3CxXZLIsU85qRK7NmWDlk8Zki5GrYpYkSWTUQtYdwyRJokLUW5mhWTqdpo248TXN6XSajKLuSiuD1R5bZixBEMiIDa5H12WiKNJGE+u1EoDNz8/TRohy2fAQNj8/TxvBxbJBBMbzPOU7QKZ5AM/zlCuupqoqGGNIJBIgImzduvVJxW9C1H2mUVKpFFlJ7cxZ+/vK539BMDiMC9XVUBQFNpstJzSMpVKpnMizNDAfPnyExqYmNDdfx5/OnsW+ffugqio4jrPctdns7CxZHZU0Vqmqirq6ekxMTqKl5QbKy8tx9YsvUFJSoruipdo4OztLVou6xpw7fj+Ghh5genoaXq8HkiThd++9h8rKSt0drUxnWDKZJCNd7FlD2+jMzAwarv0NqqqC53l4vR6k02nY7XZcqa1FRUUFiOhHueOP1thkMmlpIa0tpqm5GeOxcYiiCFEU4fHcRDqdhs1mw549e1D98ceGif2KmTU9PW1ZnqVdYyQcRnv7vyCKIhhjOliiKOqud/bDD3Wx1wAzPb2Zmpois6OKJuiaXtXVN4DneciyvBgsjgMYg8vlwpXaWtjtdgAAx3GmR202MTFBZmrU09/r6enFcDAInuf1c6Iowuv16ExjjIHjOBw+fBi/r6zUA4LptezExASZHQW16yWTSfz9H19CURTIsgwAKC4uhiRJaGm5AUEQFmTwxcXFuHjxIn5WUbGizD7bjGPxeJzMjoLaZ5u/uoFEIgFBEFBcXAwASCaT+Oab/yAQCMDhcMBut+N7UQVjDK/t3o3z588vm6gaxrB4PE4rBSSroj4ygts+H1RFhaqqiMfjCIdHEIvFIAgC/js2BgLwnMOBsrIylJaW6uD84f33sX///gVib0o0jMViZGaCp6oqAODLfzZiZmYG0egowuEw4vE4VFVFSUkJVFXFaCQCRVH075WWlmLTpk14zuHAT10u1NTU6Gw0SkIW4RGLxcjMrgLHcWhtbUPv3V4MDw9jcnJS1yptKIqC6OgoFEV5UhKpKgiA4/nnUVZWht+8/TZOnjy55rpxTf2sx48fk1HpwVLHRIRr166hvqFBj3JaCqF9dimwMj/HcRyOHj2KqqqqRWmEkRLCxsbGyGiLLHVrPxqNora2FgODg3ofSzufCRbHceA4TgfT7Xbj9OnT2LFjB2RZRlFRkWkdXhaNRsmsftD/k1EgHA7D6SzHli1b0NXVhbqGBkwkEpBlGRzHQZZlREdHF/S4tm3bhhMnTuDgwYMIffstvotG8cs33gDLYJ3heVY0GiWjM9+noyHP8/jqRgteevFFvP76awCAuvp6NF+/DkVVIUkSvotGIcsySux2/Pbdd3H8+HEAwKVLl3DH78eF6mo4nc5F+ZaRwYpFIhEyQxy1WSuGx8fj8HV3gzGG3a++ihde+DlisRj+evUq+u7exWgkgr179+LUqVPYvn07Ojs7cbWuDtNTU/jzuXPYtWvXgi6EGYk1e/ToERkabpcB7P79AYyEwxBFEc7yLXC73di8eTO6u7uRTqdx4MABRCIRXKypwfDwMGw2Gw4dOoRD77yzoOQxq/hn4XCYzO6QZo7W1jZMTU/rwv7ySy/D7d4DSZJw+fJleLxe3c127tyJcx99tMD1sm3IZeeRkRGy4q6ONubm5vD11zehqCoURYHD4YAoCGhra0VyZkZnkN1ux2effgqXy2VIT35FeVYoFKK1iHg2S59w+CEC9+/rXYZ0Og2P5yYEQYDNZgMAHDt2DL96882sNwBXE6RYKBQioy64GsB83XeQSCT0TqnWoikqKoLb7cbJqqolGWWmhLBgMEhW3brPbARKsgyvxwtJlpFKpeDx3IQkSXA6nfjkwoUFhbSRjFp2vcFgkKxg1FLsGh8fh7+nF3Nzc/B6PRAEAWfOnMEvXnllsZVN0NhF/awHDx6QUYxZzUY0Fxv89xBCoRCamhrx67fewpEjR54s1kQDLrmvoaEhU+8bLteTJyLYbDY0Njah/14//vjBB7rrGdFzX/XaBwcHyfKnU5763ampKciyApfrJ3r0M1NDf/B4YGCAsvJDWQYs0zVz4fkxxhhYIBAgK0TdbE3MyhwIBCzNs/LmQTbGwO7du0frjgEGGZD19/fTegPKKMBYX18fWfH0TL643oK5r6+PchGQnAOKMbDe3l7KhYXkRRTu6ekhq4HIFwYzv99P+ewaZmos8/v9Of/uTq5oKPP5fJRrmXiuMpT5fD5arxtdy43gZffc1dVFBUatcL59+zatt40ZpXHs1q1bOf+/aHLFAKyzs5PybeFWRUnW0dFB64kBhuZZHR0dlOtRKFcyedbe3k7r9Z3mrAPX3t5O+fgOtBVRmrW1tVG+uITVGvo/8bWlYUYYc/IAAAAASUVORK5CYII="},350:function(e,t,a){e.exports=a(632)},471:function(e,t){},473:function(e,t){},498:function(e,t){},502:function(e,t){},569:function(e){e.exports=[{constant:!0,inputs:[],name:"processingReward",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"members",outputs:[{name:"delegateKey",type:"address"},{name:"shares",type:"uint256"},{name:"isActive",type:"bool"},{name:"highestIndexYesVote",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSharesRequested",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalShares",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"proposalQueue",outputs:[{name:"proposer",type:"address"},{name:"applicant",type:"address"},{name:"sharesRequested",type:"uint256"},{name:"startingPeriod",type:"uint256"},{name:"yesVotes",type:"uint256"},{name:"noVotes",type:"uint256"},{name:"processed",type:"bool"},{name:"didPass",type:"bool"},{name:"aborted",type:"bool"},{name:"tokenTribute",type:"uint256"},{name:"details",type:"string"},{name:"maxTotalSharesAtYesVote",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"memberAddressByDelegateKey",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"gracePeriodLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"abortWindow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"summoningTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"votingPeriodLength",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"proposalDeposit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"guildBank",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"dilutionBound",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"periodDuration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"approvedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"summoner",type:"address"},{name:"_approvedToken",type:"address"},{name:"_periodDuration",type:"uint256"},{name:"_votingPeriodLength",type:"uint256"},{name:"_gracePeriodLength",type:"uint256"},{name:"_abortWindow",type:"uint256"},{name:"_proposalDeposit",type:"uint256"},{name:"_dilutionBound",type:"uint256"},{name:"_processingReward",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"delegateKey",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!0,name:"applicant",type:"address"},{indexed:!1,name:"tokenTribute",type:"uint256"},{indexed:!1,name:"sharesRequested",type:"uint256"}],name:"SubmitProposal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"delegateKey",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"uintVote",type:"uint8"}],name:"SubmitVote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!0,name:"applicant",type:"address"},{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"tokenTribute",type:"uint256"},{indexed:!1,name:"sharesRequested",type:"uint256"},{indexed:!1,name:"didPass",type:"bool"}],name:"ProcessProposal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"sharesToBurn",type:"uint256"}],name:"Ragequit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalIndex",type:"uint256"},{indexed:!1,name:"applicantAddress",type:"address"}],name:"Abort",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"memberAddress",type:"address"},{indexed:!1,name:"newDelegateKey",type:"address"}],name:"UpdateDelegateKey",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"summoner",type:"address"},{indexed:!1,name:"shares",type:"uint256"}],name:"SummonComplete",type:"event"},{constant:!1,inputs:[{name:"applicant",type:"address"},{name:"tokenTribute",type:"uint256"},{name:"sharesRequested",type:"uint256"},{name:"details",type:"string"}],name:"submitProposal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"},{name:"uintVote",type:"uint8"}],name:"submitVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"}],name:"processProposal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"sharesToBurn",type:"uint256"}],name:"ragequit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"proposalIndex",type:"uint256"}],name:"abort",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newDelegateKey",type:"address"}],name:"updateDelegateKey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getCurrentPeriod",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"highestIndexYesVote",type:"uint256"}],name:"canRagequit",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"startingPeriod",type:"uint256"}],name:"hasVotingPeriodExpired",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"memberAddress",type:"address"},{name:"proposalIndex",type:"uint256"}],name:"getMemberProposalVote",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"}]},570:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},571:function(e){e.exports=[{constant:!1,inputs:[{name:"owner_",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"",type:"bytes32"}],name:"poke",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[],name:"poke",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"compute",outputs:[{name:"",type:"bytes32"},{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"wat",type:"address"}],name:"set",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"wat",type:"address"}],name:"unset",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"indexes",outputs:[{name:"",type:"bytes12"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"next",outputs:[{name:"",type:"bytes12"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"read",outputs:[{name:"",type:"bytes32"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"peek",outputs:[{name:"",type:"bytes32"},{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes12"}],name:"values",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"min_",type:"uint96"}],name:"setMin",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"authority_",type:"address"}],name:"setAuthority",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"void",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"pos",type:"bytes12"},{name:"wat",type:"address"}],name:"set",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"authority",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"pos",type:"bytes12"}],name:"unset",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"next_",type:"bytes12"}],name:"setNext",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"min",outputs:[{name:"",type:"uint96"}],payable:!1,type:"function"},{anonymous:!0,inputs:[{indexed:!0,name:"sig",type:"bytes4"},{indexed:!0,name:"guy",type:"address"},{indexed:!0,name:"foo",type:"bytes32"},{indexed:!0,name:"bar",type:"bytes32"},{indexed:!1,name:"wad",type:"uint256"},{indexed:!1,name:"fax",type:"bytes"}],name:"LogNote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"authority",type:"address"}],name:"LogSetAuthority",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"}],name:"LogSetOwner",type:"event"}]},631:function(e,t,a){},632:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(95),o=a.n(s),l=a(9),i=a.n(l),c=a(19),u=a(30),m=a(31),p=a(35),d=a(34),b=a(36),h=a(21),g=a(657),y=a(661),f=a(662),E=a(658),v=function(){return r.a.createElement("div",{id:"background"},r.a.createElement("div",{className:"blurred_image"}),r.a.createElement("div",{className:"dark_overlay"}))},x=a(646),w=a(656),A=a(88),k=a(654),N=a(635),C=a(664),O=a(24),S=a(22),P=a.n(S);function j(){var e=Object(h.a)(["\n  mutation SetAttributes($status: String!, $title: String!, $description: String!) {\n    setAttributes(status: $status, title: $title, description: $description) @client {\n      status\n      title\n      description\n    }\n  }\n"]);return j=function(){return e},e}function I(){var e=Object(h.a)(["\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n"]);return I=function(){return e},e}function D(){var e=Object(h.a)(["\n  query User($address: String!) {\n    member(id: $address) {\n      id\n      shares\n      isActive\n    }\n  }\n"]);return D=function(){return e},e}function V(){var e=Object(h.a)(["\n  query GetMetadata {\n    exchangeRate @client\n    totalShares @client\n    guildBankValue @client\n    shareValue @client\n    currentPeriod @client\n  }\n"]);return V=function(){return e},e}function R(){var e=Object(h.a)(["\n  query CurrentPeriod {\n    currentPeriod @client\n  }\n"]);return R=function(){return e},e}function q(){var e=Object(h.a)(["\n  query ShareValue {\n    shareValue @client\n  }\n"]);return q=function(){return e},e}function F(){var e=Object(h.a)(["\n  query GuildBankValue {\n    guildBankValue @client\n  }\n"]);return F=function(){return e},e}function M(){var e=Object(h.a)(["\n  query TotalShares {\n    totalShares @client\n  }\n"]);return M=function(){return e},e}function T(){var e=Object(h.a)(["\n  query ExchangeRate {\n    exchangeRate @client\n  }\n"]);return T=function(){return e},e}P()(T());var _,U,B,L,W=P()(M()),H=(P()(F()),P()(q()),P()(R())),G=P()(V()),K=P()(D()),z=P()(I()),Q=P()(j()),Y=void 0,Z=Object(O.withApollo)(function(e){return r.a.createElement("div",{className:"dropdownItems"},e.member&&e.member.isActive?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a.Item,{className:"item",onClick:function(){return e._handleCloseDropdown()}},r.a.createElement(x.a,{to:"/members/".concat(e.member.id),className:"link"},r.a.createElement("p",null,r.a.createElement(A.a,{name:"user"}),"View Profile"))),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{icon:"key",className:"item",content:"Change Delegate Key",onClick:function(){e._handleOpenDropdown(),e.onLoadChangeDelegateKey()}}),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{icon:"dollar",className:"item",content:"Rage Quit",onClick:function(){e._handleOpenDropdown(),e.onLoadWithdrawLootToken()}}),r.a.createElement(w.a.Divider,null)):null,r.a.createElement(w.a.Item,{className:"item"},r.a.createElement(x.a,{to:"/login",className:"link",onClick:Object(c.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._handleCloseDropdown(),t.next=3,e.client.resetStore();case 3:case"end":return t.stop()}},t,this)}))},r.a.createElement("p",null,r.a.createElement(A.a,{name:"power off"}),"Sign Out"))))}),X=function(){return r.a.createElement("div",null,r.a.createElement(w.a.Item,{icon:"arrow left",className:"item",content:"Back to Menu",onClick:function(){return Y.props.onLoadMain()}}),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{className:"item submenu"},r.a.createElement("p",null,r.a.createElement(A.a,{name:"key"}),"Change Delegate Key"),r.a.createElement(k.a.Input,{placeholder:"Enter new key address"}),r.a.createElement(N.a,null,"Save")))},J=function(){return r.a.createElement("div",null,r.a.createElement(w.a.Item,{icon:"arrow left",className:"item",content:"Back to Menu",onClick:function(){return Y.props.onLoadMain()}}),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{className:"item submenu"},r.a.createElement("p",null,r.a.createElement(A.a,{name:"dollar"}),"Rage Quit"),r.a.createElement(k.a.Input,{placeholder:"Enter withdrawal address"}),r.a.createElement(k.a.Input,{placeholder:"0"}),r.a.createElement(N.a,null,"Withdraw")))},$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={visibleMenu:"main",visibleRightMenu:!1},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"_handleOpenDropdown",value:function(){this.setState({visibleRightMenu:!0})}},{key:"_handleCloseDropdown",value:function(){this.setState({visibleRightMenu:!1})}},{key:"getTopRightMenuContent",value:function(e){var t,a=this;switch(this.state.visibleMenu){case"main":t=r.a.createElement(Z,{member:e,_handleOpenDropdown:function(){return a._handleOpenDropdown()},_handleCloseDropdown:function(){return a._handleCloseDropdown()},onLoadChangeDelegateKey:function(){return a.setState({visibleMenu:"changeDelegateKey"})},onLoadWithdrawLootToken:function(){return a.setState({visibleMenu:"withdrawLootToken"})}});break;case"changeDelegateKey":t=r.a.createElement(X,{onLoadMain:function(){a._handleOpenDropdown(),a.setState({visibleMenu:"main"})}});break;case"withdrawLootToken":t=r.a.createElement(J,{onLoadMain:function(){a._handleOpenDropdown(),a.setState({visibleMenu:"main"})}})}return t}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Query,{query:K,variables:{address:this.props.loggedInUser}},function(t){var a=t.loading,n=t.error,s=t.data;if(a)return"Loading...";if(n)throw new Error("Error!: ".concat(n));return r.a.createElement("div",{id:"header"},r.a.createElement(C.a,{columns:"equal",verticalAlign:"middle"},e.props.loggedInUser?r.a.createElement(C.a.Column,{textAlign:"left",className:"menu"}):null,r.a.createElement(C.a.Column,{textAlign:"center",className:"logo"},r.a.createElement(x.a,{to:"/"},"MOLOCH")),e.props.loggedInUser?r.a.createElement(C.a.Column,{textAlign:"right",className:"dropdown"},r.a.createElement(w.a,{className:"right_dropdown",open:e.state.visibleRightMenu,onBlur:function(){return e._handleCloseDropdown()},onFocus:function(){return e._handleOpenDropdown()},text:"".concat(s.member.id.substring(0,6),"...")},r.a.createElement(w.a.Menu,{className:"menu blurred",direction:"left"},e.getTopRightMenuContent(s.member)))):null))})}}]),t}(n.Component),ee=function(e){var t=e.children;return r.a.createElement("div",{id:"wrapper"},t)},te=a(655),ae=a(659),ne=a(337),re=a(28),se=a(569),oe=a(570),le=a(571);function ie(){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum||window.web3||alert("This page must be viewed on a Web3 enabled browser."),!window.ethereum){e.next=10;break}return e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert("Metamask needs to be enabled.");case 10:return t=window.ethereum||window.web3.currentProvider,L=new re.ethers.providers.Web3Provider(t),localStorage.setItem("loginType","metamask"),e.abrupt("return",L);case 14:case"end":return e.stop()}},e,this,[[2,7]])}))).apply(this,arguments)}function ue(){var e=new ne.a({rpcUrl:"https://mainnet.infura.io/M2xeaVefzxkLhvrTLq43"});return L=new re.ethers.providers.Web3Provider(e),localStorage.setItem("loginType","gnosis"),L}function me(){return pe.apply(this,arguments)}function pe(){return(pe=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=14;break}if("metamask"!==localStorage.getItem("loginType")){e.next=7;break}return e.next=4,ie();case 4:L=e.sent,e.next=14;break;case 7:if("gnosis"!==localStorage.getItem("loginType")){e.next=13;break}return e.next=10,ue();case 10:L=e.sent,e.next=14;break;case 13:throw new Error("Not logged in with web3.");case 14:return _=new re.ethers.Contract("0x211a94468Ba1e379236B45cA42Dc63eE93139c7E",se,L),e.abrupt("return",_);case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function de(){return be.apply(this,arguments)}function be(){return(be=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=14;break}if("metamask"!==localStorage.getItem("loginType")){e.next=7;break}return e.next=4,ie();case 4:L=e.sent,e.next=14;break;case 7:if("gnosis"!==localStorage.getItem("loginType")){e.next=13;break}return e.next=10,ue();case 10:L=e.sent,e.next=14;break;case 13:throw new Error("Not logged in with web3.");case 14:return U=new re.ethers.Contract("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",oe,L),e.abrupt("return",U);case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function he(){return ge.apply(this,arguments)}function ge(){return(ge=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=re.ethers.getDefaultProvider(),B=new re.ethers.Contract("0x729D19f657BD0614b4985Cf1D82531c67569197B",le,t),e.abrupt("return",B);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ye(){return fe.apply(this,arguments)}function fe(){return(fe=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return e.next=3,me();case 3:return e.abrupt("return",_);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ee(){return ve.apply(this,arguments)}function ve(){return(ve=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=3;break}return e.next=3,de();case 3:return e.abrupt("return",U);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function xe(){return we.apply(this,arguments)}function we(){return(we=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=3;break}return e.next=3,he();case 3:return e.abrupt("return",B);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ae=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2});function ke(){var e=Object(h.a)(["\n  {\n    proposals {\n      id\n    }\n  }\n"]);return ke=function(){return e},e}function Ne(){var e=Object(h.a)(["\n  {\n    members(where: { shares_gt: 0, isActive: true }) {\n      id\n    }\n  }\n"]);return Ne=function(){return e},e}var Ce=P()(Ne()),Oe=function(){return r.a.createElement(O.Query,{query:Ce},function(e){var t,a=e.loading,n=e.error,s=e.data;return n?(t="NA",console.error("Could not load members: ".concat(n))):t=a?"-":s.members.length,r.a.createElement(x.a,{to:"/members",className:"link"},r.a.createElement(N.a,{size:"large",color:"grey",className:"btn_link"},t," Members"))})},Se=P()(ke()),Pe=function(){return r.a.createElement(O.Query,{query:Se},function(e){var t,a=e.loading,n=e.error,s=e.data;return n?(t="NA",console.error("Could not load proposals: ".concat(n))):t=a?"-":s.proposals.length,r.a.createElement(x.a,{to:"/proposals",className:"link"},r.a.createElement(N.a,{size:"large",color:"grey",className:"btn_link"},t," Proposals"))})},je=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={approval:"",token:null,userAddress:null},a.handleChange=function(e){return a.setState({approval:e.target.value})},a.handleSubmit=function(){var e=a.props.loggedInUser,t=a.state,n=t.approval;t.token.methods.approve("0x211a94468Ba1e379236B45cA42Dc63eE93139c7E",n).send({from:e})},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:t=e.sent,this.setState({token:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.approval;return r.a.createElement(O.Query,{query:G},function(a){var n=a.loading,s=a.error,o=a.data;if(!s){if(n)return"Loading...";var l=o.guildBankValue,i=o.exchangeRate,c=o.totalShares,u=o.shareValue;return r.a.createElement("div",{id:"homepage"},r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:6,computer:4,className:"guild_value"},r.a.createElement(x.a,{to:"/guildbank",className:"text_link"},r.a.createElement("p",{className:"subtext"},"Guild Bank Value"),r.a.createElement("p",{className:"amount"},function(e,t){console.log("weiAmount: ",e),console.log("exchangeRate: ",t),console.log("utils.formatEther(weiAmount): ",re.utils.formatEther(e)),console.log("utils.formatEther(exchangeRate): ",re.utils.formatEther(t));var a=re.utils.formatEther(e),n=re.utils.formatEther(t);return Ae.format(parseFloat(a*n))}(l,i)))),r.a.createElement(C.a.Column,{mobile:16,tablet:10,computer:8,textAlign:"center",className:"browse_buttons"},r.a.createElement(Oe,null),r.a.createElement(Pe,null)),r.a.createElement(C.a.Column,{mobile:16,tablet:6,computer:4,className:"guild_value"},r.a.createElement(te.a,{basic:!0,size:"small",trigger:r.a.createElement(N.a,{size:"large",color:"grey",className:"browse_buttons"},"Approve wETH")},r.a.createElement(te.a.Header,null,"Approve wETH"),r.a.createElement(te.a.Content,null,r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(k.a.Field,null,r.a.createElement("label",null,"Amount to Approve"),r.a.createElement("input",{placeholder:"Amount in Wei",name:"amount",value:t,onChange:e.handleChange,className:"asset_amount"})),r.a.createElement(N.a,{type:"submit",color:"grey",className:"btn_link"},"Submit"))))),r.a.createElement(C.a.Column,{width:16},r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(C.a,{columns:"equal",className:"graph_values"},r.a.createElement(C.a.Column,{textAlign:"left"},r.a.createElement("p",{className:"subtext"},"Total Shares"),r.a.createElement("p",{className:"amount"},c)),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Total ETH"),r.a.createElement("p",{className:"amount"},re.utils.formatEther(l))),r.a.createElement(C.a.Column,{textAlign:"right"},r.a.createElement("p",{className:"subtext"},"Share Value"),r.a.createElement("p",{className:"amount"},u)))))))}console.error("Could not load page: ".concat(s))})}}]),t}(r.a.Component),Ie=Object(O.withApollo)(je),De=a(98),Ve=a(335),Re=a(652),qe=a(99),Fe=a.n(qe),Me=a(651),Te=function(e){var t=e.yes,a=e.no,n=(e.totalShares,t+a),s=0===t?0:Math.round(t/n*100),o=0===a?0:Math.round(a/n*100);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Me.a,{percent:s+o,color:"red",size:"small",style:{position:"absolute",top:"0",width:"100%"}}),r.a.createElement(Me.a,{percent:s,color:"green",size:"small"})),r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Column,{floated:"left"},t," Yes Votes"),r.a.createElement(C.a.Column,{floated:"right",textAlign:"right"},a," No Votes")))},_e=35,Ue=35,Be={Unknown:"Unknown",InQueue:"InQueue",VotingPeriod:"VotingPeriod",GracePeriod:"GracePeriod",Aborted:"Aborted",Passed:"Passed",Failed:"Failed",ReadyForProcessing:"ReadyForProcessing"};function Le(e,t){return We.apply(this,arguments)}function We(){return(We=Object(c.a)(i.a.mark(function e(t,a){var n,r,s,o,l,u,m,p,d,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:return n=e.sent,a=parseInt(a),console.log("currentPeriod: ",a),r=function(e){return a<e.startingPeriod},s=function(e){return a>e.startingPeriod+_e&&a<e.startingPeriod+_e+Ue},o=function(e){return a>=e.startingPeriod&&a<=e.startingPeriod+_e},l=function(e){return Math.round(parseInt(e.yesVotes)/(parseInt(e.yesVotes)+parseInt(e.noVotes))*100)>50},u=function(e){return a>e.startingPeriod+_e+Ue},m=function(e){return a>e.startingPeriod+_e},p=function(){var e=Object(c.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.proposalIndex){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,n.proposalQueue(t.proposalIndex-1);case 4:return a=e.sent,e.abrupt("return",a.processed);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.proposalIndex=parseInt(t.proposalIndex),e.next=15,n.proposalQueue(t.proposalIndex);case 15:return d=e.sent,console.log("proposalFromChain: ",d),t.startingPeriod=parseInt(d.startingPeriod),t.votingEnds=0,t.gracePeriod=0,e.next=22,p(t);case 22:t.lastProposalProcessed=e.sent,t.aborted?t.status=Be.Aborted:t.processed&&t.didPass?t.status=Be.Passed:t.processed&&!t.didPass?t.status=Be.Failed:s(t)?(t.status=Be.GracePeriod,t.gracePeriod=t.startingPeriod+_e+Ue-a):o(t)?(t.status=Be.VotingPeriod,t.votingEnds=t.startingPeriod+_e-a):r(t)?(t.status=Be.InQueue,t.votingStarts=t.startingPeriod-a):u(t)?t.status=Be.ReadyForProcessing:t.status=Be.Unknown,t.votingEnded=m(t),t.graceEnded=u(t),t.readyForProcessing=!1,t.status===Be.InQueue&&u(t)&&l(t)&&t.lastProposalProcessed&&(t.readyForProcessing=!0),b={title:"",description:""};try{b=JSON.parse(d.details)}catch(h){console.log("Could not parse details from proposal.proposalIndex: ".concat(t.proposalIndex," proposalFromChain: ").concat(JSON.stringify(d,null,2))),b.title=d.details}return t.title=b.title,t.description=b.description,e.abrupt("return",t);case 33:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function He(){var e=Object(h.a)(["\n  query Proposal($id: String!) {\n    proposal(id: $id) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      votes {\n        member {\n          id\n          shares\n        }\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n"]);return He=function(){return e},e}var Ge=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),Ke={Null:0,Yes:1,No:2},ze=function(e){var t=e.member;e.shares;return r.a.createElement(C.a.Column,{mobile:4,tablet:3,computer:3,textAlign:"center",className:"member_avatar",title:t},r.a.createElement(x.a,{to:"/members/".concat(t),className:"uncolored"},r.a.createElement(Ve.a,{src:Fe.a,centered:!0}),r.a.createElement("p",{className:"name"},t?t.length>10?t.substring(0,10)+"...":t:"")))},Qe=P()(He()),Ye=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleNo=function(){var e=a.state,t=e.proposal,n=e.moloch,r=e.user;n.methods.submitVote(t.proposalIndex,Ke.No).send({from:r.id}),a.setState({userHasVoted:!0})},a.handleYes=function(){var e=a.state,t=e.proposal,n=e.moloch,r=e.user;n.methods.submitVote(t.proposalIndex,Ke.Yes).send({from:r.id}),a.setState({userHasVoted:!0})},a.handleProcess=function(){var e=a.state,t=e.proposal,n=e.moloch,r=e.user;n.methods.processProposal(t.proposalIndex).send({from:r.id})},a.state={proposal:{tokenTribute:0,sharesRequested:0,votingEnded:!0,graceEnded:!0,yesVotes:0,noVotes:0,status:Be.InQueue},user:{id:0,shares:0,isActive:!1},moloch:null},a.fetchData(e),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:t=e.sent,this.setState({moloch:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n,r,s,o,l,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.loggedInUser,e.next=3,a.query({query:Qe,variables:{id:this.props.match.params.id}});case 3:return r=e.sent,e.next=6,a.query({query:K,variables:{address:n}});case 6:if(s=e.sent,this.setState({user:s.data.member}),o=r.data.proposal,r.data.proposal.status!==Be.Unknown){e.next=17;break}return e.next=12,Le(r.data.proposal);case 12:return l=e.sent,e.next=15,a.mutate({mutation:Q,variables:{id:r.data.proposal.id,status:l.status,title:l.title,description:l.description||""}});case 15:c=e.sent,o=Object(De.a)({},r.data.proposal,{status:c.data.setAttributes.status,title:c.data.setAttributes.title,description:c.data.setAttributes.description});case 17:this.setState({proposal:o});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadData",value:function(e){var t=this,a=e.items.member?e.items.member:e.items;this.setState({proposal_detail:a,isAccepted:"accepted"===a.status||"active"===a.status});var n=this.state.proposal_detail.voters?this.state.proposal_detail.voters:[],r=!!n.find(function(e){return e.member===t.state.loggedUser});this.setState({userHasVoted:r}),this.calculateVote(n)}},{key:"render",value:function(){return r.a.createElement("div",{id:"proposal_detail"},r.a.createElement(C.a,{centered:!0,columns:16},r.a.createElement(ae.a,{className:"transparent box segment",textAlign:"center"},r.a.createElement(C.a,{centered:!0,columns:14},r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement("span",{className:"title"},this.state.proposal.title?this.state.proposal.title:"N/A"))),r.a.createElement(C.a,{centered:!0,columns:14},r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:4},r.a.createElement("div",{className:"subtext description"},this.state.proposal.description?this.state.proposal.description:"N/A"),r.a.createElement(C.a,{columns:"equal",className:"tokens"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{className:"tributes"},r.a.createElement(ae.a,{className:"pill",textAlign:"center"},r.a.createElement(A.a,{name:"ethereum"}),this.state.proposal.tokenTribute," ETH")))),r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Column,null,r.a.createElement("p",{className:"subtext voting"},"Shares"),r.a.createElement("p",{className:"amount"},this.state.proposal.sharesRequested)),r.a.createElement(C.a.Column,{textAlign:"right"},r.a.createElement("p",{className:"subtext"},"Total USD Value"),r.a.createElement("p",{className:"amount"},Ge.format(0))))),r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:2},r.a.createElement(Re.a,{vertical:!0})),r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:6},r.a.createElement(C.a,{columns:16},r.a.createElement(C.a.Column,{textAlign:"left",mobile:16,tablet:8,computer:8,className:"pill_column"},r.a.createElement("span",{className:"pill"},this.state.proposal.votingEnded?r.a.createElement("span",{className:"subtext"},"Voting Ended"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Ends: "),r.a.createElement("span",null,this.state.proposal.votingEnds?this.state.proposal.votingEnds:"-"," period",1===this.state.proposal.votingEnds?null:"s")))),r.a.createElement(C.a.Column,{textAlign:"right",className:"pill_column grace",mobile:16,tablet:8,computer:8},r.a.createElement("span",{className:"pill"},this.state.proposal.graceEnded?r.a.createElement("span",{className:"subtext"},"Grace Ended"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Grace Period Ends: "),r.a.createElement("span",null,this.state.proposal.gracePeriod?this.state.proposal.gracePeriod:"-"," period",1===this.state.proposal.gracePeriod?null:"s"))))),r.a.createElement(C.a,{columns:16,className:"member_list"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:16,className:"pill_column"},this.state.proposal.votes&&this.state.proposal.votes.length>0?r.a.createElement(C.a,null,r.a.createElement(C.a.Row,{className:"members_row"},this.state.proposal.votes.map(function(e,t){return r.a.createElement(ze,{member:e.member.id,shares:e.member.shares,key:t})}))):null))),r.a.createElement(C.a,null,r.a.createElement(C.a.Column,null,r.a.createElement(Te,{yes:parseInt(this.state.proposal.yesVotes),no:parseInt(this.state.proposal.noVotes)}))),r.a.createElement(C.a,{columns:"equal",centered:!0},r.a.createElement(C.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(N.a,{className:"btn",color:"grey",disabled:this.state.userHasVoted||this.state.proposal.status!==Be.VotingPeriod||!(this.state.user&&this.state.user.shares)||!(this.state.user&&this.state.user.isActive),onClick:this.handleNo},"Vote No")),r.a.createElement(C.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(N.a,{className:"btn",color:"grey",disabled:this.state.userHasVoted||this.state.proposal.status!==Be.VotingPeriod||!(this.state.user&&this.state.user.shares)||!(this.state.user&&this.state.user.isActive),onClick:this.handleYes},"Vote Yes")),r.a.createElement(C.a.Column,{textAlign:"center",mobile:16,tablet:5,computer:5},r.a.createElement(N.a,{className:"btn",color:"grey",onClick:this.handleProcess,disabled:!this.state.proposal.readyForProcessing},"Process Proposal"))))))))}}]),t}(n.Component),Ze=Object(O.withApollo)(Ye);function Xe(){var e=Object(h.a)(["\n  {\n    proposals(orderBy: proposalIndex, orderDirection: desc) {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      yesVotes\n      noVotes\n      proposalIndex\n      status @client\n      title @client\n      description @client\n      gracePeriod @client\n      votingEnds @client\n      votingStarts @client\n      readyForProcessing @client\n    }\n  }\n"]);return Xe=function(){return e},e}var Je=function(e){var t=e.proposal,a=e.totalShares,n=t.id;return r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:5},r.a.createElement(x.a,{to:{pathname:"/proposals/".concat(n)},className:"uncolored"},r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement("p",{className:"name"},t.title?t.title:"N/A"),r.a.createElement("p",{className:"subtext description"},t.description?t.description:"N/A"),r.a.createElement(C.a,{columns:"equal",className:"value_shares"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Shares Requested"),r.a.createElement("p",{className:"amount"},t.sharesRequested)),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Total Value"),r.a.createElement("p",{className:"amount"},Ae.format(0))))),r.a.createElement(C.a,{columns:"equal",className:"deadlines"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement(ae.a,{className:"voting pill",textAlign:"center"},function(e){switch(e.status){case Be.InQueue:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Begins: "),r.a.createElement("span",null,e.votingStarts?e.votingStarts:"-"," period",1===e.votingStarts?null:"s"));case Be.VotingPeriod:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Ends: "),r.a.createElement("span",null,e.votingEnds?e.votingEnds:"-"," period",1===e.votingEnds?null:"s"));case Be.GracePeriod:return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"subtext"},"Voting Ends: "),r.a.createElement("span",null,e.gracePeriod?e.gracePeriod:"-"," period",1===e.gracePeriod?null:"s"));default:return r.a.createElement(r.a.Fragment,null)}}(t))))),r.a.createElement(Te,{totalShares:a,yes:parseInt(t.yesVotes),no:parseInt(t.noVotes)}))))},$e=P()(Xe()),et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).determineProposalStatuses=function(){var e=Object(c.a)(i.a.mark(function e(t,n,r){var s,o,l,c,u,m,p,d,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&0!==n.length){e.next=2;break}return e.abrupt("return");case 2:s=[],o=!0,l=!1,c=void 0,e.prev=6,u=n[Symbol.iterator]();case 8:if(o=(m=u.next()).done){e.next=25;break}if((p=m.value).status!==Be.Unknown){e.next=21;break}return e.next=13,Le(p,r);case 13:return d=e.sent,console.log("fullProp: ",d),e.next=17,t.mutate({mutation:Q,variables:{id:p.id,status:d.status,title:d.title,description:d.description||"",gracePeriod:d.gracePeriod||"",votingEnds:"".concat(d.votingEnds)||"",votingStarts:"".concat(d.votingStarts)||"",readyForProcessing:d.readyForProcessing||""}});case 17:b=e.sent,s.push(Object(De.a)({},p,{status:b.data.setAttributes.status,title:b.data.setAttributes.title,description:b.data.setAttributes.description,gracePeriod:b.data.setAttributes.gracePeriod,votingEnds:b.data.setAttributes.votingEnds,votingStarts:b.data.setAttributes.votingStarts,readyForProcessing:b.data.setAttributes.readyForProcessing})),e.next=22;break;case 21:s.push(p);case 22:o=!0,e.next=8;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(6),l=!0,c=e.t0;case 31:e.prev=31,e.prev=32,o||null==u.return||u.return();case 34:if(e.prev=34,!l){e.next=37;break}throw c;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return a.setState({proposals:s}),e.abrupt("return");case 41:case"end":return e.stop()}},e,this,[[6,27,31,39],[32,,34,38]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={proposals:[],loading:!0,totalShares:0},a.fetchData(e),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"fetchData",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n,r,s,o,l,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,this.setState({loading:!0}),e.next=4,a.query({query:$e});case 4:return n=e.sent,r=n.data,e.next=8,a.query({query:H});case 8:return s=e.sent,o=s.data,e.next=12,a.query({query:W});case 12:return l=e.sent,c=l.data,e.prev=14,e.next=17,this.determineProposalStatuses(a,r.proposals,o.currentPeriod);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),console.error(e.t0);case 22:return e.prev=22,this.setState({loading:!1,totalShares:+c.totalShares}),e.finish(22);case 25:case"end":return e.stop()}},e,this,[[14,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.isActive,t=this.state,a=t.proposals,n=t.totalShares,s=a.filter(function(e){return e.status===Be.GracePeriod}),o=a.filter(function(e){return e.status===Be.VotingPeriod}),l=a.filter(function(e){return e.status===Be.InQueue}),i=a.filter(function(e){return e.status===Be.Aborted||e.status===Be.Passed||e.status===Be.Failed});return r.a.createElement("div",{id:"proposal_list"},r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:4,textAlign:"right",floated:"right",className:"submit_button"},r.a.createElement(x.a,{to:e?"/proposalsubmission":"/proposals",className:"link"},r.a.createElement(N.a,{size:"large",color:"red",disabled:!e},"New Proposal")))),this.state.loading?r.a.createElement(r.a.Fragment,null,"Loading proposals..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},r.a.createElement("p",{className:"subtext"},s.length," Proposal",s.length>1||0===s.length?"s":""),r.a.createElement("p",{className:"title"},"In Grace Period"))),r.a.createElement(C.a,{columns:3},s.map(function(e,t){return r.a.createElement(Je,{totalShares:n,proposal:e,key:t})})),r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},r.a.createElement("p",{className:"subtext"},o.length," Proposal",o.length>1||0===o.length?"s":""),r.a.createElement("p",{className:"title"},"In Voting Period"))),r.a.createElement(C.a,{columns:3},o.map(function(e,t){return r.a.createElement(Je,{totalShares:n,proposal:e,key:t})})),r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},r.a.createElement("p",{className:"subtext"},l.length," Proposal",l.length>1||0===l.length?"s":""),r.a.createElement("p",{className:"title"},"In Queue"))),r.a.createElement(C.a,{columns:3},l.map(function(e,t){return r.a.createElement(Je,{totalShares:n,proposal:e,key:t})})),r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},r.a.createElement("p",{className:"subtext"},i.length," Proposal",i.length>1||0===i.length?"s":""),r.a.createElement("p",{className:"title"},"Completed"))),r.a.createElement(C.a,{columns:3},i.map(function(e,t){return r.a.createElement(Je,{totalShares:n,proposal:e,key:t})})))))}}]),t}(r.a.Component),tt=Object(O.withApollo)(et),at=function(e){return r.a.createElement(O.Query,{query:K,variables:{address:e.loggedInUser}},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"Loading...";if(a)throw new Error("Error!: ".concat(a));return r.a.createElement(y.a,null,r.a.createElement(f.a,{exact:!0,path:"/proposals",render:function(){return r.a.createElement(tt,{isActive:!!n.member&&n.member.isActive})}}),r.a.createElement(f.a,{path:"/proposals/:id",component:Ze}))})},nt=a(117),rt=a(660),st=a(158),ot=a.n(st);function lt(){var e=Object(h.a)(["\n  query Proposals($id: String!) {\n    proposals {\n      id\n      timestamp\n      tokenTribute\n      sharesRequested\n      processed\n      didPass\n      aborted\n      votes(where: { memberAddress: $id }) {\n        id\n        uintVote\n      }\n      status @client\n      title @client\n      description @client\n    }\n  }\n"]);return lt=function(){return e},e}function it(){var e=Object(h.a)(["\n  query Member($id: String!) {\n    member(id: $id) {\n      id\n      shares\n      tokenTribute\n    }\n    shareValue @client\n  }\n"]);return it=function(){return e},e}var ct=P()(it()),ut=function(e){var t=e.name,a=e.loggedInUser;return r.a.createElement(O.Query,{query:ct,variables:{id:t}},function(e){var n=e.loading,s=e.error,o=e.data;if(n)return r.a.createElement(ae.a,{className:"blurred box"},"Loading...");if(s)throw new Error("Error!: ".concat(s));return r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Column,null,r.a.createElement("p",{className:"subtext"},"Shares"),r.a.createElement("p",{className:"amount"},o.member.shares)),r.a.createElement(C.a.Column,{textAlign:"right"},r.a.createElement("p",{className:"subtext"},"Total Value"),r.a.createElement("p",{className:"amount"},Ae.format(re.utils.bigNumberify(o.member.shares).mul(o.shareValue).toString())))),r.a.createElement(C.a,null,r.a.createElement(C.a.Column,{textAlign:"center",className:"avatar"},r.a.createElement(Ve.a,{centered:!0,src:a===t?ot.a:Fe.a,size:"tiny"}))),r.a.createElement("p",{className:"subtext"},"Tribute"),r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,null,r.a.createElement(ae.a,{className:"pill",textAlign:"center"},r.a.createElement(A.a,{name:"ethereum"}),re.utils.formatEther(o.member.tokenTribute)," ETH")))))})},mt=P()(lt()),pt=function(e){var t=e.name;return r.a.createElement(O.Query,{query:mt,variables:{id:t}},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return r.a.createElement(ae.a,{className:"blurred box"},"Loading...");if(a)throw new Error("Error!: ".concat(a));return console.log("data: ",n),r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(C.a,{columns:"equal",textAlign:"center"},r.a.createElement(C.a.Row,{className:"subtext",style:{fontSize:20}},"History")),r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Row,{className:"header"},r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Proposal Title")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Date")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Shares Requested")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Tribute Offered")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Vote")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Status"))),n.proposals&&n.proposals.length>0?n.proposals.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(C.a.Row,{verticalAlign:"middle"},r.a.createElement(C.a.Column,{textAlign:"center"},e.votes.uintVote===Ke.Yes&&r.a.createElement(nt.a,{className:"dot",circular:!0,color:"green",empty:!0}),(e.votes.uintVote===Ke.No||e.votes.uintVote===Ke.Null)&&r.a.createElement(nt.a,{className:"dot",circular:!0,color:"red",empty:!0}),e.title),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},new Date(1e3*e.timestamp).toISOString().slice(0,10))),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},e.sharesRequested)),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},re.utils.formatEther(e.tokenTribute))),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement(rt.a,{as:"p",color:2===e.vote?"green":1===e.vote?"red":null},2===e.vote?"Y":1===e.vote?"N":"")),r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext date"},e.aborted?"Aborted":e.processed?e.didPass?"Passed":"Failed":"Pending"))),r.a.createElement(Re.a,null))}):r.a.createElement(r.a.Fragment,null,"This member hasn't voted on any proposals yet.")))})},dt=function(e){return r.a.createElement("div",{id:"member_detail"},r.a.createElement("p",{className:"title"}," ",e.match.params.name," "),r.a.createElement(Re.a,null),r.a.createElement(C.a,{columns:16},r.a.createElement(C.a.Row,{className:"details"},r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:6,className:"user"},r.a.createElement(ut,{name:e.match.params.name,loggedInUser:e.loggedInUser})),r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:10,className:"proposals"},r.a.createElement(pt,{name:e.match.params.name})))))};function bt(){var e=Object(h.a)(["\n  {\n    members(where: { shares_gt: 0, shares_lt: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n"]);return bt=function(){return e},e}function ht(){var e=Object(h.a)(["\n  {\n    members(where: { shares_gte: 100, isActive: true }) {\n      id\n      shares\n    }\n  }\n"]);return ht=function(){return e},e}var gt,yt=function(e){var t=e.address,a=e.shares;return r.a.createElement(C.a.Column,{mobile:5,tablet:3,computer:3,textAlign:"center",className:"member_avatar",title:t},r.a.createElement(x.a,{to:"/members/".concat(t),className:"uncolored"},r.a.createElement(Ve.a,{src:Fe.a,centered:!0,size:"tiny"}),r.a.createElement("p",{className:"name"},t?t.length>10?t.substring(0,10)+"...":t:""),r.a.createElement("p",{className:"subtext"},a," shares")))},ft=function(e){return r.a.createElement(O.Query,{query:K,variables:{address:e.loggedInUser}},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.member&&n.member.isActive?r.a.createElement(x.a,{to:"/members/".concat(n.member.id),className:"uncolored"},r.a.createElement(Ve.a,{centered:!0,src:ot.a,size:"tiny"}),r.a.createElement("p",{className:"name"},n.member.id?n.member.id.length>10?n.member.id.substring(0,10)+"...":n.member.id:""),r.a.createElement("p",{className:"subtext"},n.member.shares?n.member.shares:0," shares")):r.a.createElement("div",null)})},Et=P()(ht()),vt=function(){return r.a.createElement(O.Query,{query:Et},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.members.length>0?n.members.map(function(e,t){return r.a.createElement(yt,{address:e.id,shares:e.shares,key:t})}):r.a.createElement(r.a.Fragment,null,"No elders to show.")})},xt=P()(bt()),wt=function(){return r.a.createElement(O.Query,{query:xt},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return"...";if(a)throw new Error("Error!: ".concat(a));return n.members.length>0?n.members.map(function(e,t){return r.a.createElement(yt,{address:e.id,shares:e.shares,key:t})}):r.a.createElement(r.a.Fragment,null,"No contributors to show.")})},At=function(e){return r.a.createElement(O.Query,{query:z},function(t){var a,n=t.loading,s=t.error,o=t.data;return s?(a="NA",console.error("Could not load members: ".concat(s))):a=n?"-":o.members.length,r.a.createElement("div",{id:"member_list"},r.a.createElement(C.a,{columns:16,verticalAlign:"middle"},r.a.createElement(C.a.Column,{mobile:16,tablet:6,computer:6,textAlign:"left",className:"member_list_header"},r.a.createElement("p",{className:"subtext"},a," Members"))),r.a.createElement(C.a,null,r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement(ft,e))),r.a.createElement(C.a,{className:"member_item"},r.a.createElement(C.a.Row,null,r.a.createElement("p",{style:{paddingLeft:"1rem"}},"Elders (100+ shares)")),r.a.createElement(Re.a,null),r.a.createElement(C.a.Row,{className:"members_row",centered:!0},r.a.createElement(vt,null))),r.a.createElement(C.a,{className:"member_item"},r.a.createElement(C.a.Row,null,r.a.createElement("p",{style:{paddingLeft:"1rem"}},"Contributors")),r.a.createElement(Re.a,null),r.a.createElement(C.a.Row,{className:"members_row",centered:!0},r.a.createElement(wt,null))))})},kt=function(e){return r.a.createElement(y.a,null,r.a.createElement(f.a,{exact:!0,path:"/members",render:function(t){return r.a.createElement(At,Object.assign({},t,{loggedInUser:e.loggedInUser}))}}),r.a.createElement(f.a,{path:"/members/:name",render:function(t){return r.a.createElement(dt,Object.assign({},t,{loggedInUser:e.loggedInUser}))}}))},Nt=a(116),Ct=a(37),Ot=a(650),St=a(310),Pt=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),jt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleAsset=a.handleAsset.bind(Object(Ct.a)(Object(Ct.a)(a))),a.deleteAsset=a.deleteAsset.bind(Object(Ct.a)(Object(Ct.a)(a))),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"handleAsset",value:function(e,t){var a=t.value,n=t.name;this.props.onHandleAsset({value:a,name:n,assetIndex:this.props.assetIndex})}},{key:"deleteAsset",value:function(){this.props.onHandleDeleteAsset({assetIndex:this.props.assetIndex})}},{key:"render",value:function(){return r.a.createElement(C.a.Row,{className:"asset_field_row"},r.a.createElement(C.a.Column,{width:2,textAlign:"left",className:"asset_field_grid membership"},r.a.createElement("div",{className:"subtext",style:{paddingTop:10,paddingRight:10}},this.props.assets.symbol)),r.a.createElement(C.a.Column,{mobile:14,tablet:10,computer:7,className:"asset_field_grid"},r.a.createElement(Ot.a,{name:"amount",className:"asset_amount",placeholder:"Enter Amount",type:"number",onChange:this.handleAsset})))}}]),t}(n.Component),It=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={address:e.loggedInUser,title:"",description:"",shares:0,tribute:0,assets:[{asset:"ETH",symbol:"ETH",amount:0,logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png"}],formErrors:{title:"",description:"",assets:"",shares:""},titleValid:!1,descriptionValid:!1,assetsValid:!1,sharesValid:!1,formValid:!1},a.addAsset=a.addAsset.bind(Object(Ct.a)(Object(Ct.a)(a))),a.handleInput=a.handleInput.bind(Object(Ct.a)(Object(Ct.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(Ct.a)(Object(Ct.a)(a))),a.handleAsset=a.handleAsset.bind(Object(Ct.a)(Object(Ct.a)(a))),a.handleDeleteAsset=a.handleDeleteAsset.bind(Object(Ct.a)(Object(Ct.a)(a))),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:t=e.sent,this.setState({moloch:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.titleValid,r=this.state.descriptionValid,s=this.state.assetsValid,o=this.state.sharesValid;switch(e){case"title":n=""!==t,a.title=n?"":"Title field is invalid";break;case"description":r=""!==t,a.description=r?"":"Description field is invalid";break;case"assets":Object.keys(t).map(function(e){for(var a in t[e]){if(Object.keys(t[e]).length<=1)return s=!1,!1;if(null===t[e][a]||""===t[e][a])return s=!1,!1}return s=!0,!0}),a.assets=s?"":"Asset is invalid";break;case"shares":o=t>0,a.shares=o?"":"Shares field is invalid"}this.setState({formErrors:a,titleValid:n,descriptionValid:r,assetsValid:s,sharesValid:o},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.titleValid&&this.state.descriptionValid&&this.state.assetsValid&&this.state.sharesValid})}},{key:"addAsset",value:function(){var e=this.state.assets?this.state.assets:[];e.push({}),this.setState({assets:e})}},{key:"handleInput",value:function(e){var t=this,a=e.target.name,n=e.target.value;"shares"===a?this.setState(Object(Nt.a)({},a,parseInt(n)),function(){t.validateField(a,n)}):this.setState(Object(Nt.a)({},e.target.name,e.target.value),function(){t.validateField(a,n)})}},{key:"handleAsset",value:function(e){var t=this,a=this.state.assets;a[e.assetIndex][e.name]=e.value,this.setState({assets:a},function(){t.validateField("assets",a)}),this.setState({tribute:0*e.value})}},{key:"handleDeleteAsset",value:function(e){var t=this,a=this.state.assets;a.splice(e.assetIndex,1),this.setState({assets:a},function(){t.validateField("assets",a)})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,a,n,r,s,o,l,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.moloch,n=t.formValid,r=t.address,s=t.title,o=t.description,l=t.shares,c=t.tribute,!n){e.next=13;break}return e.prev=2,e.next=5,a.methods.submitProposal(r,c,l,JSON.stringify({title:s,description:o})).send({from:r});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0),alert("Error processing proposal");case 11:e.next=14;break;case 13:alert("Please fill any missing fields.");case 14:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"proposal_submission"},r.a.createElement(k.a,null,r.a.createElement(C.a,{centered:!0,columns:16},r.a.createElement(C.a.Row,{stretched:!0},r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(Ot.a,{name:"title",transparent:!0,size:"big",inverted:!0,placeholder:"Proposal Title",onChange:this.handleInput,value:this.state.title}),r.a.createElement(Re.a,null))),r.a.createElement(C.a.Row,{stretched:!0},r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(k.a.Input,{name:"shares",label:"Request voting shares",placeholder:"Shares",fluid:!0,type:"number",onChange:this.handleInput,value:this.state.shares})))),r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(C.a,{columns:"equal"},r.a.createElement(C.a.Column,null,r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(k.a.TextArea,{name:"description",label:"Description",placeholder:"Type here",rows:15,onChange:this.handleInput,value:this.state.description}))),r.a.createElement(C.a.Column,{mobile:16,tablet:16,computer:8},r.a.createElement(ae.a,{className:"blurred box"},r.a.createElement(C.a,{columns:16},r.a.createElement(C.a.Column,{width:14},r.a.createElement("div",{className:"subtext"},"Request Amount"))),r.a.createElement(C.a,{columns:3,className:"assets_field"},this.state.assets.map(function(t,a){return r.a.createElement(jt,{key:a,assetIndex:a,assets:t,onHandleAsset:e.handleAsset,onHandleDeleteAsset:e.handleDeleteAsset})})),r.a.createElement(Re.a,null),r.a.createElement(C.a,{columns:"equal",className:"value_shares"},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{textAlign:"center"},r.a.createElement("p",{className:"subtext"},"Tribute Value"),r.a.createElement("p",{className:"amount"},Pt.format(this.state.tribute)))))))))),r.a.createElement(C.a.Row,null,r.a.createElement(St.a,{mobile:16,tablet:8,computer:8,className:"submit_button"},r.a.createElement(N.a,{size:"large",color:"red",onClick:this.handleSubmit},"Submit Proposal"))))))}}]),t}(n.Component),Dt=a(330),Vt=[{name:"ETH",shares:508,value:32e3,icon:a.n(Dt).a}],Rt=function(e){var t=e.name,a=e.shares,n=e.icon,s=e.value;return r.a.createElement(C.a.Column,{mobile:5,tablet:3,computer:3,textAlign:"center",className:"currency_element"},r.a.createElement(Ve.a,{src:n,centered:!0,size:"tiny",circular:!0}),r.a.createElement("p",{className:"name"},t),r.a.createElement("p",{className:"shares"},a),r.a.createElement("p",{className:"subtext"},"$"+s))},qt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:!0},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"redeemToken",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Query,{query:K,variables:{address:this.props.loggedInUser}},function(t){var a=t.loading,n=t.error,s=t.data;if(a)return"Loading...";if(n)throw new Error("Error!: ".concat(n));return r.a.createElement("div",{id:"guild_bank"},r.a.createElement(C.a,null,r.a.createElement(C.a.Column,{textAlign:"center",className:"guild_value"},r.a.createElement("p",{className:"subtext"},"Guild Bank Value"),r.a.createElement("p",{className:"amount"},"$53,640,918"),r.a.createElement(N.a,{size:"large",color:"grey",disabled:!s.member.isActive||!e.state.isActive,onClick:e.redeemToken},"Redeem Loot Token"))),r.a.createElement(C.a,null,r.a.createElement(C.a.Row,null),r.a.createElement(Re.a,null),r.a.createElement(C.a.Row,{centered:!0},Vt.map(function(e,t){return r.a.createElement(Rt,Object.assign({},e,{key:t}))}))))})}}]),t}(r.a.Component),Ft=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).loginWithMetamask=function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:return n=e.sent,e.next=5,a.doLoginBypassAuth(t,n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.loginWithGnosisSafe=function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue(),e.next=3,a.doLoginBypassAuth(t,n);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.doLoginBypassAuth=function(){var e=Object(c.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.listAccounts();case 2:(gt=e.sent[0])?(t.writeData({data:{loggedInUser:gt.toLowerCase()}}),a.props.loginComplete(),a.props.history.push("/")):alert("Could not retrieve address from Gnosis Safe/MetaMask, is it configured and this domain whitelisted?");case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(O.ApolloConsumer,null,function(t){return r.a.createElement("div",{id:"login"},r.a.createElement(C.a,{columns:1,centered:!0},r.a.createElement(C.a.Row,null,r.a.createElement(N.a,{size:"large",color:"grey",onClick:function(){return e.loginWithMetamask(t)}},"Connect With Web3")),r.a.createElement(C.a.Row,null,r.a.createElement(N.a,{size:"large",color:"grey",onClick:function(){return e.loginWithGnosisSafe(t)}},"Connect With Web3 (Gnosis Safe)"))))})}}]),t}(n.Component),Mt=function(){return r.a.createElement("p",null,"Not Found")};function Tt(){var e=Object(h.a)(["\n        fragment getStatus on Proposal {\n          status\n        }\n      "]);return Tt=function(){return e},e}var _t={Proposal:{status:function(){return Be.Unknown},title:function(){return""},description:function(){return""},gracePeriod:function(){return""},votingEnds:function(){return""},votingStarts:function(){return""},readyForProcessing:function(){return!1}},Mutation:{setAttributes:function(e,t,a){var n=a.cache,r=(0,a.getCacheKey)({__typename:"Proposal",id:t.id});console.log("variables: ",t);var s=P()(Tt()),o=n.readFragment({fragment:s,id:r}),l=Object(De.a)({},o,{status:t.status,title:t.title,description:t.description,gracePeriod:t.gracePeriod,votingEnds:t.votingEnds,votingStarts:t.votingStarts,readyForProcessing:t.readyForProcessing});return n.writeData({id:r,data:l}),l}}};function Ut(){var e=Object(h.a)(["\n  extend type Proposal {\n    status: String,\n    title: String,\n    description: String,\n    gracePeriod: String,\n    votingEnds: String,\n    votingStarts: String,\n    readyForProcessing: Bool\n  }\n\n  extend type Query {\n    proposalsWithStatus: [Proposal]\n  }\n"]);return Ut=function(){return e},e}var Bt=P()(Ut()),Lt=a(200),Wt=a(653),Ht=a(336),Gt=a(331),Kt=a(20),zt=a(334),Qt=a(333);function Yt(){var e=Object(h.a)(["\n  query IsUserLoggedIn {\n    loggedInUser @client\n  }\n"]);return Yt=function(){return e},e}console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/moloch-monorepo",REACT_APP_MOLOCH_ADDRESS:"0x211a94468Ba1e379236B45cA42Dc63eE93139c7E",REACT_APP_MEDIANIZER_ADDRESS:"0x729D19f657BD0614b4985Cf1D82531c67569197B",REACT_APP_TOKEN_ADDRESS:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",REACT_APP_GRAPH_NODE_URI:"https://api.thegraph.com/subgraphs/name/jamesyoung/moloch",REACT_APP_ETH_URL:"https://mainnet.infura.io/M2xeaVefzxkLhvrTLq43"}));var Zt=new Wt.a,Xt=Object(zt.a)({cache:Zt,defaults:{loggedInUser:"",exchangeRate:"",totalShares:"",guildBankValue:"",shareValue:"",currentPeriod:""},resolvers:_t,typeDefs:Bt}),Jt=(new Qt.CachePersistor({cache:Zt,storage:window.localStorage,maxSize:!1,debug:!0}),new Ht.a({uri:"https://api.thegraph.com/subgraphs/name/jamesyoung/moloch"})),$t=new Lt.a({cache:Zt,link:Kt.a.from([Object(Gt.a)(function(e){var t=e.graphQLErrors,a=e.networkError;t&&t.map(function(e){var t=e.message,a=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(a,", Path: ").concat(n))}),a&&console.log("[Network error]: ".concat(a))}),Xt,Jt])}),ea=P()(Yt()),ta=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={restored:!1,exchangeRate:"0",totalShares:"0",guildBankValue:"0"},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateData(!0);case 2:this.setState({restored:!0});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"populateData",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n,r,s,o,l,c,u,m,p,d,b,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t.query({query:ea});case 2:if(a=e.sent,n=a.data,r=n.loggedInUser){e.next=8;break}return console.log("User not logged in, cannot fetch"),e.abrupt("return");case 8:return e.next=10,$t.query({query:G});case 10:if(s=e.sent,o=s.data,console.log("data: ",o),l=o.exchangeRate,c=o.totalShares,u=o.currentPeriod,m=o.guildBankValue,p=o.shareValue,l&&!t){e.next=22;break}return e.next=17,xe();case 17:return d=e.sent,e.next=20,d.compute();case 20:l=e.sent[0],l=re.utils.bigNumberify(l);case 22:if(c&&u&&!t){e.next=32;break}return e.next=25,ye();case 25:return b=e.sent,e.next=28,b.totalShares();case 28:return c=e.sent,e.next=31,b.getCurrentPeriod();case 31:u=e.sent;case 32:return e.next=34,Ee();case 34:if(h=e.sent,m&&!t){e.next=39;break}return e.next=38,h.balanceOf(r);case 38:m=e.sent;case 39:p=re.utils.bigNumberify(m).gt(0)?re.utils.bigNumberify(c).div(m):0,$t.writeData({data:{guildBankValue:m.toString(),shareValue:p.toString(),totalShares:c.toString(),currentPeriod:u.toString(),exchangeRate:l.toString()}});case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.restored?r.a.createElement(O.ApolloProvider,{client:$t},r.a.createElement(g.a,null,r.a.createElement(O.Query,{query:ea},function(t){var a=t.data;return console.log("data: ",a.loggedInUser),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement($,{loggedInUser:a.loggedInUser}),r.a.createElement(ee,null,r.a.createElement(y.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(e){return a.loggedInUser?r.a.createElement(Ie,Object.assign({},e,{loggedInUser:a.loggedInUser})):r.a.createElement(E.a,{to:{pathname:"/login"}})}}),r.a.createElement(f.a,{path:"/proposals",render:function(e){return a.loggedInUser?r.a.createElement(at,Object.assign({},e,{loggedInUser:a.loggedInUser})):r.a.createElement(E.a,{to:{pathname:"/login"}})}}),r.a.createElement(f.a,{path:"/members",render:function(e){return a.loggedInUser?r.a.createElement(kt,Object.assign({},e,{loggedInUser:a.loggedInUser})):r.a.createElement(E.a,{to:{pathname:"/login"}})}}),r.a.createElement(f.a,{path:"/proposalsubmission",render:function(e){return a.loggedInUser?r.a.createElement(It,Object.assign({},e,{loggedInUser:a.loggedInUser})):r.a.createElement(E.a,{to:{pathname:"/login"}})}}),r.a.createElement(f.a,{path:"/guildbank",render:function(e){return a.loggedInUser?r.a.createElement(qt,Object.assign({},e,{loggedInUser:a.loggedInUser})):r.a.createElement(E.a,{to:{pathname:"/login"}})}}),r.a.createElement(f.a,{path:"/login",render:function(t){return r.a.createElement(Ft,Object.assign({},t,{loginComplete:function(){return e.populateData(!0)}}))}}),r.a.createElement(f.a,{component:Mt}))))}))):r.a.createElement("div",null,"Loading!!!")}}]),t}(r.a.Component);a(630),a(631);o.a.render(r.a.createElement(ta,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a.p+"static/media/hood.ba69d28c.png"}},[[350,1,2]]]);
//# sourceMappingURL=main.231a95c4.chunk.js.map